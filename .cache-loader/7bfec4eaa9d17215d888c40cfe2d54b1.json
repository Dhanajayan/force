{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/apps/article/components/NewsArticle.tsx","dependencies":[{"path":"/Users/eve/development/force/src/desktop/apps/article/components/NewsArticle.tsx","mtime":1535573774000},{"path":"/Users/eve/development/force/.babelrc","mtime":1537178749000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\n(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nimport React, { Component, Fragment } from 'react';\nimport { Article } from \"@artsy/reaction/dist/Components/Publishing/Article\";\nimport Waypoint from 'react-waypoint';\nexport var NewsArticle =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NewsArticle, _Component);\n\n  function NewsArticle(props) {\n    var _this;\n\n    _classCallCheck(this, NewsArticle);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewsArticle).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onExpand\", function () {\n      var article = _this.props.article;\n\n      _this.setMetadata(article);\n\n      _this.setState({\n        isTruncated: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"setMetadata\", function () {\n      var article = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var id = article ? article.id : 'news';\n      var path = article ? \"/news/\".concat(article.slug) : '/news';\n      document.title = article ? article.thumbnail_title : 'News';\n      window.history.replaceState({}, id, path);\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onEnter\", function (_ref) {\n      var previousPosition = _ref.previousPosition,\n          currentPosition = _ref.currentPosition;\n      var _this$props = _this.props,\n          article = _this$props.article,\n          onActiveArticleChange = _this$props.onActiveArticleChange,\n          onDateChange = _this$props.onDateChange,\n          isMobile = _this$props.isMobile;\n      var isTruncated = _this.state.isTruncated;\n\n      if (currentPosition === 'inside') {\n        if (previousPosition === 'above') {\n          article.published_at && onDateChange(article.published_at);\n        }\n\n        if (!isTruncated) {\n          _this.setMetadata(article);\n        } else {\n          _this.setMetadata();\n        }\n\n        if (isMobile) {\n          onActiveArticleChange(article.id);\n        }\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onLeave\", function (_ref2) {\n      var previousPosition = _ref2.previousPosition,\n          currentPosition = _ref2.currentPosition;\n      var _this$props2 = _this.props,\n          nextArticle = _this$props2.nextArticle,\n          onDateChange = _this$props2.onDateChange,\n          isMobile = _this$props2.isMobile,\n          onActiveArticleChange = _this$props2.onActiveArticleChange;\n\n      if (currentPosition === 'above' && previousPosition === 'inside') {\n        if (nextArticle) {\n          nextArticle.published_at && onDateChange(nextArticle.published_at);\n\n          if (isMobile) {\n            onActiveArticleChange(nextArticle.id);\n          }\n        }\n      }\n    });\n\n    _this.state = {\n      isTruncated: props.isTruncated || false,\n      bottomOffset: '200px'\n    };\n    return _this;\n  }\n\n  _createClass(NewsArticle, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        bottomOffset: \"\".concat(window.innerHeight / 2, \"px\")\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props3 = this.props,\n          article = _this$props3.article,\n          display = _this$props3.display,\n          isActive = _this$props3.isActive,\n          isMobile = _this$props3.isMobile,\n          isTruncated = _this$props3.isTruncated,\n          relatedArticlesForCanvas = _this$props3.relatedArticlesForCanvas,\n          renderTime = _this$props3.renderTime;\n      var bottomOffset = this.state.bottomOffset;\n      return React.createElement(Fragment, null, React.createElement(Waypoint, {\n        onEnter: function onEnter(waypointData) {\n          return _this2.onEnter(waypointData);\n        },\n        onLeave: function onLeave(waypointData) {\n          return _this2.onLeave(waypointData);\n        },\n        topOffset: \"-10px\",\n        bottomOffset: bottomOffset\n      }, React.createElement(\"div\", null, React.createElement(Article, {\n        article: article,\n        isTruncated: isTruncated,\n        isMobile: isMobile,\n        onExpand: this.onExpand,\n        isHovered: isMobile && isActive,\n        relatedArticlesForCanvas: relatedArticlesForCanvas,\n        display: display,\n        renderTime: renderTime\n      }))));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    value: function __reactstandin__regenerateByEval(key, code) {\n      this[key] = eval(code);\n    }\n  }]);\n\n  return NewsArticle;\n}(Component);\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(NewsArticle, \"NewsArticle\", \"/Users/eve/development/force/src/desktop/apps/article/components/NewsArticle.tsx\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/eve/development/force/src/desktop/apps/article/components/NewsArticle.tsx"],"names":["React","Component","Fragment","Article","Waypoint","NewsArticle","props","article","setMetadata","setState","isTruncated","id","path","slug","document","title","thumbnail_title","window","history","replaceState","previousPosition","currentPosition","onActiveArticleChange","onDateChange","isMobile","state","published_at","nextArticle","bottomOffset","innerHeight","display","isActive","relatedArticlesForCanvas","renderTime","waypointData","onEnter","onLeave","onExpand"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react'\nimport { Article } from 'reaction/Components/Publishing/Article'\nimport Waypoint from 'react-waypoint'\nimport {\n  ArticleData,\n  DisplayData,\n  RelatedArticleCanvasData,\n} from 'reaction/Components/Publishing/Typings'\n\ninterface Props {\n  article: ArticleData\n  display?: DisplayData\n  isActive: boolean\n  isMobile: boolean\n  isTruncated: boolean\n  nextArticle: ArticleData\n  onActiveArticleChange: (id: string) => void\n  onDateChange: (date: string) => void\n  relatedArticlesForCanvas?: RelatedArticleCanvasData[]\n  renderTime?: number\n}\n\ninterface State {\n  isTruncated: boolean\n  bottomOffset: string\n}\n\nexport class NewsArticle extends Component<Props, State> {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isTruncated: props.isTruncated || false,\n      bottomOffset: '200px',\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      bottomOffset: `${window.innerHeight / 2}px`,\n    })\n  }\n\n  onExpand = () => {\n    const { article } = this.props\n    this.setMetadata(article)\n    this.setState({\n      isTruncated: false,\n    })\n  }\n\n  setMetadata = (article: any = null) => {\n    const id = article ? article.id : 'news'\n    const path = article ? `/news/${article.slug}` : '/news'\n    document.title = article ? article.thumbnail_title : 'News'\n    window.history.replaceState({}, id, path)\n  }\n\n  onEnter = ({ previousPosition, currentPosition }) => {\n    const {\n      article,\n      onActiveArticleChange,\n      onDateChange,\n      isMobile,\n    } = this.props\n    const { isTruncated } = this.state\n\n    if (currentPosition === 'inside') {\n      if (previousPosition === 'above') {\n        article.published_at && onDateChange(article.published_at)\n      }\n\n      if (!isTruncated) {\n        this.setMetadata(article)\n      } else {\n        this.setMetadata()\n      }\n\n      if (isMobile) {\n        onActiveArticleChange(article.id)\n      }\n    }\n  }\n\n  onLeave = ({ previousPosition, currentPosition }) => {\n    const {\n      nextArticle,\n      onDateChange,\n      isMobile,\n      onActiveArticleChange,\n    } = this.props\n\n    if (currentPosition === 'above' && previousPosition === 'inside') {\n      if (nextArticle) {\n        nextArticle.published_at && onDateChange(nextArticle.published_at)\n        if (isMobile) {\n          onActiveArticleChange(nextArticle.id)\n        }\n      }\n    }\n  }\n\n  render() {\n    const {\n      article,\n      display,\n      isActive,\n      isMobile,\n      isTruncated,\n      relatedArticlesForCanvas,\n      renderTime,\n    } = this.props\n    const { bottomOffset } = this.state\n\n    return (\n      <Fragment>\n        <Waypoint\n          onEnter={waypointData => this.onEnter(waypointData)}\n          onLeave={waypointData => this.onLeave(waypointData)}\n          topOffset=\"-10px\"\n          bottomOffset={bottomOffset}\n        >\n          <div>\n            <Article\n              article={article}\n              isTruncated={isTruncated}\n              isMobile={isMobile}\n              onExpand={this.onExpand}\n              isHovered={isMobile && isActive}\n              relatedArticlesForCanvas={relatedArticlesForCanvas}\n              display={display}\n              renderTime={renderTime}\n            />\n          </div>\n        </Waypoint>\n      </Fragment>\n    )\n  }\n}\n"]}]}