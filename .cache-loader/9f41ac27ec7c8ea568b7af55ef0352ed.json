{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/apps/gene/client.js","dependencies":[{"path":"/Users/eve/development/force/src/desktop/apps/gene/client.js","mtime":1535573774000},{"path":"/Users/eve/development/force/.babelrc","mtime":1537178749000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/objectSpread\";\n\n(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nimport $ from 'jquery';\nimport imagesLoaded from 'imagesloaded';\nimagesLoaded.makeJQueryPlugin($);\nimport qs from 'querystring';\nimport { data as sd } from 'sharify';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Contents } from \"@artsy/reaction/dist/Components/Gene\";\nimport { ContextProvider } from \"@artsy/reaction/dist/Artsy\";\nimport Gene from \"../../models/gene.coffee\";\nimport CurrentUser from \"../../models/current_user.coffee\";\nimport { Following, FollowButton } from \"../../components/follow_button/index.coffee\";\nimport ShareView from \"../../components/share/view.coffee\";\nimport RelatedGenesView from \"../../components/related_links/types/gene_genes.coffee\";\nimport blurb from \"../../components/gradient_blurb/index.coffee\";\n\nvar relatedArtistsTemplate = function relatedArtistsTemplate(args) {\n  return require(\"./templates/related_artists.jade\")(args);\n}; // Update URL with current filters/mode/sort, for ease of sharing.\n\n\nvar onStateChange = function onStateChange(_ref) {\n  var filters = _ref.filters,\n      sort = _ref.sort,\n      mode = _ref.mode;\n  var params;\n\n  if (mode === 'artists') {\n    params = {\n      mode: mode\n    };\n  } else {\n    params = _objectSpread({}, filters, {\n      sort: sort,\n      mode: mode\n    });\n  }\n\n  var fragment = '?' + qs.stringify(params);\n  window.history.replaceState({}, new Gene(sd.GENE).toPageTitle(), fragment);\n};\n\nfunction setupGenePage() {\n  // Pull out sort and filters from URL, if present\n  var urlParams = qs.parse(location.search.replace(/^\\?/, ''));\n  var sort, mode;\n\n  if (urlParams.sort) {\n    sort = urlParams.sort;\n    delete urlParams.sort;\n  }\n\n  if (urlParams.mode) {\n    mode = urlParams.mode;\n    delete urlParams.mode;\n  } else {\n    mode = sd.MODE === 'artist' ? 'artists' : sd.MODE;\n  }\n\n  var options = Object.assign({}, {\n    sort: sort\n  }, {\n    filters: _objectSpread({}, urlParams)\n  }, {\n    geneID: sd.GENE.id,\n    mode: mode\n  });\n  var user = CurrentUser.orNull();\n  ReactDOM.render(React.createElement(ContextProvider, {\n    user: user ? user.toJSON() : null\n  }, React.createElement(Contents, _extends({}, options, {\n    onStateChange: onStateChange\n  }))), document.getElementById('gene-filter')); // Load related artists\n\n  var gene = new Gene(sd.GENE);\n  gene.relatedArtists.on('sync', function (artists) {\n    var html = relatedArtistsTemplate({\n      artists: artists.models\n    });\n    $('.related-artists').html(html).addClass('is-fade-in');\n  });\n  gene.fetchArtists('related'); // Setup user\n\n  var following = user ? new Following(null, {\n    kind: 'gene'\n  }) : null;\n  new FollowButton({\n    el: $('.follow-button'),\n    following: following,\n    modelName: 'gene',\n    model: gene,\n    context_page: 'Gene page'\n  });\n  if (following) following.syncFollows([gene.id]); // Setup share view\n\n  new ShareView({\n    el: $('.js-gene-share-buttons')\n  }); // Setup blurb\n\n  blurb($('.js-gene-blurb'), {\n    limit: 250\n  }); // Setup related gene view\n\n  new RelatedGenesView({\n    el: $('.main-layout-container .related-genes'),\n    id: gene.id\n  });\n}\n\nvar _default = {\n  setupGenePage: setupGenePage\n};\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(relatedArtistsTemplate, \"relatedArtistsTemplate\", \"/Users/eve/development/force/src/desktop/apps/gene/client.js\");\n  reactHotLoader.register(onStateChange, \"onStateChange\", \"/Users/eve/development/force/src/desktop/apps/gene/client.js\");\n  reactHotLoader.register(setupGenePage, \"setupGenePage\", \"/Users/eve/development/force/src/desktop/apps/gene/client.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/eve/development/force/src/desktop/apps/gene/client.js\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/eve/development/force/src/desktop/apps/gene/client.js"],"names":["$","imagesLoaded","makeJQueryPlugin","qs","data","sd","React","ReactDOM","Contents","ContextProvider","Gene","CurrentUser","Following","FollowButton","ShareView","RelatedGenesView","blurb","relatedArtistsTemplate","args","require","onStateChange","filters","sort","mode","params","fragment","stringify","window","history","replaceState","GENE","toPageTitle","setupGenePage","urlParams","parse","location","search","replace","MODE","options","Object","assign","geneID","id","user","orNull","render","toJSON","document","getElementById","gene","relatedArtists","on","artists","html","models","addClass","fetchArtists","following","kind","el","modelName","model","context_page","syncFollows","limit"],"mappings":"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","sourcesContent":["import $ from 'jquery'\n\nimport imagesLoaded from 'imagesloaded'\nimagesLoaded.makeJQueryPlugin($)\n\nimport qs from 'querystring'\nimport { data as sd } from 'sharify'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Contents } from 'reaction/Components/Gene'\nimport { ContextProvider } from 'reaction/Artsy'\n\nimport Gene from '../../models/gene.coffee'\nimport CurrentUser from '../../models/current_user.coffee'\nimport {\n  Following,\n  FollowButton,\n} from '../../components/follow_button/index.coffee'\nimport ShareView from '../../components/share/view.coffee'\nimport RelatedGenesView from '../../components/related_links/types/gene_genes.coffee'\nimport blurb from '../../components/gradient_blurb/index.coffee'\n\nconst relatedArtistsTemplate = args => {\n  return require('./templates/related_artists.jade')(args)\n}\n\n// Update URL with current filters/mode/sort, for ease of sharing.\nconst onStateChange = ({ filters, sort, mode }) => {\n  let params\n  if (mode === 'artists') {\n    params = { mode }\n  } else {\n    params = { ...filters, sort, mode }\n  }\n  const fragment = '?' + qs.stringify(params)\n  window.history.replaceState({}, new Gene(sd.GENE).toPageTitle(), fragment)\n}\n\nfunction setupGenePage() {\n  // Pull out sort and filters from URL, if present\n  const urlParams = qs.parse(location.search.replace(/^\\?/, ''))\n  let sort, mode\n  if (urlParams.sort) {\n    sort = urlParams.sort\n    delete urlParams.sort\n  }\n  if (urlParams.mode) {\n    mode = urlParams.mode\n    delete urlParams.mode\n  } else {\n    mode = sd.MODE === 'artist' ? 'artists' : sd.MODE\n  }\n\n  const options = Object.assign(\n    {},\n    { sort },\n    { filters: { ...urlParams } },\n    { geneID: sd.GENE.id, mode }\n  )\n  const user = CurrentUser.orNull()\n  ReactDOM.render(\n    <ContextProvider user={user ? user.toJSON() : null}>\n      <Contents {...options} onStateChange={onStateChange} />\n    </ContextProvider>,\n    document.getElementById('gene-filter')\n  )\n\n  // Load related artists\n  const gene = new Gene(sd.GENE)\n  gene.relatedArtists.on('sync', artists => {\n    const html = relatedArtistsTemplate({\n      artists: artists.models,\n    })\n\n    $('.related-artists')\n      .html(html)\n      .addClass('is-fade-in')\n  })\n  gene.fetchArtists('related')\n\n  // Setup user\n  const following = user ? new Following(null, { kind: 'gene' }) : null\n  new FollowButton({\n    el: $('.follow-button'),\n    following: following,\n    modelName: 'gene',\n    model: gene,\n    context_page: 'Gene page',\n  })\n  if (following) following.syncFollows([gene.id])\n\n  // Setup share view\n  new ShareView({ el: $('.js-gene-share-buttons') })\n\n  // Setup blurb\n  blurb($('.js-gene-blurb'), { limit: 250 })\n\n  // Setup related gene view\n  new RelatedGenesView({\n    el: $('.main-layout-container .related-genes'),\n    id: gene.id,\n  })\n}\n\nexport default { setupGenePage }\n"]}]}