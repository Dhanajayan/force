{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/analytics/main_layout.js","dependencies":[{"path":"/Users/eve/development/force/src/desktop/analytics/main_layout.js","mtime":1530028054000},{"path":"/Users/eve/development/force/.babelrc","mtime":1528124541000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime/core-js/json/stringify\"));\n\nvar _sharify = require(\"sharify\");\n\nvar _volley = require(\"../../lib/volley\");\n\n//\n// Analytics for the main layout. This includes buttons in the header, footer\n// or any other actions that occur on each page.\n//\n// Track pageview\nanalytics.page({\n  path: location.pathname\n}, {\n  integrations: {\n    Marketo: false\n  }\n}); // Track pageload speed\n\nif (window.performance && window.performance.timing && _sharify.data.TRACK_PAGELOAD_PATHS) {\n  window.addEventListener('load', function () {\n    var pageType = window.sd.PAGE_TYPE || window.location.pathname.split('/')[1];\n\n    if (_sharify.data.TRACK_PAGELOAD_PATHS.split('|').includes(pageType)) {\n      window.setTimeout(function () {\n        var _window$performance$t = window.performance.timing,\n            requestStart = _window$performance$t.requestStart,\n            loadEventEnd = _window$performance$t.loadEventEnd,\n            domComplete = _window$performance$t.domComplete;\n        (0, _volley.reportLoadTimeToVolley)(requestStart, loadEventEnd, domComplete, pageType, 'desktop');\n      }, 0);\n    }\n  });\n} // Track 15 second bounce rate\n\n\nsetTimeout(function () {\n  analytics.track('Time on page', {\n    category: '15 Seconds',\n    message: _sharify.data.CURRENT_PATH\n  });\n}, 15000); // Track 30 second bounce rate\n\nsetTimeout(function () {\n  analytics.track('Time on page', {\n    category: '30 Seconds',\n    message: _sharify.data.CURRENT_PATH\n  });\n}, 30000); // Track 1 min bounce rate\n\nsetTimeout(function () {\n  analytics.track('Time on page', {\n    category: '1 Minute',\n    message: _sharify.data.CURRENT_PATH\n  });\n}, 60000); // Track 3 Minute bounce rate\n\nsetTimeout(function () {\n  analytics.track('Time on page', {\n    category: '3 Minutes',\n    message: _sharify.data.CURRENT_PATH\n  });\n}, 180000); // debug tracking calls\n\nif (_sharify.data.SHOW_ANALYTICS_CALLS) {\n  analytics.on('track', function () {\n    console.info('TRACKED: ', arguments[0], (0, _stringify.default)(arguments[1]));\n  });\n}\n\nif (_sharify.data.SHOW_ANALYTICS_CALLS) {\n  analyticsHooks.on('all', function (name, data) {\n    console.info('ANALYTICS HOOK: ', name, data);\n  });\n}",{"version":3,"sources":["src/desktop/analytics/main_layout.js"],"names":["analytics","page","path","location","pathname","integrations","Marketo","window","performance","timing","TRACK_PAGELOAD_PATHS","addEventListener","pageType","sd","PAGE_TYPE","split","includes","setTimeout","requestStart","loadEventEnd","domComplete","track","category","message","CURRENT_PATH","SHOW_ANALYTICS_CALLS","on","console","info","arguments","analyticsHooks","name","data"],"mappings":";;;;;;AAKA;;AACA;;AANA;AACA;AACA;AACA;AAKA;AACAA,UAAUC,IAAV,CACE;AAAEC,QAAMC,SAASC;AAAjB,CADF,EAEE;AAAEC,gBAAc;AAAEC,aAAS;AAAX;AAAhB,CAFF,E,CAKA;;AACA,IACEC,OAAOC,WAAP,IACAD,OAAOC,WAAP,CAAmBC,MADnB,IAEA,cAAGC,oBAHL,EAIE;AACAH,SAAOI,gBAAP,CAAwB,MAAxB,EAAgC,YAAW;AACzC,QAAMC,WACJL,OAAOM,EAAP,CAAUC,SAAV,IAAuBP,OAAOJ,QAAP,CAAgBC,QAAhB,CAAyBW,KAAzB,CAA+B,GAA/B,EAAoC,CAApC,CADzB;;AAEA,QAAI,cAAGL,oBAAH,CAAwBK,KAAxB,CAA8B,GAA9B,EAAmCC,QAAnC,CAA4CJ,QAA5C,CAAJ,EAA2D;AACzDL,aAAOU,UAAP,CAAkB,YAAW;AAAA,oCAKvBV,OAAOC,WAAP,CAAmBC,MALI;AAAA,YAEzBS,YAFyB,yBAEzBA,YAFyB;AAAA,YAGzBC,YAHyB,yBAGzBA,YAHyB;AAAA,YAIzBC,WAJyB,yBAIzBA,WAJyB;AAO3B,4CACEF,YADF,EAEEC,YAFF,EAGEC,WAHF,EAIER,QAJF,EAKE,SALF;AAOD,OAdD,EAcG,CAdH;AAeD;AACF,GApBD;AAqBD,C,CAED;;;AACAK,WAAW,YAAW;AACpBjB,YAAUqB,KAAV,CAAgB,cAAhB,EAAgC;AAC9BC,cAAU,YADoB;AAE9BC,aAAS,cAAGC;AAFkB,GAAhC;AAID,CALD,EAKG,KALH,E,CAOA;;AACAP,WAAW,YAAW;AACpBjB,YAAUqB,KAAV,CAAgB,cAAhB,EAAgC;AAC9BC,cAAU,YADoB;AAE9BC,aAAS,cAAGC;AAFkB,GAAhC;AAID,CALD,EAKG,KALH,E,CAOA;;AACAP,WAAW,YAAW;AACpBjB,YAAUqB,KAAV,CAAgB,cAAhB,EAAgC;AAC9BC,cAAU,UADoB;AAE9BC,aAAS,cAAGC;AAFkB,GAAhC;AAID,CALD,EAKG,KALH,E,CAOA;;AACAP,WAAW,YAAW;AACpBjB,YAAUqB,KAAV,CAAgB,cAAhB,EAAgC;AAC9BC,cAAU,WADoB;AAE9BC,aAAS,cAAGC;AAFkB,GAAhC;AAID,CALD,EAKG,MALH,E,CAOA;;AACA,IAAI,cAAGC,oBAAP,EAA6B;AAC3BzB,YAAU0B,EAAV,CAAa,OAAb,EAAsB,YAAW;AAC/BC,YAAQC,IAAR,CAAa,WAAb,EAA0BC,UAAU,CAAV,CAA1B,EAAwC,wBAAeA,UAAU,CAAV,CAAf,CAAxC;AACD,GAFD;AAGD;;AAED,IAAI,cAAGJ,oBAAP,EAA6B;AAC3BK,iBAAeJ,EAAf,CAAkB,KAAlB,EAAyB,UAASK,IAAT,EAAeC,IAAf,EAAqB;AAC5CL,YAAQC,IAAR,CAAa,kBAAb,EAAiCG,IAAjC,EAAuCC,IAAvC;AACD,GAFD;AAGD","file":"/Users/eve/development/force/src/desktop/analytics/main_layout.js","sourceRoot":"/Users/eve/development/force","sourcesContent":["//\n// Analytics for the main layout. This includes buttons in the header, footer\n// or any other actions that occur on each page.\n//\n\nimport { data as sd } from 'sharify'\nimport { reportLoadTimeToVolley } from 'lib/volley'\n\n// Track pageview\nanalytics.page(\n  { path: location.pathname },\n  { integrations: { Marketo: false } }\n)\n\n// Track pageload speed\nif (\n  window.performance &&\n  window.performance.timing &&\n  sd.TRACK_PAGELOAD_PATHS\n) {\n  window.addEventListener('load', function() {\n    const pageType =\n      window.sd.PAGE_TYPE || window.location.pathname.split('/')[1]\n    if (sd.TRACK_PAGELOAD_PATHS.split('|').includes(pageType)) {\n      window.setTimeout(function() {\n        const {\n          requestStart,\n          loadEventEnd,\n          domComplete,\n        } = window.performance.timing\n\n        reportLoadTimeToVolley(\n          requestStart,\n          loadEventEnd,\n          domComplete,\n          pageType,\n          'desktop'\n        )\n      }, 0)\n    }\n  })\n}\n\n// Track 15 second bounce rate\nsetTimeout(function() {\n  analytics.track('Time on page', {\n    category: '15 Seconds',\n    message: sd.CURRENT_PATH,\n  })\n}, 15000)\n\n// Track 30 second bounce rate\nsetTimeout(function() {\n  analytics.track('Time on page', {\n    category: '30 Seconds',\n    message: sd.CURRENT_PATH,\n  })\n}, 30000)\n\n// Track 1 min bounce rate\nsetTimeout(function() {\n  analytics.track('Time on page', {\n    category: '1 Minute',\n    message: sd.CURRENT_PATH,\n  })\n}, 60000)\n\n// Track 3 Minute bounce rate\nsetTimeout(function() {\n  analytics.track('Time on page', {\n    category: '3 Minutes',\n    message: sd.CURRENT_PATH,\n  })\n}, 180000)\n\n// debug tracking calls\nif (sd.SHOW_ANALYTICS_CALLS) {\n  analytics.on('track', function() {\n    console.info('TRACKED: ', arguments[0], JSON.stringify(arguments[1]))\n  })\n}\n\nif (sd.SHOW_ANALYTICS_CALLS) {\n  analyticsHooks.on('all', function(name, data) {\n    console.info('ANALYTICS HOOK: ', name, data)\n  })\n}\n"]}]}