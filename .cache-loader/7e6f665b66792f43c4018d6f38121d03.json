{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/apps/article/components/NewsArticle.tsx","dependencies":[{"path":"/Users/eve/development/force/src/desktop/apps/article/components/NewsArticle.tsx","mtime":1533652817000},{"path":"/Users/eve/development/force/.babelrc","mtime":1528124541000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NewsArticle = void 0;\n\nvar _getPrototypeOf = _interopRequireDefault(require(\"@babel/runtime/core-js/object/get-prototype-of\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _Article = require(\"@artsy/reaction/dist/Components/Publishing/Article\");\n\nvar _reactWaypoint = _interopRequireDefault(require(\"react-waypoint\"));\n\nvar NewsArticle =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inherits2.default)(NewsArticle, _Component);\n\n  function NewsArticle(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, NewsArticle);\n    _this = (0, _possibleConstructorReturn2.default)(this, (NewsArticle.__proto__ || (0, _getPrototypeOf.default)(NewsArticle)).call(this, props));\n    Object.defineProperty((0, _assertThisInitialized2.default)(_this), \"onExpand\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        var article = _this.props.article;\n\n        _this.setMetadata(article);\n\n        _this.setState({\n          isTruncated: false\n        });\n      }\n    });\n    Object.defineProperty((0, _assertThisInitialized2.default)(_this), \"setMetadata\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        var article = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n        var id = article ? article.id : 'news';\n        var path = article ? \"/news/\".concat(article.slug) : '/news';\n        document.title = article ? article.thumbnail_title : 'News';\n        window.history.replaceState({}, id, path);\n      }\n    });\n    Object.defineProperty((0, _assertThisInitialized2.default)(_this), \"onEnter\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value(_ref) {\n        var previousPosition = _ref.previousPosition,\n            currentPosition = _ref.currentPosition;\n        var _this$props = _this.props,\n            article = _this$props.article,\n            onActiveArticleChange = _this$props.onActiveArticleChange,\n            onDateChange = _this$props.onDateChange,\n            isMobile = _this$props.isMobile;\n        var isTruncated = _this.state.isTruncated;\n\n        if (currentPosition === 'inside') {\n          if (previousPosition === 'above') {\n            article.published_at && onDateChange(article.published_at);\n          }\n\n          if (!isTruncated) {\n            _this.setMetadata(article);\n          } else {\n            _this.setMetadata();\n          }\n\n          if (isMobile) {\n            onActiveArticleChange(article.id);\n          }\n        }\n      }\n    });\n    Object.defineProperty((0, _assertThisInitialized2.default)(_this), \"onLeave\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value(_ref2) {\n        var previousPosition = _ref2.previousPosition,\n            currentPosition = _ref2.currentPosition;\n        var _this$props2 = _this.props,\n            nextArticle = _this$props2.nextArticle,\n            onDateChange = _this$props2.onDateChange,\n            isMobile = _this$props2.isMobile,\n            onActiveArticleChange = _this$props2.onActiveArticleChange;\n\n        if (currentPosition === 'above' && previousPosition === 'inside') {\n          if (nextArticle) {\n            nextArticle.published_at && onDateChange(nextArticle.published_at);\n\n            if (isMobile) {\n              onActiveArticleChange(nextArticle.id);\n            }\n          }\n        }\n      }\n    });\n    _this.state = {\n      isTruncated: props.isTruncated || false,\n      bottomOffset: '200px'\n    };\n    return _this;\n  }\n\n  (0, _createClass2.default)(NewsArticle, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        bottomOffset: \"\".concat(window.innerHeight / 2, \"px\")\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          article = _props.article,\n          display = _props.display,\n          isActive = _props.isActive,\n          isMobile = _props.isMobile,\n          isTruncated = _props.isTruncated,\n          relatedArticlesForCanvas = _props.relatedArticlesForCanvas,\n          renderTime = _props.renderTime;\n      var bottomOffset = this.state.bottomOffset;\n      return _react.default.createElement(_react.Fragment, null, _react.default.createElement(_reactWaypoint.default, {\n        onEnter: function onEnter(waypointData) {\n          return _this2.onEnter(waypointData);\n        },\n        onLeave: function onLeave(waypointData) {\n          return _this2.onLeave(waypointData);\n        },\n        topOffset: \"-10px\",\n        bottomOffset: bottomOffset\n      }, _react.default.createElement(\"div\", null, _react.default.createElement(_Article.Article, {\n        article: article,\n        isTruncated: isTruncated,\n        isMobile: isMobile,\n        onExpand: this.onExpand,\n        isHovered: isMobile && isActive,\n        relatedArticlesForCanvas: relatedArticlesForCanvas,\n        display: display,\n        renderTime: renderTime\n      }))));\n    }\n  }]);\n  return NewsArticle;\n}(_react.Component);\n\nexports.NewsArticle = NewsArticle;",{"version":3,"sources":["src/desktop/apps/article/components/NewsArticle.tsx"],"names":["NewsArticle","props","article","setMetadata","setState","isTruncated","id","path","slug","document","title","thumbnail_title","window","history","replaceState","previousPosition","currentPosition","onActiveArticleChange","onDateChange","isMobile","state","published_at","nextArticle","bottomOffset","innerHeight","display","isActive","relatedArticlesForCanvas","renderTime","onEnter","waypointData","onLeave","onExpand"],"mappings":"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","file":"/Users/eve/development/force/src/desktop/apps/article/components/NewsArticle.tsx","sourceRoot":"/Users/eve/development/force","sourcesContent":["import React, { Component, Fragment } from 'react'\nimport { Article } from 'reaction/Components/Publishing/Article'\nimport Waypoint from 'react-waypoint'\nimport {\n  ArticleData,\n  DisplayData,\n  RelatedArticleCanvasData,\n} from '@artsy/reaction/dist/Components/Publishing/Typings'\n\ninterface Props {\n  article: ArticleData\n  display?: DisplayData\n  isActive: boolean\n  isMobile: boolean\n  isTruncated: boolean\n  nextArticle: ArticleData\n  onActiveArticleChange: (id: string) => void\n  onDateChange: (date: string) => void\n  relatedArticlesForCanvas?: RelatedArticleCanvasData[]\n  renderTime?: number\n}\n\ninterface State {\n  isTruncated: boolean\n  bottomOffset: string\n}\n\nexport class NewsArticle extends Component<Props, State> {\n  constructor(props) {\n    super(props)\n\n    this.state = {\n      isTruncated: props.isTruncated || false,\n      bottomOffset: '200px',\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      bottomOffset: `${window.innerHeight / 2}px`,\n    })\n  }\n\n  onExpand = () => {\n    const { article } = this.props\n    this.setMetadata(article)\n    this.setState({\n      isTruncated: false,\n    })\n  }\n\n  setMetadata = (article: any = null) => {\n    const id = article ? article.id : 'news'\n    const path = article ? `/news/${article.slug}` : '/news'\n    document.title = article ? article.thumbnail_title : 'News'\n    window.history.replaceState({}, id, path)\n  }\n\n  onEnter = ({ previousPosition, currentPosition }) => {\n    const {\n      article,\n      onActiveArticleChange,\n      onDateChange,\n      isMobile,\n    } = this.props\n    const { isTruncated } = this.state\n\n    if (currentPosition === 'inside') {\n      if (previousPosition === 'above') {\n        article.published_at && onDateChange(article.published_at)\n      }\n\n      if (!isTruncated) {\n        this.setMetadata(article)\n      } else {\n        this.setMetadata()\n      }\n\n      if (isMobile) {\n        onActiveArticleChange(article.id)\n      }\n    }\n  }\n\n  onLeave = ({ previousPosition, currentPosition }) => {\n    const {\n      nextArticle,\n      onDateChange,\n      isMobile,\n      onActiveArticleChange,\n    } = this.props\n\n    if (currentPosition === 'above' && previousPosition === 'inside') {\n      if (nextArticle) {\n        nextArticle.published_at && onDateChange(nextArticle.published_at)\n        if (isMobile) {\n          onActiveArticleChange(nextArticle.id)\n        }\n      }\n    }\n  }\n\n  render() {\n    const {\n      article,\n      display,\n      isActive,\n      isMobile,\n      isTruncated,\n      relatedArticlesForCanvas,\n      renderTime,\n    } = this.props\n    const { bottomOffset } = this.state\n\n    return (\n      <Fragment>\n        <Waypoint\n          onEnter={waypointData => this.onEnter(waypointData)}\n          onLeave={waypointData => this.onLeave(waypointData)}\n          topOffset=\"-10px\"\n          bottomOffset={bottomOffset}\n        >\n          <div>\n            <Article\n              article={article}\n              isTruncated={isTruncated}\n              isMobile={isMobile}\n              onExpand={this.onExpand}\n              isHovered={isMobile && isActive}\n              relatedArticlesForCanvas={relatedArticlesForCanvas}\n              display={display}\n              renderTime={renderTime}\n            />\n          </div>\n        </Waypoint>\n      </Fragment>\n    )\n  }\n}\n"]}]}