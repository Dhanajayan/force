{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/apps/article/components/layouts/Article.js","dependencies":[{"path":"/Users/eve/development/force/src/desktop/apps/article/components/layouts/Article.js","mtime":1533672823000},{"path":"/Users/eve/development/force/.babelrc","mtime":1528124541000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _getPrototypeOf = _interopRequireDefault(require(\"@babel/runtime/core-js/object/get-prototype-of\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _article = _interopRequireDefault(require(\"../../../../models/article.coffee\"));\n\nvar _InfiniteScrollArticle = _interopRequireDefault(require(\"../InfiniteScrollArticle\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _Publishing = require(\"@artsy/reaction/dist/Components/Publishing\");\n\nvar _editorial_signup = _interopRequireDefault(require(\"../../../../components/email/client/editorial_signup.coffee\"));\n\nvar _super_article = _interopRequireDefault(require(\"../../../../components/article/client/super_article.coffee\"));\n\nvar _FollowButton = require(\"../FollowButton.js\");\n\nvar _mediator = _interopRequireDefault(require(\"../../../../lib/mediator.coffee\"));\n\nvar _index = _interopRequireDefault(require(\"../../../../components/split_test/index.coffee\"));\n\n// FIXME: Rewire\nvar SuperArticleView = _super_article.default;\nvar EditorialSignupView = _editorial_signup.default;\n\nvar ArticleLayout =\n/*#__PURE__*/\nfunction (_React$Component) {\n  (0, _inherits2.default)(ArticleLayout, _React$Component);\n\n  function ArticleLayout(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, ArticleLayout);\n    _this = (0, _possibleConstructorReturn2.default)(this, (ArticleLayout.__proto__ || (0, _getPrototypeOf.default)(ArticleLayout)).call(this, props));\n    Object.defineProperty((0, _assertThisInitialized2.default)(_this), \"handleOpenAuthModal\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value(mode, options) {\n        _mediator.default.trigger('open:auth', (0, _extends2.default)({\n          mode: mode\n        }, options));\n      }\n    });\n    _this.state = {\n      following: (0, _FollowButton.setupFollows)() || null\n    };\n    return _this;\n  }\n\n  (0, _createClass2.default)(ArticleLayout, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      (0, _index.default)('article_infinite_scroll').view();\n      var _props = this.props,\n          article = _props.article,\n          isSuper = _props.isSuper; // TODO: Replace with relay follow\n\n      (0, _FollowButton.setupFollowButtons)(this.state.following);\n\n      if (isSuper) {\n        new SuperArticleView({\n          el: document.querySelector('body'),\n          article: new _article.default(article)\n        });\n      }\n\n      if (!isSuper && article.layout === 'standard') {\n        new EditorialSignupView({\n          el: document.querySelector('body')\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props2 = this.props,\n          article = _props2.article,\n          isExperimentInfiniteScroll = _props2.isExperimentInfiniteScroll,\n          isSuper = _props2.isSuper,\n          isMobile = _props2.isMobile,\n          renderTime = _props2.renderTime,\n          showTooltips = _props2.showTooltips,\n          _props2$templates = _props2.templates;\n      _props2$templates = _props2$templates === void 0 ? {} : _props2$templates;\n      var SuperArticleFooter = _props2$templates.SuperArticleFooter,\n          SuperArticleHeader = _props2$templates.SuperArticleHeader;\n      var hasNav = isSuper || article.seriesArticle;\n      var isStatic = isExperimentInfiniteScroll || hasNav;\n      return _react.default.createElement(\"div\", null, isSuper && _react.default.createElement(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: SuperArticleHeader\n        }\n      }), isStatic ? _react.default.createElement(_Publishing.Article, {\n        article: article,\n        display: article.display,\n        isMobile: isMobile,\n        onOpenAuthModal: this.handleOpenAuthModal,\n        relatedArticlesForPanel: article.relatedArticlesPanel,\n        relatedArticlesForCanvas: article.relatedArticlesCanvas,\n        renderTime: renderTime,\n        showTooltips: showTooltips\n      }) : _react.default.createElement(_InfiniteScrollArticle.default, {\n        article: article,\n        isMobile: isMobile,\n        onOpenAuthModal: this.handleOpenAuthModal,\n        renderTime: renderTime,\n        showTooltips: showTooltips\n      }), isSuper && _react.default.createElement(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: SuperArticleFooter\n        }\n      }));\n    }\n  }]);\n  return ArticleLayout;\n}(_react.default.Component);\n\nexports.default = ArticleLayout;\nObject.defineProperty(ArticleLayout, \"propTypes\", {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  value: {\n    article: _propTypes.default.object,\n    isMobile: _propTypes.default.bool,\n    isSuper: _propTypes.default.bool,\n    templates: _propTypes.default.object,\n    showTooltips: _propTypes.default.bool,\n    renderTime: _propTypes.default.number\n  }\n});",{"version":3,"sources":["src/desktop/apps/article/components/layouts/Article.js"],"names":["SuperArticleView","EditorialSignupView","ArticleLayout","props","mode","options","trigger","state","following","view","article","isSuper","el","document","querySelector","layout","isExperimentInfiniteScroll","isMobile","renderTime","showTooltips","templates","SuperArticleFooter","SuperArticleHeader","hasNav","seriesArticle","isStatic","__html","display","handleOpenAuthModal","relatedArticlesPanel","relatedArticlesCanvas","Component","object","bool","number"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;AACA,IAAIA,yCAAJ;AACA,IAAIC,+CAAJ;;IAEqBC,a;;;;;AACnB,yBAAYC,KAAZ,EAAmB;AAAA;;AAAA;AACjB,+IAAMA,KAAN;AADiB;AAAA;AAAA;AAAA;AAAA,aAmCG,eAACC,IAAD,EAAOC,OAAP,EAAmB;AACvC,0BAASC,OAAT,CAAiB,WAAjB;AACEF;AADF,WAEKC,OAFL;AAID;AAxCkB;AAEjB,UAAKE,KAAL,GAAa;AACXC,iBAAW,qCAAkB;AADlB,KAAb;AAFiB;AAKlB;;;;wCAUmB;AAClB,0BAAU,yBAAV,EAAqCC,IAArC;AADkB,mBAGW,KAAKN,KAHhB;AAAA,UAGVO,OAHU,UAGVA,OAHU;AAAA,UAGDC,OAHC,UAGDA,OAHC,EAIlB;;AACA,4CAAmB,KAAKJ,KAAL,CAAWC,SAA9B;;AAEA,UAAIG,OAAJ,EAAa;AACX,YAAIX,gBAAJ,CAAqB;AACnBY,cAAIC,SAASC,aAAT,CAAuB,MAAvB,CADe;AAEnBJ,mBAAS,qBAAiBA,OAAjB;AAFU,SAArB;AAID;;AACD,UAAI,CAACC,OAAD,IAAYD,QAAQK,MAAR,KAAmB,UAAnC,EAA+C;AAC7C,YAAId,mBAAJ,CAAwB;AACtBW,cAAIC,SAASC,aAAT,CAAuB,MAAvB;AADkB,SAAxB;AAGD;AACF;;;6BASQ;AAAA,oBASH,KAAKX,KATF;AAAA,UAELO,OAFK,WAELA,OAFK;AAAA,UAGLM,0BAHK,WAGLA,0BAHK;AAAA,UAILL,OAJK,WAILA,OAJK;AAAA,UAKLM,QALK,WAKLA,QALK;AAAA,UAMLC,UANK,WAMLA,UANK;AAAA,UAOLC,YAPK,WAOLA,YAPK;AAAA,sCAQLC,SARK;AAAA,yDAQmD,EARnD;AAAA,UAQQC,kBARR,qBAQQA,kBARR;AAAA,UAQ4BC,kBAR5B,qBAQ4BA,kBAR5B;AAUP,UAAMC,SAASZ,WAAWD,QAAQc,aAAlC;AACA,UAAMC,WAAWT,8BAA8BO,MAA/C;AAEA,aACE,0CACGZ,WACC;AACE,iCAAyB;AACvBe,kBAAQJ;AADe;AAD3B,QAFJ,EASGG,WACC;AACE,iBAASf,OADX;AAEE,iBAASA,QAAQiB,OAFnB;AAGE,kBAAUV,QAHZ;AAIE,yBAAiB,KAAKW,mBAJxB;AAKE,iCAAyBlB,QAAQmB,oBALnC;AAME,kCAA0BnB,QAAQoB,qBANpC;AAOE,oBAAYZ,UAPd;AAQE,sBAAcC;AARhB,QADD,GAYG;AACE,iBAAST,OADX;AAEE,kBAAUO,QAFZ;AAGE,yBAAiB,KAAKW,mBAHxB;AAIE,oBAAYV,UAJd;AAKE,sBAAcC;AALhB,QArBN,EA8BGR,WACC;AACE,iCAAyB;AACvBe,kBAAQL;AADe;AAD3B,QA/BJ,CADF;AAwCD;;;EAhGwC,eAAMU,S;;;sBAA5B7B,a;;;;SAOA;AACjBQ,aAAS,mBAAUsB,MADF;AAEjBf,cAAU,mBAAUgB,IAFH;AAGjBtB,aAAS,mBAAUsB,IAHF;AAIjBb,eAAW,mBAAUY,MAJJ;AAKjBb,kBAAc,mBAAUc,IALP;AAMjBf,gBAAY,mBAAUgB;AANL","file":"/Users/eve/development/force/src/desktop/apps/article/components/layouts/Article.js","sourceRoot":"/Users/eve/development/force","sourcesContent":["import ArticleModel from 'desktop/models/article.coffee'\nimport InfiniteScrollArticle from '../InfiniteScrollArticle'\nimport PropTypes from 'prop-types'\nimport React from 'react'\nimport { Article } from 'reaction/Components/Publishing'\nimport _EditorialSignupView from 'desktop/components/email/client/editorial_signup.coffee'\nimport _SuperArticleView from 'desktop/components/article/client/super_article.coffee'\nimport { setupFollows, setupFollowButtons } from '../FollowButton.js'\nimport mediator from 'desktop/lib/mediator.coffee'\nimport splitTest from 'desktop/components/split_test/index.coffee'\n\n// FIXME: Rewire\nlet SuperArticleView = _SuperArticleView\nlet EditorialSignupView = _EditorialSignupView\n\nexport default class ArticleLayout extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      following: setupFollows() || null,\n    }\n  }\n  static propTypes = {\n    article: PropTypes.object,\n    isMobile: PropTypes.bool,\n    isSuper: PropTypes.bool,\n    templates: PropTypes.object,\n    showTooltips: PropTypes.bool,\n    renderTime: PropTypes.number,\n  }\n\n  componentDidMount() {\n    splitTest('article_infinite_scroll').view()\n\n    const { article, isSuper } = this.props\n    // TODO: Replace with relay follow\n    setupFollowButtons(this.state.following)\n\n    if (isSuper) {\n      new SuperArticleView({\n        el: document.querySelector('body'),\n        article: new ArticleModel(article),\n      })\n    }\n    if (!isSuper && article.layout === 'standard') {\n      new EditorialSignupView({\n        el: document.querySelector('body'),\n      })\n    }\n  }\n\n  handleOpenAuthModal = (mode, options) => {\n    mediator.trigger('open:auth', {\n      mode,\n      ...options,\n    })\n  }\n\n  render() {\n    const {\n      article,\n      isExperimentInfiniteScroll,\n      isSuper,\n      isMobile,\n      renderTime,\n      showTooltips,\n      templates: { SuperArticleFooter, SuperArticleHeader } = {},\n    } = this.props\n    const hasNav = isSuper || article.seriesArticle\n    const isStatic = isExperimentInfiniteScroll || hasNav\n\n    return (\n      <div>\n        {isSuper && (\n          <div\n            dangerouslySetInnerHTML={{\n              __html: SuperArticleHeader,\n            }}\n          />\n        )}\n\n        {isStatic ? (\n          <Article\n            article={article}\n            display={article.display}\n            isMobile={isMobile}\n            onOpenAuthModal={this.handleOpenAuthModal}\n            relatedArticlesForPanel={article.relatedArticlesPanel}\n            relatedArticlesForCanvas={article.relatedArticlesCanvas}\n            renderTime={renderTime}\n            showTooltips={showTooltips}\n          />\n        ) : (\n            <InfiniteScrollArticle\n              article={article}\n              isMobile={isMobile}\n              onOpenAuthModal={this.handleOpenAuthModal}\n              renderTime={renderTime}\n              showTooltips={showTooltips}\n            />\n          )}\n\n        {isSuper && (\n          <div\n            dangerouslySetInnerHTML={{\n              __html: SuperArticleFooter,\n            }}\n          />\n        )}\n      </div>\n    )\n  }\n}\n"]}]}