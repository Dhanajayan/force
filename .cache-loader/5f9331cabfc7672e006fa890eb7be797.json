{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/analytics/recently_viewed_artworks.js","dependencies":[{"path":"/Users/eve/development/force/src/desktop/analytics/recently_viewed_artworks.js","mtime":1519227435000},{"path":"/Users/eve/development/force/.babelrc","mtime":1537178749000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  'use strict';\n\n  var alreadyTracked = false;\n\n  var isRVARailVisible = function isRVARailVisible() {\n    if ($('#recently-viewed-artworks').length < 1) {\n      return false;\n    }\n\n    var viewportTop = $(window).scrollTop();\n    var viewportBottom = viewportTop + $(window).height();\n    var rvaTop = $('#recently-viewed-artworks').offset().top;\n    var rvaHeight = $('#recently-viewed-artworks').height();\n    return viewportBottom > rvaTop + rvaHeight;\n  };\n\n  var RVAArtworkIds = function RVAArtworkIds() {\n    return $('#recently-viewed-artworks .artwork-item').map(function () {\n      return $(this).attr('data-artwork-id');\n    }).toArray();\n  };\n\n  var trackImpressions = function trackImpressions() {\n    if (!alreadyTracked && isRVARailVisible()) {\n      var ids = RVAArtworkIds();\n\n      if (ids.length > 0) {\n        analytics.track('Impression', {\n          type: 'module',\n          label: 'Recently viewed artworks',\n          artwork_ids: ids\n        });\n        alreadyTracked = true;\n      }\n    }\n  };\n\n  $(window).on('scroll', _.throttle(trackImpressions, 200));\n  $(document).on('click', '.analytics-rva-artwork-thumbnail', function (e) {\n    analytics.track('Click', {\n      type: 'thumbnail',\n      label: 'Recently viewed artwork',\n      context_module: 'recently_viewed_artworks',\n      destination_path: $(this).attr('href')\n    });\n  });\n})();",{"version":3,"sources":["/Users/eve/development/force/src/desktop/analytics/recently_viewed_artworks.js"],"names":["alreadyTracked","isRVARailVisible","$","length","viewportTop","window","scrollTop","viewportBottom","height","rvaTop","offset","top","rvaHeight","RVAArtworkIds","map","attr","toArray","trackImpressions","ids","analytics","track","type","label","artwork_ids","on","_","throttle","document","e","context_module","destination_path"],"mappings":"AAAA,CAAC,YAAY;AACX;;AAEA,MAAIA,cAAc,GAAG,KAArB;;AAEA,MAAIC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAY;AACjC,QAAGC,CAAC,CAAC,2BAAD,CAAD,CAA+BC,MAA/B,GAAwC,CAA3C,EAA6C;AAAE,aAAO,KAAP;AAAe;;AAC9D,QAAIC,WAAW,GAAGF,CAAC,CAACG,MAAD,CAAD,CAAUC,SAAV,EAAlB;AACA,QAAIC,cAAc,GAAGH,WAAW,GAAGF,CAAC,CAACG,MAAD,CAAD,CAAUG,MAAV,EAAnC;AACA,QAAIC,MAAM,GAAGP,CAAC,CAAC,2BAAD,CAAD,CAA+BQ,MAA/B,GAAwCC,GAArD;AACA,QAAIC,SAAS,GAAGV,CAAC,CAAC,2BAAD,CAAD,CAA+BM,MAA/B,EAAhB;AACA,WAAOD,cAAc,GAAIE,MAAM,GAAGG,SAAlC;AACD,GAPD;;AASA,MAAIC,aAAa,GAAG,SAAhBA,aAAgB,GAAY;AAC9B,WAAOX,CAAC,CAAC,yCAAD,CAAD,CAA6CY,GAA7C,CAAiD,YAAY;AAClE,aAAOZ,CAAC,CAAC,IAAD,CAAD,CAAQa,IAAR,CAAa,iBAAb,CAAP;AACD,KAFM,EAEJC,OAFI,EAAP;AAGD,GAJD;;AAMA,MAAIC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAY;AACjC,QAAI,CAACjB,cAAD,IAAmBC,gBAAgB,EAAvC,EAA2C;AACzC,UAAIiB,GAAG,GAAGL,aAAa,EAAvB;;AACA,UAAIK,GAAG,CAACf,MAAJ,GAAa,CAAjB,EAAoB;AAClBgB,QAAAA,SAAS,CAACC,KAAV,CAAgB,YAAhB,EAA8B;AAC5BC,UAAAA,IAAI,EAAE,QADsB;AAE5BC,UAAAA,KAAK,EAAE,0BAFqB;AAG5BC,UAAAA,WAAW,EAAEL;AAHe,SAA9B;AAKAlB,QAAAA,cAAc,GAAG,IAAjB;AACD;AACF;AACF,GAZD;;AAcAE,EAAAA,CAAC,CAACG,MAAD,CAAD,CAAUmB,EAAV,CAAa,QAAb,EAAuBC,CAAC,CAACC,QAAF,CAAWT,gBAAX,EAA6B,GAA7B,CAAvB;AAEAf,EAAAA,CAAC,CAACyB,QAAD,CAAD,CAAYH,EAAZ,CAAe,OAAf,EAAwB,kCAAxB,EAA4D,UAAUI,CAAV,EAAa;AACvET,IAAAA,SAAS,CAACC,KAAV,CAAgB,OAAhB,EAAyB;AACvBC,MAAAA,IAAI,EAAE,WADiB;AAEvBC,MAAAA,KAAK,EAAE,yBAFgB;AAGvBO,MAAAA,cAAc,EAAE,0BAHO;AAIvBC,MAAAA,gBAAgB,EAAE5B,CAAC,CAAC,IAAD,CAAD,CAAQa,IAAR,CAAa,MAAb;AAJK,KAAzB;AAMD,GAPD;AAQD,CA5CD","sourcesContent":["(function () {\n  'use strict'\n\n  var alreadyTracked = false\n\n  var isRVARailVisible = function () {\n    if($('#recently-viewed-artworks').length < 1){ return false; }\n    var viewportTop = $(window).scrollTop()\n    var viewportBottom = viewportTop + $(window).height()\n    var rvaTop = $('#recently-viewed-artworks').offset().top\n    var rvaHeight = $('#recently-viewed-artworks').height()\n    return viewportBottom > (rvaTop + rvaHeight)\n  }\n\n  var RVAArtworkIds = function () {\n    return $('#recently-viewed-artworks .artwork-item').map(function () {\n      return $(this).attr('data-artwork-id')\n    }).toArray()\n  }\n\n  var trackImpressions = function () {\n    if (!alreadyTracked && isRVARailVisible()) {\n      var ids = RVAArtworkIds()\n      if (ids.length > 0) {\n        analytics.track('Impression', {\n          type: 'module',\n          label: 'Recently viewed artworks',\n          artwork_ids: ids\n        })\n        alreadyTracked = true\n      }\n    }\n  }\n\n  $(window).on('scroll', _.throttle(trackImpressions, 200))\n\n  $(document).on('click', '.analytics-rva-artwork-thumbnail', function (e) {\n    analytics.track('Click', {\n      type: 'thumbnail',\n      label: 'Recently viewed artwork',\n      context_module: 'recently_viewed_artworks',\n      destination_path: $(this).attr('href')\n    })\n  })\n})()\n"]}]}