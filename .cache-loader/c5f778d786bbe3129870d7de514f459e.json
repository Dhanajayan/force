{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/analytics/criteo.js","dependencies":[{"path":"/Users/eve/development/force/src/desktop/analytics/criteo.js","mtime":1519227435000},{"path":"/Users/eve/development/force/.babelrc","mtime":1528124541000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["//\n// Criteo tracking for auctions product feed and artworks product feed\n//\nwindow.criteo_q = window.criteo_q || [];\nvar pathSplit = location.pathname.split('/');\n\nvar userEmail = function () {\n  return sd.CURRENT_USER ? [sd.CURRENT_USER.email] : [];\n}();\n\nif (pathSplit[1] === 'auctions') {\n  // http://www.artsy.net/auctions - (AUCTIONS viewHome)\n  //              0          1\n  window.criteo_q.push({\n    event: 'setAccount',\n    account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER\n  }, {\n    event: 'setSiteType',\n    type: 'd'\n  }, {\n    event: 'viewHome'\n  });\n} else if (pathSplit[1] === 'auction') {\n  if (!pathSplit[3]) {\n    // https://www.artsy.net/auction/:auction_id - (AUCTIONS viewList)\n    //              0          1          2\n    analyticsHooks.on('auction:artworks:loaded', function (artworks) {\n      window.criteo_q.push({\n        event: 'setAccount',\n        account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER\n      }, {\n        event: 'setSiteType',\n        type: 'd'\n      }, {\n        event: 'viewList',\n        item: artworks\n      });\n    });\n  } else if (pathSplit[3] === 'bid') {\n    // https://www.artsy.net/auction/:auction_id/bid - (AUCTIONS trackTransaction)\n    //              0          1          2       3\n    analyticsHooks.on('confirm:bid:form:success', function (data) {\n      var price = data.max_bid_amount_cents ? data.max_bid_amount_cents / 100 : null;\n      window.criteo_q.push({\n        event: 'setAccount',\n        account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER\n      }, {\n        event: 'setSiteType',\n        type: 'd'\n      }, {\n        event: 'trackTransaction',\n        id: data.bidder_position_id,\n        item: [{\n          id: sd.SALE_ARTWORK.artwork._id,\n          price: price,\n          quantity: 1\n        }]\n      });\n    });\n  }\n} else if (pathSplit[1] === 'artwork' && !pathSplit[3]) {\n  // https://www.artsy.net/artwork/:artwork_id - (AUCTIONS & ARTWORKS viewItem)\n  //              0          1          2\n  //\n  // We cannot send both ids on product pages, so, send the Auctions account ID\n  // if the artwork is in an auction, otherwise send the Artworks account ID.\n  if (sd.AUCTION && sd.AUCTION.artwork_id) {\n    window.criteo_q.push({\n      event: \"setAccount\",\n      account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER\n    }, {\n      event: \"setSiteType\",\n      type: \"m\"\n    }, {\n      event: \"viewItem\",\n      item: sd.AUCTION && sd.AUCTION.artwork_id\n    });\n  } else {\n    window.criteo_q.push({\n      event: 'setAccount',\n      account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER\n    }, {\n      event: 'setSiteType',\n      type: 'd'\n    }, {\n      event: 'setEmail',\n      email: userEmail\n    }, {\n      event: 'viewItem',\n      item: sd.COMMERCIAL.artwork._id\n    });\n  } // ARTWORKS viewBasket\n\n\n  analyticsHooks.on('inquiry_questionnaire:modal:opened', function (data) {\n    window.criteo_q.push({\n      event: 'setAccount',\n      account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER\n    }, {\n      event: 'setSiteType',\n      type: 'd'\n    }, {\n      event: 'setEmail',\n      email: userEmail\n    }, {\n      event: 'viewBasket',\n      item: [{\n        id: sd.COMMERCIAL.artwork._id,\n        price: sd.COMMERCIAL.artwork.price,\n        quantity: 1\n      }]\n    });\n  }); // ARTWORKS trackTransaction\n\n  analyticsHooks.on('inquiry_questionnaire:inquiry:sync', function (data) {\n    window.criteo_q.push({\n      event: 'setAccount',\n      account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER\n    }, {\n      event: 'setSiteType',\n      type: 'd'\n    }, {\n      event: 'setEmail',\n      email: userEmail\n    }, {\n      event: 'trackTransaction',\n      id: data.inquiry.id,\n      item: [{\n        id: sd.COMMERCIAL.artwork._id,\n        price: sd.COMMERCIAL.artwork.price,\n        quantity: 1\n      }]\n    });\n  });\n} else {\n  if (pathSplit[1] === 'collect') {\n    // https://www.artsy.net/collect - (ARTWORKS viewHome)\n    //              0          1\n    window.criteo_q.push({\n      event: 'setAccount',\n      account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER\n    }, {\n      event: 'setSiteType',\n      type: 'd'\n    }, {\n      event: 'setEmail',\n      email: userEmail\n    }, {\n      event: 'viewHome'\n    });\n  }\n}",{"version":3,"sources":["src/desktop/analytics/criteo.js"],"names":["window","criteo_q","pathSplit","location","pathname","split","userEmail","sd","CURRENT_USER","email","push","event","account","CRITEO_AUCTIONS_ACCOUNT_NUMBER","type","analyticsHooks","on","artworks","item","data","price","max_bid_amount_cents","id","bidder_position_id","SALE_ARTWORK","artwork","_id","quantity","AUCTION","artwork_id","CRITEO_ARTWORKS_ACCOUNT_NUMBER","COMMERCIAL","inquiry"],"mappings":"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","file":"/Users/eve/development/force/src/desktop/analytics/criteo.js","sourceRoot":"/Users/eve/development/force","sourcesContent":["//\n// Criteo tracking for auctions product feed and artworks product feed\n//\nwindow.criteo_q = window.criteo_q || []\nvar pathSplit = location.pathname.split('/')\nvar userEmail = function() {\n  return sd.CURRENT_USER ? [sd.CURRENT_USER.email] : [];\n}()\nif (pathSplit[1] === 'auctions') {\n  // http://www.artsy.net/auctions - (AUCTIONS viewHome)\n  //              0          1\n  window.criteo_q.push(\n    { event: 'setAccount', account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER },\n    { event: 'setSiteType', type: 'd' },\n    { event: 'viewHome' }\n  )\n} else if (pathSplit[1] === 'auction') {\n  if (!pathSplit[3]) {\n    // https://www.artsy.net/auction/:auction_id - (AUCTIONS viewList)\n    //              0          1          2\n    analyticsHooks.on('auction:artworks:loaded', function(artworks) {\n      window.criteo_q.push(\n        { event: 'setAccount', account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER },\n        { event: 'setSiteType', type: 'd' },\n        { event: 'viewList', item: artworks }\n      )\n    })\n  } else if (pathSplit[3] === 'bid') {\n    // https://www.artsy.net/auction/:auction_id/bid - (AUCTIONS trackTransaction)\n    //              0          1          2       3\n    analyticsHooks.on('confirm:bid:form:success', function(data) {\n      const price = data.max_bid_amount_cents ? data.max_bid_amount_cents / 100 : null\n      window.criteo_q.push(\n        { event: 'setAccount', account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER },\n        { event: 'setSiteType', type: 'd' },\n        {\n          event: 'trackTransaction',\n          id: data.bidder_position_id,\n          item: [\n            {\n              id: sd.SALE_ARTWORK.artwork._id,\n              price: price,\n              quantity: 1\n            }\n          ]\n        }\n      )\n    })\n  }\n} else if (pathSplit[1] === 'artwork' && !pathSplit[3]) {\n  // https://www.artsy.net/artwork/:artwork_id - (AUCTIONS & ARTWORKS viewItem)\n  //              0          1          2\n  //\n  // We cannot send both ids on product pages, so, send the Auctions account ID\n  // if the artwork is in an auction, otherwise send the Artworks account ID.\n  if (sd.AUCTION && sd.AUCTION.artwork_id) {\n    window.criteo_q.push(\n      { event: \"setAccount\", account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER },\n      { event: \"setSiteType\", type: \"m\" },\n      { event: \"viewItem\", item: sd.AUCTION && sd.AUCTION.artwork_id }\n    )\n  } else {\n    window.criteo_q.push(\n      { event: 'setAccount', account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER },\n      { event: 'setSiteType', type: 'd' },\n      { event: 'setEmail', email: userEmail },\n      { event: 'viewItem', item: sd.COMMERCIAL.artwork._id }\n    )\n  }\n  // ARTWORKS viewBasket\n  analyticsHooks.on('inquiry_questionnaire:modal:opened', function(data) {\n    window.criteo_q.push(\n      { event: 'setAccount', account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER },\n      { event: 'setSiteType', type: 'd' },\n      { event: 'setEmail', email: userEmail },\n      {\n        event: 'viewBasket',\n        item: [\n          {\n            id: sd.COMMERCIAL.artwork._id,\n            price: sd.COMMERCIAL.artwork.price,\n            quantity: 1\n          }\n        ]\n      }\n    )\n  })\n  // ARTWORKS trackTransaction\n  analyticsHooks.on('inquiry_questionnaire:inquiry:sync', function(data) {\n    window.criteo_q.push(\n      { event: 'setAccount', account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER },\n      { event: 'setSiteType', type: 'd' },\n      { event: 'setEmail', email: userEmail },\n      {\n        event: 'trackTransaction',\n        id: data.inquiry.id,\n        item: [\n          {\n            id: sd.COMMERCIAL.artwork._id,\n            price: sd.COMMERCIAL.artwork.price,\n            quantity: 1\n          }\n        ]\n      }\n    )\n  })\n} else {\n  if (pathSplit[1] === 'collect') {\n    // https://www.artsy.net/collect - (ARTWORKS viewHome)\n    //              0          1\n    window.criteo_q.push(\n      { event: 'setAccount', account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER },\n      { event: 'setSiteType', type: 'd' },\n      { event: 'setEmail', email: userEmail },\n      { event: 'viewHome' }\n    )\n  }\n}\n"]}]}