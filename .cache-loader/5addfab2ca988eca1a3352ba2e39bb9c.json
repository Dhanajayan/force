{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/apps/auction/reducers/artworkBrowser.js","dependencies":[{"path":"/Users/eve/development/force/src/desktop/apps/auction/reducers/artworkBrowser.js","mtime":1519227436000},{"path":"/Users/eve/development/force/.babelrc","mtime":1528124541000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = auctionArtworkFilter;\nexports.initialState = void 0;\n\nvar actions = _interopRequireWildcard(require(\"../actions/artworkBrowser\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash.get\"));\n\nvar _updeep = _interopRequireDefault(require(\"updeep\"));\n\nvar _underscore = require(\"underscore\");\n\nvar _sharify = require(\"sharify\");\n\nvar initialState = {\n  aggregatedArtists: [],\n  aggregatedMediums: [],\n  allFetched: false,\n  showFollowedArtistsRail: false,\n  filterParams: {\n    aggregations: ['ARTIST', 'FOLLOWED_ARTISTS', 'MEDIUM', 'TOTAL'],\n    artist_ids: [],\n    estimate_range: '',\n    gene_ids: [],\n    include_artworks_by_followed_artists: false,\n    page: 1,\n    sale_id: (0, _lodash.default)(_sharify.data, 'AUCTION.id', ''),\n    size: 20,\n    ranges: {\n      estimate_range: {\n        min: 0,\n        max: 50000\n      }\n    },\n    sort: 'position'\n  },\n  followedArtistRailMax: 50,\n  followedArtistRailPage: 1,\n  followedArtistRailSize: 4,\n  initialMediumMap: [],\n  isClosed: (0, _lodash.default)(_sharify.data, 'AUCTION.is_closed', false),\n  isFetchingArtworks: false,\n  isLastFollowedArtistsPage: false,\n  isListView: false,\n  maxEstimateRangeDisplay: 50000,\n  minEstimateRangeDisplay: 0,\n  numArtistsYouFollow: 0,\n  requestID: (0, _lodash.default)(_sharify.data, 'REQUEST_ID', undefined),\n  saleArtworks: [],\n  saleArtworksByFollowedArtists: [],\n  saleArtworksByFollowedArtistsTotal: 0,\n  sortMap: {\n    'position': 'Lot Number Asc',\n    '-position': 'Lot Number Desc',\n    '-bidder_positions_count': 'Most Bids',\n    'bidder_positions_count': 'Least Bids',\n    '-searchable_estimate': 'Most Expensive',\n    'searchable_estimate': 'Least Expensive'\n  },\n  symbol: (0, _lodash.default)(_sharify.data, 'AUCTION.symbol', '$'),\n  total: 0,\n  user: (0, _lodash.default)(_sharify.data, 'CURRENT_USER', undefined)\n};\nexports.initialState = initialState;\n\nfunction auctionArtworkFilter() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case actions.GET_ARTWORKS_FAILURE:\n      {\n        return (0, _updeep.default)({\n          isFetchingArtworks: false\n        }, state);\n      }\n\n    case actions.GET_ARTWORKS_REQUEST:\n      {\n        return (0, _updeep.default)({\n          isFetchingArtworks: true\n        }, state);\n      }\n\n    case actions.GET_ARTWORKS_SUCCESS:\n      {\n        return (0, _updeep.default)({\n          isFetchingArtworks: false\n        }, state);\n      }\n\n    case actions.TOGGLE_LIST_VIEW:\n      {\n        return (0, _updeep.default)({\n          isListView: action.payload.isListView\n        }, state);\n      }\n\n    case actions.UPDATE_AGGREGATED_ARTISTS:\n      {\n        return (0, _updeep.default)({\n          aggregatedArtists: action.payload.aggregatedArtists\n        }, state);\n      }\n\n    case actions.UPDATE_AGGREGATED_MEDIUMS:\n      {\n        return (0, _updeep.default)({\n          aggregatedMediums: action.payload.aggregatedMediums\n        }, state);\n      }\n\n    case actions.UPDATE_ALL_FETCHED:\n      {\n        if (state.saleArtworks.length === state.total) {\n          return (0, _updeep.default)({\n            allFetched: true\n          }, state);\n        } else {\n          return (0, _updeep.default)({\n            allFetched: false\n          }, state);\n        }\n      }\n\n    case actions.UPDATE_ARTIST_ID:\n      {\n        var artistId = action.payload.artistId;\n\n        if (artistId === 'artists-all') {\n          return (0, _updeep.default)({\n            filterParams: {\n              artist_ids: [],\n              include_artworks_by_followed_artists: false\n            }\n          }, state);\n        } else if (artistId === 'artists-you-follow') {\n          var newState = !state.filterParams.include_artworks_by_followed_artists;\n          return (0, _updeep.default)({\n            filterParams: {\n              artist_ids: [],\n              include_artworks_by_followed_artists: newState\n            }\n          }, state);\n        } else if ((0, _underscore.contains)(state.filterParams.artist_ids, artistId)) {\n          return (0, _updeep.default)({\n            filterParams: {\n              artist_ids: _updeep.default.reject(function (aa) {\n                return aa === artistId;\n              }),\n              include_artworks_by_followed_artists: false\n            }\n          }, state);\n        } else {\n          return (0, _updeep.default)({\n            filterParams: {\n              artist_ids: state.filterParams.artist_ids.concat(artistId),\n              include_artworks_by_followed_artists: false\n            }\n          }, state);\n        }\n      }\n\n    case actions.SHOW_FOLLOWED_ARTISTS_RAIL:\n      {\n        return (0, _updeep.default)({\n          showFollowedArtistsRail: true\n        }, state);\n      }\n\n    case actions.UPDATE_ESTIMATE_DISPLAY:\n      {\n        return (0, _updeep.default)({\n          minEstimateRangeDisplay: action.payload.min,\n          maxEstimateRangeDisplay: action.payload.max\n        }, state);\n      }\n\n    case actions.UPDATE_ESTIMATE_RANGE:\n      {\n        var maxRange;\n\n        if (action.payload.max === state.filterParams.ranges.estimate_range.max) {\n          maxRange = '*';\n        } else {\n          maxRange = action.payload.max * 100;\n        }\n\n        return (0, _updeep.default)({\n          filterParams: {\n            estimate_range: \"\".concat(action.payload.min * 100, \"-\").concat(maxRange)\n          }\n        }, state);\n      }\n\n    case actions.UPDATE_INITIAL_MEDIUM_MAP:\n      {\n        if (state.initialMediumMap.length === 0) {\n          return (0, _updeep.default)({\n            initialMediumMap: action.payload.initialMediumMap\n          }, state);\n        } else {\n          return state;\n        }\n      }\n\n    case actions.UPDATE_MEDIUM_ID:\n      {\n        var mediumId = action.payload.mediumId;\n\n        if (mediumId === 'mediums-all') {\n          return (0, _updeep.default)({\n            filterParams: {\n              gene_ids: []\n            }\n          }, state);\n        } else if ((0, _underscore.contains)(state.filterParams.gene_ids, mediumId)) {\n          return (0, _updeep.default)({\n            filterParams: {\n              gene_ids: _updeep.default.reject(function (mm) {\n                return mm === mediumId;\n              })\n            }\n          }, state);\n        } else {\n          return (0, _updeep.default)({\n            filterParams: {\n              gene_ids: state.filterParams.gene_ids.concat(mediumId)\n            }\n          }, state);\n        }\n      }\n\n    case actions.UPDATE_NUM_ARTISTS_YOU_FOLLOW:\n      {\n        return (0, _updeep.default)({\n          numArtistsYouFollow: action.payload.numArtistsYouFollow\n        }, state);\n      }\n\n    case actions.UPDATE_PAGE:\n      {\n        var reset = action.payload.reset;\n\n        if (reset === true) {\n          return (0, _updeep.default)({\n            filterParams: {\n              page: 1\n            }\n          }, state);\n        } else {\n          var currentPage = state.filterParams.page;\n          return (0, _updeep.default)({\n            filterParams: {\n              page: currentPage + 1\n            }\n          }, state);\n        }\n      }\n\n    case actions.UPDATE_SALE_ARTWORKS:\n      {\n        if (state.filterParams.page > 1) {\n          return (0, _updeep.default)({\n            saleArtworks: state.saleArtworks.concat(action.payload.saleArtworks)\n          }, state);\n        } else {\n          return (0, _updeep.default)({\n            saleArtworks: action.payload.saleArtworks\n          }, state);\n        }\n      }\n\n    case actions.UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS:\n      {\n        return (0, _updeep.default)({\n          saleArtworksByFollowedArtists: action.payload.saleArtworks\n        }, state);\n      }\n\n    case actions.UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS_TOTAL:\n      {\n        return (0, _updeep.default)({\n          saleArtworksByFollowedArtistsTotal: action.payload.total\n        }, state);\n      }\n\n    case actions.UPDATE_SORT:\n      {\n        return (0, _updeep.default)({\n          filterParams: {\n            sort: action.payload.sort\n          }\n        }, state);\n      }\n\n    case actions.UPDATE_TOTAL:\n      {\n        return (0, _updeep.default)({\n          total: action.payload.total\n        }, state);\n      }\n\n    default:\n      return state;\n  }\n}",{"version":3,"sources":["src/desktop/apps/auction/reducers/artworkBrowser.js"],"names":["initialState","aggregatedArtists","aggregatedMediums","allFetched","showFollowedArtistsRail","filterParams","aggregations","artist_ids","estimate_range","gene_ids","include_artworks_by_followed_artists","page","sale_id","size","ranges","min","max","sort","followedArtistRailMax","followedArtistRailPage","followedArtistRailSize","initialMediumMap","isClosed","isFetchingArtworks","isLastFollowedArtistsPage","isListView","maxEstimateRangeDisplay","minEstimateRangeDisplay","numArtistsYouFollow","requestID","undefined","saleArtworks","saleArtworksByFollowedArtists","saleArtworksByFollowedArtistsTotal","sortMap","symbol","total","user","auctionArtworkFilter","state","action","type","actions","GET_ARTWORKS_FAILURE","GET_ARTWORKS_REQUEST","GET_ARTWORKS_SUCCESS","TOGGLE_LIST_VIEW","payload","UPDATE_AGGREGATED_ARTISTS","UPDATE_AGGREGATED_MEDIUMS","UPDATE_ALL_FETCHED","length","UPDATE_ARTIST_ID","artistId","newState","reject","aa","concat","SHOW_FOLLOWED_ARTISTS_RAIL","UPDATE_ESTIMATE_DISPLAY","UPDATE_ESTIMATE_RANGE","maxRange","UPDATE_INITIAL_MEDIUM_MAP","UPDATE_MEDIUM_ID","mediumId","mm","UPDATE_NUM_ARTISTS_YOU_FOLLOW","UPDATE_PAGE","reset","currentPage","UPDATE_SALE_ARTWORKS","UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS","UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS_TOTAL","UPDATE_SORT","UPDATE_TOTAL"],"mappings":"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","file":"/Users/eve/development/force/src/desktop/apps/auction/reducers/artworkBrowser.js","sourceRoot":"/Users/eve/development/force","sourcesContent":["import * as actions from 'desktop/apps/auction/actions/artworkBrowser'\nimport get from 'lodash.get'\nimport u from 'updeep'\nimport { contains } from 'underscore'\nimport { data as sd } from 'sharify'\n\nexport const initialState = {\n  aggregatedArtists: [],\n  aggregatedMediums: [],\n  allFetched: false,\n  showFollowedArtistsRail: false,\n  filterParams: {\n    aggregations: ['ARTIST', 'FOLLOWED_ARTISTS', 'MEDIUM', 'TOTAL'],\n    artist_ids: [],\n    estimate_range: '',\n    gene_ids: [],\n    include_artworks_by_followed_artists: false,\n    page: 1,\n    sale_id: get(sd, 'AUCTION.id', ''),\n    size: 20,\n    ranges: {\n      estimate_range: {\n        min: 0,\n        max: 50000\n      }\n    },\n    sort: 'position'\n  },\n  followedArtistRailMax: 50,\n  followedArtistRailPage: 1,\n  followedArtistRailSize: 4,\n  initialMediumMap: [],\n  isClosed: get(sd, 'AUCTION.is_closed', false),\n  isFetchingArtworks: false,\n  isLastFollowedArtistsPage: false,\n  isListView: false,\n  maxEstimateRangeDisplay: 50000,\n  minEstimateRangeDisplay: 0,\n  numArtistsYouFollow: 0,\n  requestID: get(sd, 'REQUEST_ID', undefined),\n  saleArtworks: [],\n  saleArtworksByFollowedArtists: [],\n  saleArtworksByFollowedArtistsTotal: 0,\n  sortMap: {\n    'position': 'Lot Number Asc',\n    '-position': 'Lot Number Desc',\n    '-bidder_positions_count': 'Most Bids',\n    'bidder_positions_count': 'Least Bids',\n    '-searchable_estimate': 'Most Expensive',\n    'searchable_estimate': 'Least Expensive'\n  },\n  symbol: get(sd, 'AUCTION.symbol', '$'),\n  total: 0,\n  user: get(sd, 'CURRENT_USER', undefined)\n}\n\nexport default function auctionArtworkFilter (state = initialState, action) {\n  switch (action.type) {\n    case actions.GET_ARTWORKS_FAILURE: {\n      return u({\n        isFetchingArtworks: false\n      }, state)\n    }\n    case actions.GET_ARTWORKS_REQUEST: {\n      return u({\n        isFetchingArtworks: true\n      }, state)\n    }\n    case actions.GET_ARTWORKS_SUCCESS: {\n      return u({\n        isFetchingArtworks: false\n      }, state)\n    }\n    case actions.TOGGLE_LIST_VIEW: {\n      return u({\n        isListView: action.payload.isListView\n      }, state)\n    }\n    case actions.UPDATE_AGGREGATED_ARTISTS: {\n      return u({\n        aggregatedArtists: action.payload.aggregatedArtists\n      }, state)\n    }\n    case actions.UPDATE_AGGREGATED_MEDIUMS: {\n      return u({\n        aggregatedMediums: action.payload.aggregatedMediums\n      }, state)\n    }\n    case actions.UPDATE_ALL_FETCHED: {\n      if (state.saleArtworks.length === state.total) {\n        return u({\n          allFetched: true\n        }, state)\n      } else {\n        return u({\n          allFetched: false\n        }, state)\n      }\n    }\n    case actions.UPDATE_ARTIST_ID: {\n      const artistId = action.payload.artistId\n      if (artistId === 'artists-all') {\n        return u({\n          filterParams: {\n            artist_ids: [],\n            include_artworks_by_followed_artists: false\n          }\n        }, state)\n      } else if (artistId === 'artists-you-follow') {\n        const newState = !state.filterParams.include_artworks_by_followed_artists\n        return u({\n          filterParams: {\n            artist_ids: [],\n            include_artworks_by_followed_artists: newState\n          }\n        }, state)\n      } else if (contains(state.filterParams.artist_ids, artistId)) {\n        return u({\n          filterParams: {\n            artist_ids: u.reject((aa) => aa === artistId),\n            include_artworks_by_followed_artists: false\n          }\n        }, state)\n      } else {\n        return u({\n          filterParams: {\n            artist_ids: state.filterParams.artist_ids.concat(artistId),\n            include_artworks_by_followed_artists: false\n          }\n        }, state)\n      }\n    }\n    case actions.SHOW_FOLLOWED_ARTISTS_RAIL: {\n      return u({\n        showFollowedArtistsRail: true\n      }, state)\n    }\n    case actions.UPDATE_ESTIMATE_DISPLAY: {\n      return u({\n        minEstimateRangeDisplay: action.payload.min,\n        maxEstimateRangeDisplay: action.payload.max\n      }, state)\n    }\n    case actions.UPDATE_ESTIMATE_RANGE: {\n      let maxRange\n      if (action.payload.max === state.filterParams.ranges.estimate_range.max) {\n        maxRange = '*'\n      } else {\n        maxRange = action.payload.max * 100\n      }\n      return u({\n        filterParams: {\n          estimate_range: `${action.payload.min * 100}-${maxRange}`\n        }\n      }, state)\n    }\n    case actions.UPDATE_INITIAL_MEDIUM_MAP: {\n      if (state.initialMediumMap.length === 0) {\n        return u({\n          initialMediumMap: action.payload.initialMediumMap\n        }, state)\n      } else {\n        return state\n      }\n    }\n    case actions.UPDATE_MEDIUM_ID: {\n      const mediumId = action.payload.mediumId\n      if (mediumId === 'mediums-all') {\n        return u({\n          filterParams: {\n            gene_ids: []\n          }\n        }, state)\n      } else if (contains(state.filterParams.gene_ids, mediumId)) {\n        return u({\n          filterParams: {\n            gene_ids: u.reject((mm) => mm === mediumId)\n          }\n        }, state)\n      } else {\n        return u({\n          filterParams: {\n            gene_ids: state.filterParams.gene_ids.concat(mediumId)\n          }\n        }, state)\n      }\n    }\n    case actions.UPDATE_NUM_ARTISTS_YOU_FOLLOW: {\n      return u({\n        numArtistsYouFollow: action.payload.numArtistsYouFollow\n      }, state)\n    }\n    case actions.UPDATE_PAGE: {\n      const reset = action.payload.reset\n      if (reset === true) {\n        return u({\n          filterParams: {\n            page: 1\n          }\n        }, state)\n      } else {\n        const currentPage = state.filterParams.page\n        return u({\n          filterParams: {\n            page: currentPage + 1\n          }\n        }, state)\n      }\n    }\n    case actions.UPDATE_SALE_ARTWORKS: {\n      if (state.filterParams.page > 1) {\n        return u({\n          saleArtworks: state.saleArtworks.concat(action.payload.saleArtworks)\n        }, state)\n      } else {\n        return u({\n          saleArtworks: action.payload.saleArtworks\n        }, state)\n      }\n    }\n    case actions.UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS: {\n      return u({\n        saleArtworksByFollowedArtists: action.payload.saleArtworks\n      }, state)\n    }\n    case actions.UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS_TOTAL: {\n      return u({\n        saleArtworksByFollowedArtistsTotal: action.payload.total\n      }, state)\n    }\n    case actions.UPDATE_SORT: {\n      return u({\n        filterParams: {\n          sort: action.payload.sort\n        }\n      }, state)\n    }\n    case actions.UPDATE_TOTAL: {\n      return u({\n        total: action.payload.total\n      }, state)\n    }\n    default: return state\n  }\n}\n"]}]}