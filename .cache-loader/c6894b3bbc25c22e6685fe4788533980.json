{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/apps/editorial_features/components/gucci/components/App.jsx","dependencies":[{"path":"/Users/eve/development/force/src/desktop/apps/editorial_features/components/gucci/components/App.jsx","mtime":1521064654000},{"path":"/Users/eve/development/force/.babelrc","mtime":1537178749000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _debounce from \"lodash/debounce\";\n\n(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    padding: 0;\\n  \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport styled from 'styled-components';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { pMedia } from \"@artsy/reaction/dist/Components/Helpers\";\nimport { FixedHeader } from \"./nav/fixed_header.jsx\";\nimport { SeriesHeader } from \"./series/series_header.jsx\";\nimport { SeriesFooter } from \"./series/series_footer.jsx\";\nimport { Section } from \"./section/section.jsx\";\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", {\n      activeSection: _this.props.activeSection,\n      isMobile: _this.props.isMobile,\n      showHeader: false\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"checkWindowSize\", function () {\n      var isMobile = false;\n\n      if (document.documentElement.clientWidth < 720) {\n        isMobile = true;\n      }\n\n      _this.setState({\n        isMobile: isMobile\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"inBody\", function (showHeader) {\n      _this.setState({\n        showHeader: showHeader\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onChangeSection\", function (index) {\n      var section = _this.props.curation.sections[index];\n\n      _this.setState({\n        activeSection: index\n      });\n\n      document.getElementById(section.slug).scrollIntoView();\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onEnterSection\", function (index, _ref) {\n      var previousPosition = _ref.previousPosition,\n          currentPosition = _ref.currentPosition;\n      var section = _this.props.curation.sections[index];\n\n      if (previousPosition === 'above' && currentPosition === 'inside') {\n        _this.setState({\n          activeSection: index\n        });\n\n        document.title = section.title;\n        window.history.pushState({}, section.title, \"/gender-equality/\".concat(section.slug));\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onLeaveSection\", function (index, _ref2) {\n      var previousPosition = _ref2.previousPosition,\n          currentPosition = _ref2.currentPosition;\n      var nextSection = _this.props.curation.sections[index + 1];\n\n      if (nextSection && previousPosition === 'inside' && currentPosition === 'above') {\n        _this.setState({\n          activeSection: index + 1\n        });\n\n        document.title = nextSection.title;\n        window.history.pushState({}, nextSection.title, \"/gender-equality/\".concat(nextSection.slug));\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // setup window isMobile\n      this.checkWindowSize();\n      window.addEventListener('resize', _debounce(this.checkWindowSize, 30));\n      var showHeader = false; // if landing on slug, go to section and show header\n\n      if (this.props.activeSection) {\n        this.onChangeSection(this.props.activeSection);\n      } // if landing scrolled below header, show fixed header\n\n\n      if (window.scrollY > 100) {\n        showHeader = true;\n      }\n\n      this.setState({\n        showHeader: showHeader\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var curation = this.props.curation;\n      var _this$state = this.state,\n          activeSection = _this$state.activeSection,\n          isMobile = _this$state.isMobile,\n          showHeader = _this$state.showHeader;\n      return React.createElement(\"div\", {\n        className: \"gucci\"\n      }, React.createElement(FixedHeader // fixed position shows on scroll\n      , {\n        activeSection: activeSection,\n        curation: curation,\n        onChangeSection: this.onChangeSection,\n        isMobile: isMobile,\n        isVisible: showHeader,\n        isOpen: this.props.activeSection\n      }), React.createElement(SeriesHeader // relative position always at content top\n      , {\n        activeSection: activeSection,\n        curation: curation,\n        inBody: this.inBody,\n        isMobile: isMobile,\n        onChangeSection: this.onChangeSection\n      }), React.createElement(GucciBody, null, curation.sections.map(function (section, index) {\n        return React.createElement(\"div\", {\n          id: section.slug,\n          key: 'section-' + index\n        }, React.createElement(Section, {\n          section: section,\n          index: index,\n          onEnterSection: _this2.onEnterSection,\n          onLeaveSection: _this2.onLeaveSection\n        }));\n      }), React.createElement(SeriesFooter, {\n        curation: curation,\n        isMobile: isMobile\n      })));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    value: function __reactstandin__regenerateByEval(key, code) {\n      this[key] = eval(code);\n    }\n  }]);\n\n  return App;\n}(Component);\n\n_defineProperty(App, \"propTypes\", {\n  curation: PropTypes.object,\n  activeSection: PropTypes.number,\n  isMobile: PropTypes.bool\n});\n\nexport { App as default };\nvar GucciBody =\n/*#__PURE__*/\nstyled.div.withConfig({\n  displayName: \"App__GucciBody\",\n  componentId: \"s19nxsx3-0\"\n})([\"width:100%;max-width:1240px;margin:0 auto;padding:0 20px;.col{max-width:100%;position:relative;}\", \";\"], pMedia.sm(_templateObject()));\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(App, \"App\", \"/Users/eve/development/force/src/desktop/apps/editorial_features/components/gucci/components/App.jsx\");\n  reactHotLoader.register(GucciBody, \"GucciBody\", \"/Users/eve/development/force/src/desktop/apps/editorial_features/components/gucci/components/App.jsx\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/eve/development/force/src/desktop/apps/editorial_features/components/gucci/components/App.jsx"],"names":["styled","PropTypes","React","Component","pMedia","FixedHeader","SeriesHeader","SeriesFooter","Section","App","activeSection","props","isMobile","showHeader","document","documentElement","clientWidth","setState","index","section","curation","sections","getElementById","slug","scrollIntoView","previousPosition","currentPosition","title","window","history","pushState","nextSection","checkWindowSize","addEventListener","onChangeSection","scrollY","state","inBody","map","onEnterSection","onLeaveSection","object","number","bool","GucciBody","div","sm"],"mappings":"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","sourcesContent":["import styled from 'styled-components'\nimport PropTypes from 'prop-types'\nimport React, { Component } from 'react'\nimport { debounce } from 'lodash'\nimport { pMedia } from 'reaction/Components/Helpers'\nimport { FixedHeader } from './nav/fixed_header.jsx'\nimport { SeriesHeader } from './series/series_header.jsx'\nimport { SeriesFooter } from './series/series_footer.jsx'\nimport { Section } from './section/section.jsx'\n\nexport default class App extends Component {\n  static propTypes = {\n    curation: PropTypes.object,\n    activeSection: PropTypes.number,\n    isMobile: PropTypes.bool,\n  }\n\n  state = {\n    activeSection: this.props.activeSection,\n    isMobile: this.props.isMobile,\n    showHeader: false,\n  }\n\n  componentDidMount() {\n    // setup window isMobile\n    this.checkWindowSize()\n    window.addEventListener('resize', debounce(this.checkWindowSize, 30))\n    let showHeader = false\n    // if landing on slug, go to section and show header\n    if (this.props.activeSection) {\n      this.onChangeSection(this.props.activeSection)\n    }\n    // if landing scrolled below header, show fixed header\n    if (window.scrollY > 100) {\n      showHeader = true\n    }\n    this.setState({ showHeader })\n  }\n\n  checkWindowSize = () => {\n    let isMobile = false\n    if (document.documentElement.clientWidth < 720) {\n      isMobile = true\n    }\n    this.setState({ isMobile })\n  }\n\n  inBody = (showHeader) => {\n    this.setState({ showHeader })\n  }\n\n  onChangeSection = (index) => {\n    const section = this.props.curation.sections[index]\n    this.setState({ activeSection: index })\n    document.getElementById(section.slug).scrollIntoView()\n  }\n\n  onEnterSection = (index, { previousPosition, currentPosition }) => {\n    const section = this.props.curation.sections[index]\n    if (previousPosition === 'above' && currentPosition === 'inside') {\n      this.setState({ activeSection: index })\n      document.title = section.title\n      window.history.pushState(\n        {},\n        section.title,\n        `/gender-equality/${section.slug}`\n      )\n    }\n  }\n\n  onLeaveSection = (index, { previousPosition, currentPosition }) => {\n    const nextSection = this.props.curation.sections[index + 1]\n    if (\n      nextSection &&\n      previousPosition === 'inside' &&\n      currentPosition === 'above'\n    ) {\n      this.setState({ activeSection: index + 1 })\n      document.title = nextSection.title\n      window.history.pushState(\n        {},\n        nextSection.title,\n        `/gender-equality/${nextSection.slug}`\n      )\n    }\n  }\n\n  render() {\n    const { curation } = this.props\n    const { activeSection, isMobile, showHeader } = this.state\n\n    return (\n      <div className=\"gucci\">\n        <FixedHeader // fixed position shows on scroll\n          activeSection={activeSection}\n          curation={curation}\n          onChangeSection={this.onChangeSection}\n          isMobile={isMobile}\n          isVisible={showHeader}\n          isOpen={this.props.activeSection}\n        />\n\n        <SeriesHeader // relative position always at content top\n          activeSection={activeSection}\n          curation={curation}\n          inBody={this.inBody}\n          isMobile={isMobile}\n          onChangeSection={this.onChangeSection}\n        />\n\n        <GucciBody>\n          {curation.sections.map((section, index) => (\n            <div id={section.slug} key={'section-' + index}>\n              <Section\n                section={section}\n                index={index}\n                onEnterSection={this.onEnterSection}\n                onLeaveSection={this.onLeaveSection}\n              />\n            </div>\n          ))}\n          <SeriesFooter curation={curation} isMobile={isMobile} />\n        </GucciBody>\n      </div>\n    )\n  }\n}\n\nconst GucciBody = styled.div`\n  width: 100%;\n  max-width: 1240px;\n  margin: 0 auto;\n  padding: 0 20px;\n  .col {\n    max-width: 100%;\n    position: relative;\n  }\n  ${pMedia.sm`\n    padding: 0;\n  `};\n`\n"]}]}