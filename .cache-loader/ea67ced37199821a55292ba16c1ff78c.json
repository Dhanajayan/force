{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/mobile/analytics/before_ready.js","dependencies":[{"path":"/Users/eve/development/force/src/mobile/analytics/before_ready.js","mtime":1530028054000},{"path":"/Users/eve/development/force/.babelrc","mtime":1528124541000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _sharify = require(\"sharify\");\n\nvar _volley = require(\"../../lib/volley\");\n\n//\n// Analytics code that needs to run before page load and analytics.ready\n//\n// Disable Parsely firing on non-article/section pages\nif (!location.pathname.match(/^\\/article/)) {\n  window.PARSELY = {\n    autotrack: false\n  };\n} // Track pageview\n\n\nanalytics.page({\n  path: location.pathname\n}, {\n  integrations: {\n    Marketo: false\n  }\n}); // Track pageload speed\n\nif (window.performance && window.performance.timing && _sharify.data.TRACK_PAGELOAD_PATHS) {\n  window.addEventListener('load', function () {\n    var pageType = window.sd.PAGE_TYPE || window.location.pathname.split('/')[1];\n\n    if (_sharify.data.TRACK_PAGELOAD_PATHS.split('|').includes(pageType)) {\n      window.setTimeout(function () {\n        var _window$performance$t = window.performance.timing,\n            requestStart = _window$performance$t.requestStart,\n            loadEventEnd = _window$performance$t.loadEventEnd,\n            domComplete = _window$performance$t.domComplete;\n        (0, _volley.reportLoadTimeToVolley)(requestStart, loadEventEnd, domComplete, pageType, 'mobile');\n      }, 0);\n    }\n  });\n}",{"version":3,"sources":["src/mobile/analytics/before_ready.js"],"names":["location","pathname","match","window","PARSELY","autotrack","analytics","page","path","integrations","Marketo","performance","timing","TRACK_PAGELOAD_PATHS","addEventListener","pageType","sd","PAGE_TYPE","split","includes","setTimeout","requestStart","loadEventEnd","domComplete"],"mappings":";;AAIA;;AACA;;AALA;AACA;AACA;AAKA;AACA,IAAI,CAACA,SAASC,QAAT,CAAkBC,KAAlB,CAAwB,YAAxB,CAAL,EAA4C;AAC1CC,SAAOC,OAAP,GAAiB;AAAEC,eAAW;AAAb,GAAjB;AACD,C,CAED;;;AACAC,UAAUC,IAAV,CACE;AAAEC,QAAMR,SAASC;AAAjB,CADF,EAEE;AAAEQ,gBAAc;AAAEC,aAAS;AAAX;AAAhB,CAFF,E,CAKA;;AACA,IACEP,OAAOQ,WAAP,IACAR,OAAOQ,WAAP,CAAmBC,MADnB,IAEA,cAAGC,oBAHL,EAIE;AACAV,SAAOW,gBAAP,CAAwB,MAAxB,EAAgC,YAAW;AACzC,QAAMC,WACJZ,OAAOa,EAAP,CAAUC,SAAV,IAAuBd,OAAOH,QAAP,CAAgBC,QAAhB,CAAyBiB,KAAzB,CAA+B,GAA/B,EAAoC,CAApC,CADzB;;AAEA,QAAI,cAAGL,oBAAH,CAAwBK,KAAxB,CAA8B,GAA9B,EAAmCC,QAAnC,CAA4CJ,QAA5C,CAAJ,EAA2D;AACzDZ,aAAOiB,UAAP,CAAkB,YAAW;AAAA,oCAKvBjB,OAAOQ,WAAP,CAAmBC,MALI;AAAA,YAEzBS,YAFyB,yBAEzBA,YAFyB;AAAA,YAGzBC,YAHyB,yBAGzBA,YAHyB;AAAA,YAIzBC,WAJyB,yBAIzBA,WAJyB;AAO3B,4CACEF,YADF,EAEEC,YAFF,EAGEC,WAHF,EAIER,QAJF,EAKE,QALF;AAOD,OAdD,EAcG,CAdH;AAeD;AACF,GApBD;AAqBD","file":"/Users/eve/development/force/src/mobile/analytics/before_ready.js","sourceRoot":"/Users/eve/development/force","sourcesContent":["//\n// Analytics code that needs to run before page load and analytics.ready\n//\n\nimport { data as sd } from 'sharify'\nimport { reportLoadTimeToVolley } from 'lib/volley'\n\n// Disable Parsely firing on non-article/section pages\nif (!location.pathname.match(/^\\/article/)) {\n  window.PARSELY = { autotrack: false }\n}\n\n// Track pageview\nanalytics.page(\n  { path: location.pathname },\n  { integrations: { Marketo: false } }\n)\n\n// Track pageload speed\nif (\n  window.performance &&\n  window.performance.timing &&\n  sd.TRACK_PAGELOAD_PATHS\n) {\n  window.addEventListener('load', function() {\n    const pageType =\n      window.sd.PAGE_TYPE || window.location.pathname.split('/')[1]\n    if (sd.TRACK_PAGELOAD_PATHS.split('|').includes(pageType)) {\n      window.setTimeout(function() {\n        const {\n          requestStart,\n          loadEventEnd,\n          domComplete,\n        } = window.performance.timing\n\n        reportLoadTimeToVolley(\n          requestStart,\n          loadEventEnd,\n          domComplete,\n          pageType,\n          'mobile'\n        )\n      }, 0)\n    }\n  })\n}\n"]}]}