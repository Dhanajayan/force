{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/analytics/impressions.js","dependencies":[{"path":"/Users/eve/development/force/src/desktop/analytics/impressions.js","mtime":1519227435000},{"path":"/Users/eve/development/force/.babelrc","mtime":1537178749000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nvar trackedIds = [];\n\nvar visibleArtworkIds = function visibleArtworkIds() {\n  // Find all of the \"artwork item\" components that are visible\n  // Extra verbose for clarity's sake\n  var ids = $('.artwork-item').filter(function () {\n    var viewportTop = $(window).scrollTop();\n    var viewportBottom = viewportTop + $(window).height();\n    var artworkTop = $(this).offset().top;\n    var artworkBottom = artworkTop + $(this).outerHeight(); // Either artwork top or artwork bottom is below the top\n    // of the browser and above the fold.\n\n    var topInView = artworkTop > viewportTop && artworkTop < viewportBottom;\n    var bottomInView = artworkBottom > viewportTop && artworkBottom < viewportBottom;\n    return topInView || bottomInView;\n  }).map(function () {\n    return $(this).attr('data-id');\n  }).toArray(); // Add the artwork page as an impression\n\n  if ($('#artwork-page').length && sd.ARTWORK) ids.push(sd.ARTWORK._id); // Don't double track the same impressions\n\n  ids = _.difference(ids, trackedIds);\n  trackedIds = trackedIds.concat(ids); // Return only the new impressions\n\n  return ids.join();\n};\n\nvar trackImpressions = function trackImpressions() {\n  var ids = visibleArtworkIds();\n\n  if (ids.length > 0) {\n    analytics.track('Artwork impressions', {\n      ids: ids,\n      nonInteraction: 1\n    });\n  }\n};\n\ntrackImpressions();\n$(window).on('scroll', _.throttle(trackImpressions, 200));\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(trackedIds, \"trackedIds\", \"/Users/eve/development/force/src/desktop/analytics/impressions.js\");\n  reactHotLoader.register(visibleArtworkIds, \"visibleArtworkIds\", \"/Users/eve/development/force/src/desktop/analytics/impressions.js\");\n  reactHotLoader.register(trackImpressions, \"trackImpressions\", \"/Users/eve/development/force/src/desktop/analytics/impressions.js\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/eve/development/force/src/desktop/analytics/impressions.js"],"names":["trackedIds","visibleArtworkIds","ids","$","filter","viewportTop","window","scrollTop","viewportBottom","height","artworkTop","offset","top","artworkBottom","outerHeight","topInView","bottomInView","map","attr","toArray","length","sd","ARTWORK","push","_id","_","difference","concat","join","trackImpressions","analytics","track","nonInteraction","on","throttle"],"mappings":";;;;;;AAAA,IAAIA,UAAU,GAAG,EAAjB;;AAEA,IAAIC,iBAAiB,GAAG,SAApBA,iBAAoB,GAAY;AAClC;AACA;AACA,MAAIC,GAAG,GAAGC,CAAC,CAAC,eAAD,CAAD,CAAmBC,MAAnB,CAA0B,YAAY;AAC9C,QAAIC,WAAW,GAAGF,CAAC,CAACG,MAAD,CAAD,CAAUC,SAAV,EAAlB;AACA,QAAIC,cAAc,GAAGH,WAAW,GAAGF,CAAC,CAACG,MAAD,CAAD,CAAUG,MAAV,EAAnC;AACA,QAAIC,UAAU,GAAGP,CAAC,CAAC,IAAD,CAAD,CAAQQ,MAAR,GAAiBC,GAAlC;AACA,QAAIC,aAAa,GAAGH,UAAU,GAAGP,CAAC,CAAC,IAAD,CAAD,CAAQW,WAAR,EAAjC,CAJ8C,CAM9C;AACA;;AACA,QAAIC,SAAS,GAAGL,UAAU,GAAGL,WAAb,IAA4BK,UAAU,GAAGF,cAAzD;AACA,QAAIQ,YAAY,GAAGH,aAAa,GAAGR,WAAhB,IAA+BQ,aAAa,GAAGL,cAAlE;AAEA,WAAOO,SAAS,IAAIC,YAApB;AACD,GAZS,EAYPC,GAZO,CAYH,YAAY;AACjB,WAAOd,CAAC,CAAC,IAAD,CAAD,CAAQe,IAAR,CAAa,SAAb,CAAP;AACD,GAdS,EAcPC,OAdO,EAAV,CAHkC,CAmBlC;;AACA,MAAIhB,CAAC,CAAC,eAAD,CAAD,CAAmBiB,MAAnB,IAA6BC,EAAE,CAACC,OAApC,EAA6CpB,GAAG,CAACqB,IAAJ,CAASF,EAAE,CAACC,OAAH,CAAWE,GAApB,EApBX,CAsBlC;;AACAtB,EAAAA,GAAG,GAAGuB,CAAC,CAACC,UAAF,CAAaxB,GAAb,EAAkBF,UAAlB,CAAN;AACAA,EAAAA,UAAU,GAAGA,UAAU,CAAC2B,MAAX,CAAkBzB,GAAlB,CAAb,CAxBkC,CA0BlC;;AACA,SAAOA,GAAG,CAAC0B,IAAJ,EAAP;AACD,CA5BD;;AA8BA,IAAIC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAY;AACjC,MAAI3B,GAAG,GAAGD,iBAAiB,EAA3B;;AACA,MAAIC,GAAG,CAACkB,MAAJ,GAAa,CAAjB,EAAoB;AAClBU,IAAAA,SAAS,CAACC,KAAV,CAAgB,qBAAhB,EAAuC;AACrC7B,MAAAA,GAAG,EAAEA,GADgC;AAC3B8B,MAAAA,cAAc,EAAE;AADW,KAAvC;AAGD;AACF,CAPD;;AASAH,gBAAgB;AAChB1B,CAAC,CAACG,MAAD,CAAD,CAAU2B,EAAV,CAAa,QAAb,EAAuBR,CAAC,CAACS,QAAF,CAAWL,gBAAX,EAA6B,GAA7B,CAAvB;;;;;;;;;;;;0BA1CI7B,U;0BAEAC,iB;0BA8BA4B,gB","sourcesContent":["var trackedIds = []\n\nvar visibleArtworkIds = function () {\n  // Find all of the \"artwork item\" components that are visible\n  // Extra verbose for clarity's sake\n  var ids = $('.artwork-item').filter(function () {\n    var viewportTop = $(window).scrollTop()\n    var viewportBottom = viewportTop + $(window).height()\n    var artworkTop = $(this).offset().top\n    var artworkBottom = artworkTop + $(this).outerHeight()\n\n    // Either artwork top or artwork bottom is below the top\n    // of the browser and above the fold.\n    var topInView = artworkTop > viewportTop && artworkTop < viewportBottom\n    var bottomInView = artworkBottom > viewportTop && artworkBottom < viewportBottom\n\n    return topInView || bottomInView\n  }).map(function () {\n    return $(this).attr('data-id')\n  }).toArray()\n\n  // Add the artwork page as an impression\n  if ($('#artwork-page').length && sd.ARTWORK) ids.push(sd.ARTWORK._id)\n\n  // Don't double track the same impressions\n  ids = _.difference(ids, trackedIds)\n  trackedIds = trackedIds.concat(ids)\n\n  // Return only the new impressions\n  return ids.join()\n}\n\nvar trackImpressions = function () {\n  var ids = visibleArtworkIds()\n  if (ids.length > 0) {\n    analytics.track('Artwork impressions', {\n      ids: ids, nonInteraction: 1\n    })\n  }\n}\n\ntrackImpressions()\n$(window).on('scroll', _.throttle(trackImpressions, 200))\n"]}]}