{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/mobile/analytics/criteo.js","dependencies":[{"path":"/Users/eve/development/force/src/mobile/analytics/criteo.js","mtime":1519227436000},{"path":"/Users/eve/development/force/.babelrc","mtime":1537178749000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\n//\n// Criteo tracking for auctions product feed and artworks product feed.\n//\nwindow.criteo_q = window.criteo_q || [];\nvar pathSplit = location.pathname.split('/');\n\nvar userEmail = function () {\n  return sd.CURRENT_USER ? [sd.CURRENT_USER.email] : [];\n}();\n\nif (pathSplit[1] === 'auctions') {\n  // http://www.artsy.net/auctions - (AUCTIONS viewHome)\n  //              0          1\n  window.criteo_q.push({\n    event: 'setAccount',\n    account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER\n  }, {\n    event: 'setSiteType',\n    type: 'm'\n  }, {\n    event: 'viewHome'\n  });\n} else if (pathSplit[1] === 'auction') {\n  if (!pathSplit[3]) {\n    // https://www.artsy.net/auction/:auction_id - (AUCTIONS viewList)\n    //              0          1          2\n    window.criteo_q.push({\n      event: 'setAccount',\n      account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER\n    }, {\n      event: 'setSiteType',\n      type: 'm'\n    }, {\n      event: 'viewList',\n      item: sd.ARTWORKS.map(function (a) {\n        return a._id;\n      })\n    });\n  } else if (pathSplit[3] === 'bid') {\n    // https://www.artsy.net/auction/:auction_id/bid - (AUCTIONS trackTransaction)\n    //              0          1          2       3\n    analyticsHooks.on('confirm:bid', function (bidderPosition) {\n      var price = bidderPosition.get('max_bid_amount_cents') ? bidderPosition.get('max_bid_amount_cents') / 100 : null;\n      window.criteo_q.push({\n        event: 'setAccount',\n        account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER\n      }, {\n        event: 'setSiteType',\n        type: 'm'\n      }, {\n        event: 'trackTransaction',\n        id: bidderPosition.get('bidder').id,\n        item: [{\n          id: bidderPosition.get('sale_artwork').artwork.id,\n          price: price,\n          quantity: 1\n        }]\n      });\n    });\n  }\n} else if (pathSplit[1] === 'artwork' && !pathSplit[3]) {\n  // https://www.artsy.net/artwork/:artwork_id - (AUCTIONS & ARTWORKS viewItem)\n  //              0          1          2\n  if (sd.AUCTION && sd.AUCTION.artwork_id) {\n    window.criteo_q.push({\n      event: 'setAccount',\n      account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER\n    }, {\n      event: 'setSiteType',\n      type: 'm'\n    }, {\n      event: 'viewItem',\n      item: sd.AUCTION && sd.AUCTION.artwork_id\n    });\n  } else {\n    window.criteo_q.push({\n      event: 'setAccount',\n      account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER\n    }, {\n      event: 'setSiteType',\n      type: 'm'\n    }, {\n      event: 'setEmail',\n      email: userEmail\n    }, {\n      event: 'viewItem',\n      item: sd.ARTWORK._id\n    });\n  }\n} else {\n  if (pathSplit[1] === 'collect') {\n    // https://www.artsy.net/collect - (ARTWORKS viewHome)\n    //              0          1\n    window.criteo_q.push({\n      event: 'setAccount',\n      account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER\n    }, {\n      event: 'setSiteType',\n      type: 'm'\n    }, {\n      event: 'setEmail',\n      email: userEmail\n    }, {\n      event: 'viewHome'\n    });\n  } else if (pathSplit[1] === 'artist' && !pathSplit[3]) {\n    // https://www.artsy.net/artist/:artist_id - (ARTWORKS viewList)\n    //              0          1         2\n    window.criteo_q.push({\n      event: 'setAccount',\n      account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER\n    }, {\n      event: 'setSiteType',\n      type: 'm'\n    }, {\n      event: 'setEmail',\n      email: userEmail\n    }, {\n      event: 'viewList',\n      item: _.pluck(_.filter(sd.ARTWORKS, function (a) {\n        return a.availability === 'for sale';\n      }), '_id')\n    });\n  }\n}\n\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(pathSplit, \"pathSplit\", \"/Users/eve/development/force/src/mobile/analytics/criteo.js\");\n  reactHotLoader.register(userEmail, \"userEmail\", \"/Users/eve/development/force/src/mobile/analytics/criteo.js\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/eve/development/force/src/mobile/analytics/criteo.js"],"names":["window","criteo_q","pathSplit","location","pathname","split","userEmail","sd","CURRENT_USER","email","push","event","account","CRITEO_AUCTIONS_ACCOUNT_NUMBER","type","item","ARTWORKS","map","a","_id","analyticsHooks","on","bidderPosition","price","get","id","artwork","quantity","AUCTION","artwork_id","CRITEO_ARTWORKS_ACCOUNT_NUMBER","ARTWORK","_","pluck","filter","availability"],"mappings":"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","sourcesContent":["//\n// Criteo tracking for auctions product feed and artworks product feed.\n//\n\nwindow.criteo_q = window.criteo_q || []\nvar pathSplit = location.pathname.split('/')\nvar userEmail = (function() {\n  return sd.CURRENT_USER ? [sd.CURRENT_USER.email] : []\n})()\nif (pathSplit[1] === 'auctions') {\n  // http://www.artsy.net/auctions - (AUCTIONS viewHome)\n  //              0          1\n  window.criteo_q.push(\n    { event: 'setAccount', account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER },\n    { event: 'setSiteType', type: 'm' },\n    { event: 'viewHome' }\n  )\n} else if (pathSplit[1] === 'auction') {\n  if (!pathSplit[3]) {\n    // https://www.artsy.net/auction/:auction_id - (AUCTIONS viewList)\n    //              0          1          2\n    window.criteo_q.push(\n      { event: 'setAccount', account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER },\n      { event: 'setSiteType', type: 'm' },\n      {\n        event: 'viewList',\n        item: sd.ARTWORKS.map(function(a) {\n          return a._id\n        }),\n      }\n    )\n  } else if (pathSplit[3] === 'bid') {\n    // https://www.artsy.net/auction/:auction_id/bid - (AUCTIONS trackTransaction)\n    //              0          1          2       3\n    analyticsHooks.on('confirm:bid', function(bidderPosition) {\n      var price = bidderPosition.get('max_bid_amount_cents')\n        ? bidderPosition.get('max_bid_amount_cents') / 100\n        : null\n      window.criteo_q.push(\n        { event: 'setAccount', account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER },\n        { event: 'setSiteType', type: 'm' },\n        {\n          event: 'trackTransaction',\n          id: bidderPosition.get('bidder').id,\n          item: [\n            {\n              id: bidderPosition.get('sale_artwork').artwork.id,\n              price: price,\n              quantity: 1,\n            },\n          ],\n        }\n      )\n    })\n  }\n} else if (pathSplit[1] === 'artwork' && !pathSplit[3]) {\n  // https://www.artsy.net/artwork/:artwork_id - (AUCTIONS & ARTWORKS viewItem)\n  //              0          1          2\n  if (sd.AUCTION && sd.AUCTION.artwork_id) {\n    window.criteo_q.push(\n      { event: 'setAccount', account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER },\n      { event: 'setSiteType', type: 'm' },\n      { event: 'viewItem', item: sd.AUCTION && sd.AUCTION.artwork_id }\n    )\n  } else {\n    window.criteo_q.push(\n      { event: 'setAccount', account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER },\n      { event: 'setSiteType', type: 'm' },\n      { event: 'setEmail', email: userEmail },\n      { event: 'viewItem', item: sd.ARTWORK._id }\n    )\n  }\n} else {\n  if (pathSplit[1] === 'collect') {\n    // https://www.artsy.net/collect - (ARTWORKS viewHome)\n    //              0          1\n    window.criteo_q.push(\n      { event: 'setAccount', account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER },\n      { event: 'setSiteType', type: 'm' },\n      { event: 'setEmail', email: userEmail },\n      { event: 'viewHome' }\n    )\n  } else if (pathSplit[1] === 'artist' && !pathSplit[3]) {\n    // https://www.artsy.net/artist/:artist_id - (ARTWORKS viewList)\n    //              0          1         2\n    window.criteo_q.push(\n      { event: 'setAccount', account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER },\n      { event: 'setSiteType', type: 'm' },\n      { event: 'setEmail', email: userEmail },\n      {\n        event: 'viewList',\n        item: _.pluck(\n          _.filter(sd.ARTWORKS, function(a) {\n            return a.availability === 'for sale'\n          }),\n          '_id'\n        ),\n      }\n    )\n  }\n}\n"]}]}