{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/apps/article/components/FollowButton.js","dependencies":[{"path":"/Users/eve/development/force/src/desktop/apps/article/components/FollowButton.js","mtime":1519227435000},{"path":"/Users/eve/development/force/.babelrc","mtime":1528124541000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setupFollowButtons = exports.setupFollows = void 0;\n\nvar _map2 = _interopRequireDefault(require(\"lodash/map\"));\n\nvar _artist = _interopRequireDefault(require(\"../../../models/artist.coffee\"));\n\nvar _current_user = _interopRequireDefault(require(\"../../../models/current_user.coffee\"));\n\nvar _index = require(\"../../../components/follow_button/index.coffee\");\n\nvar _sharify = require(\"sharify\");\n\nvar setupFollows = function setupFollows() {\n  if (_current_user.default.orNull()) {\n    return new _index.Following(null, {\n      kind: 'artist'\n    });\n  }\n};\n\nexports.setupFollows = setupFollows;\n\nvar setupFollowButtons = function setupFollowButtons(following) {\n  var artists = (0, _map2.default)($('.artist-follow'), function (artist) {\n    return artist.getAttribute('data-id');\n  });\n  (0, _map2.default)(artists, function (artist) {\n    new _index.FollowButton({\n      el: $(\".artist-follow[data-id=\\\"\".concat(artist, \"\\\"]\")),\n      following: following,\n      modelName: 'artist',\n      model: new _artist.default({\n        id: artist\n      }),\n      context_page: 'Article Page',\n      context_module: 'article_artist_follow',\n      href: _sharify.data.APP_URL + _sharify.data.CURRENT_PATH\n    });\n  });\n\n  if (_current_user.default.orNull()) {\n    following.syncFollows(artists);\n  }\n};\n\nexports.setupFollowButtons = setupFollowButtons;",{"version":3,"sources":["src/desktop/apps/article/components/FollowButton.js"],"names":["setupFollows","orNull","kind","setupFollowButtons","following","artists","$","artist","getAttribute","el","modelName","model","id","context_page","context_module","href","APP_URL","CURRENT_PATH","syncFollows"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAGO,IAAMA,eAAe,SAAfA,YAAe,GAAM;AAChC,MAAI,sBAAYC,MAAZ,EAAJ,EAA0B;AACxB,WAAO,qBAAc,IAAd,EAAoB;AAACC,YAAM;AAAP,KAApB,CAAP;AACD;AACF,CAJM;;;;AAMA,IAAMC,qBAAqB,SAArBA,kBAAqB,CAACC,SAAD,EAAe;AAC/C,MAAMC,UAAU,mBAAIC,EAAE,gBAAF,CAAJ,EAAyB,kBAAU;AACjD,WAAOC,OAAOC,YAAP,CAAoB,SAApB,CAAP;AACD,GAFe,CAAhB;AAGA,qBAAIH,OAAJ,EAAa,kBAAU;AACrB,4BAAiB;AACfI,UAAIH,qCAA6BC,MAA7B,SADW;AAEfH,0BAFe;AAGfM,iBAAW,QAHI;AAIfC,aAAO,oBAAW;AAACC,YAAIL;AAAL,OAAX,CAJQ;AAKfM,oBAAc,cALC;AAMfC,sBAAgB,uBAND;AAOfC,YAAM,cAAGC,OAAH,GAAa,cAAGC;AAPP,KAAjB;AASD,GAVD;;AAWA,MAAI,sBAAYhB,MAAZ,EAAJ,EAA0B;AACxBG,cAAUc,WAAV,CAAsBb,OAAtB;AACD;AACF,CAlBM","file":"/Users/eve/development/force/src/desktop/apps/article/components/FollowButton.js","sourceRoot":"/Users/eve/development/force","sourcesContent":["import Artist from 'desktop/models/artist.coffee'\nimport CurrentUser from 'desktop/models/current_user.coffee'\nimport { Following, FollowButton } from 'desktop/components/follow_button/index.coffee'\nimport { data as sd } from 'sharify'\nimport { map } from 'lodash'\n\nexport const setupFollows = () => {\n  if (CurrentUser.orNull()) {\n    return new Following(null, {kind: 'artist'})\n  }\n}\n\nexport const setupFollowButtons = (following) => {\n  const artists = map($('.artist-follow'), artist => {\n    return artist.getAttribute('data-id')\n  })\n  map(artists, artist => {\n    new FollowButton({\n      el: $(`.artist-follow[data-id=\"${artist}\"]`),\n      following,\n      modelName: 'artist',\n      model: new Artist({id: artist}),\n      context_page: 'Article Page',\n      context_module: 'article_artist_follow',\n      href: sd.APP_URL + sd.CURRENT_PATH\n    })\n  })\n  if (CurrentUser.orNull()) {\n    following.syncFollows(artists)\n  }\n}\n"]}]}