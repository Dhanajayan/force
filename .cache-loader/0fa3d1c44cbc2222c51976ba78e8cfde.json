{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/components/react/infinite_scroll/InfiniteScroll.js","dependencies":[{"path":"/Users/eve/development/force/src/desktop/components/react/infinite_scroll/InfiniteScroll.js","mtime":1519227436000},{"path":"/Users/eve/development/force/.babelrc","mtime":1537178749000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\n(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { throttle } from 'underscore';\nvar THROTTLE_MS = 200;\n\nvar InfiniteScroll =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(InfiniteScroll, _Component);\n\n  function InfiniteScroll() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, InfiniteScroll);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(InfiniteScroll)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"state\", {\n      isMounted: false,\n      $node: {}\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleScroll\", function () {\n      var onTrigger = _this.props.onTrigger;\n      return throttle(function () {\n        var _this$state = _this.state,\n            isMounted = _this$state.isMounted,\n            $node = _this$state.$node;\n\n        if (!isMounted) {\n          return;\n        } // TODO: Add ability to pass in threshold\n\n\n        var threshold = _this.$(window).height() + _this.$(window).scrollTop() + 500; // px push\n\n        var isTriggered = $node.height() > 0 && threshold >= $node.offset().top + $node.height();\n\n        if (isTriggered) {\n          onTrigger();\n        }\n      }, THROTTLE_MS);\n    });\n\n    return _this;\n  }\n\n  _createClass(InfiniteScroll, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var triggerElement = this.props.triggerElement;\n      this.$ = require('jquery');\n      this.$(window).on(\"scroll\".concat(triggerElement), this.handleScroll());\n      this.setState(function () {\n        return {\n          isMounted: true,\n          $node: _this2.$(triggerElement)\n        };\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.$(window).off(\"scroll\".concat(this.props.triggerElement));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", null, this.props.children);\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    value: function __reactstandin__regenerateByEval(key, code) {\n      this[key] = eval(code);\n    }\n  }]);\n\n  return InfiniteScroll;\n}(Component);\n\n_defineProperty(InfiniteScroll, \"propTypes\", {\n  children: PropTypes.node.isRequired,\n  onTrigger: PropTypes.func.isRequired,\n  triggerElement: PropTypes.string.isRequired\n});\n\nexport { InfiniteScroll as default };\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(THROTTLE_MS, \"THROTTLE_MS\", \"/Users/eve/development/force/src/desktop/components/react/infinite_scroll/InfiniteScroll.js\");\n  reactHotLoader.register(InfiniteScroll, \"InfiniteScroll\", \"/Users/eve/development/force/src/desktop/components/react/infinite_scroll/InfiniteScroll.js\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/eve/development/force/src/desktop/components/react/infinite_scroll/InfiniteScroll.js"],"names":["PropTypes","React","Component","throttle","THROTTLE_MS","InfiniteScroll","isMounted","$node","onTrigger","props","state","threshold","$","window","height","scrollTop","isTriggered","offset","top","triggerElement","require","on","handleScroll","setState","off","children","node","isRequired","func","string"],"mappings":";;;;;;;;;;;;;;AAAA,OAAOA,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,YAAzB;AAEA,IAAMC,WAAW,GAAG,GAApB;;IAEqBC,c;;;;;;;;;;;;;;;;;;oFAOX;AACNC,MAAAA,SAAS,EAAE,KADL;AAENC,MAAAA,KAAK,EAAE;AAFD,K;;2FAuBO,YAAM;AAAA,UACXC,SADW,GACG,MAAKC,KADR,CACXD,SADW;AAGnB,aAAOL,QAAQ,CAAC,YAAM;AAAA,0BACS,MAAKO,KADd;AAAA,YACZJ,SADY,eACZA,SADY;AAAA,YACDC,KADC,eACDA,KADC;;AAGpB,YAAI,CAACD,SAAL,EAAgB;AACd;AACD,SALmB,CAOpB;;;AACA,YAAMK,SAAS,GACb,MAAKC,CAAL,CAAOC,MAAP,EAAeC,MAAf,KAA0B,MAAKF,CAAL,CAAOC,MAAP,EAAeE,SAAf,EAA1B,GAAuD,GADzD,CARoB,CASyC;;AAC7D,YAAMC,WAAW,GACfT,KAAK,CAACO,MAAN,KAAiB,CAAjB,IAAsBH,SAAS,IAAIJ,KAAK,CAACU,MAAN,GAAeC,GAAf,GAAqBX,KAAK,CAACO,MAAN,EAD1D;;AAGA,YAAIE,WAAJ,EAAiB;AACfR,UAAAA,SAAS;AACV;AACF,OAhBc,EAgBZJ,WAhBY,CAAf;AAiBD,K;;;;;;;wCAtCmB;AAAA;;AAAA,UACVe,cADU,GACS,KAAKV,KADd,CACVU,cADU;AAGlB,WAAKP,CAAL,GAASQ,OAAO,CAAC,QAAD,CAAhB;AACA,WAAKR,CAAL,CAAOC,MAAP,EAAeQ,EAAf,iBAA2BF,cAA3B,GAA6C,KAAKG,YAAL,EAA7C;AAEA,WAAKC,QAAL,CAAc,YAAM;AAClB,eAAO;AACLjB,UAAAA,SAAS,EAAE,IADN;AAELC,UAAAA,KAAK,EAAE,MAAI,CAACK,CAAL,CAAOO,cAAP;AAFF,SAAP;AAID,OALD;AAMD;;;2CAEsB;AACrB,WAAKP,CAAL,CAAOC,MAAP,EAAeW,GAAf,iBAA4B,KAAKf,KAAL,CAAWU,cAAvC;AACD;;;6BAwBQ;AACP,aAAO,iCAAM,KAAKV,KAAL,CAAWgB,QAAjB,CAAP;AACD;;;;;;;;;EAtDyCvB,S;;gBAAvBG,c,eACA;AACjBoB,EAAAA,QAAQ,EAAEzB,SAAS,CAAC0B,IAAV,CAAeC,UADR;AAEjBnB,EAAAA,SAAS,EAAER,SAAS,CAAC4B,IAAV,CAAeD,UAFT;AAGjBR,EAAAA,cAAc,EAAEnB,SAAS,CAAC6B,MAAV,CAAiBF;AAHhB,C;;SADAtB,c;;;;;;;;;;;;0BAFfD,W;0BAEeC,c","sourcesContent":["import PropTypes from 'prop-types'\nimport React, { Component } from 'react'\nimport { throttle } from 'underscore'\n\nconst THROTTLE_MS = 200\n\nexport default class InfiniteScroll extends Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    onTrigger: PropTypes.func.isRequired,\n    triggerElement: PropTypes.string.isRequired,\n  }\n\n  state = {\n    isMounted: false,\n    $node: {},\n  }\n\n  componentDidMount() {\n    const { triggerElement } = this.props\n\n    this.$ = require('jquery')\n    this.$(window).on(`scroll${triggerElement}`, this.handleScroll())\n\n    this.setState(() => {\n      return {\n        isMounted: true,\n        $node: this.$(triggerElement),\n      }\n    })\n  }\n\n  componentWillUnmount() {\n    this.$(window).off(`scroll${this.props.triggerElement}`)\n  }\n\n  handleScroll = () => {\n    const { onTrigger } = this.props\n\n    return throttle(() => {\n      const { isMounted, $node } = this.state\n\n      if (!isMounted) {\n        return\n      }\n\n      // TODO: Add ability to pass in threshold\n      const threshold =\n        this.$(window).height() + this.$(window).scrollTop() + 500 // px push\n      const isTriggered =\n        $node.height() > 0 && threshold >= $node.offset().top + $node.height()\n\n      if (isTriggered) {\n        onTrigger()\n      }\n    }, THROTTLE_MS)\n  }\n\n  render() {\n    return <div>{this.props.children}</div>\n  }\n}\n"]}]}