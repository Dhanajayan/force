{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/lib/volley.js","dependencies":[{"path":"/Users/eve/development/force/src/lib/volley.js","mtime":1530028054000},{"path":"/Users/eve/development/force/.babelrc","mtime":1537178749000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\n\n(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nimport { data as sd } from 'sharify';\nimport request from 'superagent';\n\nfunction metricPayload(pageType, deviceType, name, start, end) {\n  return start > 0 && end > 0 && end - start > 0 ? {\n    type: 'timing',\n    name: 'load-time',\n    timing: end - start,\n    tags: [\"page-type:\".concat(pageType), \"device-type:\".concat(deviceType), \"mark:\".concat(name)]\n  } : null;\n}\n\nexport function reportLoadTimeToVolley(_x, _x2, _x3, _x4, _x5) {\n  return _reportLoadTimeToVolley.apply(this, arguments);\n}\n\nfunction _reportLoadTimeToVolley() {\n  _reportLoadTimeToVolley = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(requestStart, loadEventEnd, domComplete, pageType, deviceType) {\n    var metrics;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!sd.VOLLEY_ENDPOINT) {\n              _context.next = 6;\n              break;\n            }\n\n            metrics = [metricPayload(pageType, deviceType, 'dom-complete', requestStart, domComplete), metricPayload(pageType, deviceType, 'load-event-end', requestStart, loadEventEnd)].filter(function (metric) {\n              return metric != null;\n            });\n\n            if (!(metrics.length > 0)) {\n              _context.next = 6;\n              break;\n            }\n\n            _context.next = 5;\n            return request.post(sd.VOLLEY_ENDPOINT).send({\n              serviceName: 'force',\n              metrics: metrics\n            });\n\n          case 5:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n  return _reportLoadTimeToVolley.apply(this, arguments);\n}\n\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(metricPayload, \"metricPayload\", \"/Users/eve/development/force/src/lib/volley.js\");\n  reactHotLoader.register(reportLoadTimeToVolley, \"reportLoadTimeToVolley\", \"/Users/eve/development/force/src/lib/volley.js\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/eve/development/force/src/lib/volley.js"],"names":["data","sd","request","metricPayload","pageType","deviceType","name","start","end","type","timing","tags","reportLoadTimeToVolley","requestStart","loadEventEnd","domComplete","VOLLEY_ENDPOINT","metrics","filter","metric","length","post","send","serviceName"],"mappings":";;;;;;;;;AAAA,SAASA,IAAI,IAAIC,EAAjB,QAA2B,SAA3B;AACA,OAAOC,OAAP,MAAoB,YAApB;;AAEA,SAASC,aAAT,CAAuBC,QAAvB,EAAiCC,UAAjC,EAA6CC,IAA7C,EAAmDC,KAAnD,EAA0DC,GAA1D,EAA+D;AAC7D,SAAOD,KAAK,GAAG,CAAR,IAAaC,GAAG,GAAG,CAAnB,IAAwBA,GAAG,GAAGD,KAAN,GAAc,CAAtC,GACH;AACEE,IAAAA,IAAI,EAAE,QADR;AAEEH,IAAAA,IAAI,EAAE,WAFR;AAGEI,IAAAA,MAAM,EAAEF,GAAG,GAAGD,KAHhB;AAIEI,IAAAA,IAAI,EAAE,qBACSP,QADT,yBAEWC,UAFX,kBAGIC,IAHJ;AAJR,GADG,GAWH,IAXJ;AAYD;;AAED,gBAAsBM,sBAAtB;AAAA;AAAA;;;;;2BAAO,iBACLC,YADK,EAELC,YAFK,EAGLC,WAHK,EAILX,QAJK,EAKLC,UALK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAODJ,EAAE,CAACe,eAPF;AAAA;AAAA;AAAA;;AAQGC,YAAAA,OARH,GAQa,CACdd,aAAa,CACXC,QADW,EAEXC,UAFW,EAGX,cAHW,EAIXQ,YAJW,EAKXE,WALW,CADC,EAQdZ,aAAa,CACXC,QADW,EAEXC,UAFW,EAGX,gBAHW,EAIXQ,YAJW,EAKXC,YALW,CARC,EAedI,MAfc,CAeP,UAAAC,MAAM;AAAA,qBAAIA,MAAM,IAAI,IAAd;AAAA,aAfC,CARb;;AAAA,kBAyBCF,OAAO,CAACG,MAAR,GAAiB,CAzBlB;AAAA;AAAA;AAAA;;AAAA;AAAA,mBA0BYlB,OAAO,CAACmB,IAAR,CAAapB,EAAE,CAACe,eAAhB,EAAiCM,IAAjC,CAAsC;AACjDC,cAAAA,WAAW,EAAE,OADoC;AAEjDN,cAAAA,OAAO,EAAPA;AAFiD,aAAtC,CA1BZ;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;;;;;;;;;;;;0BAfEd,a;0BAeaS,sB","sourcesContent":["import { data as sd } from 'sharify'\nimport request from 'superagent'\n\nfunction metricPayload(pageType, deviceType, name, start, end) {\n  return start > 0 && end > 0 && end - start > 0\n    ? {\n        type: 'timing',\n        name: 'load-time',\n        timing: end - start,\n        tags: [\n          `page-type:${pageType}`,\n          `device-type:${deviceType}`,\n          `mark:${name}`,\n        ],\n      }\n    : null\n}\n\nexport async function reportLoadTimeToVolley(\n  requestStart,\n  loadEventEnd,\n  domComplete,\n  pageType,\n  deviceType\n) {\n  if (sd.VOLLEY_ENDPOINT) {\n    const metrics = [\n      metricPayload(\n        pageType,\n        deviceType,\n        'dom-complete',\n        requestStart,\n        domComplete\n      ),\n      metricPayload(\n        pageType,\n        deviceType,\n        'load-event-end',\n        requestStart,\n        loadEventEnd\n      ),\n    ].filter(metric => metric != null)\n\n    if (metrics.length > 0) {\n      return await request.post(sd.VOLLEY_ENDPOINT).send({\n        serviceName: 'force',\n        metrics,\n      })\n    }\n  }\n}\n"]}]}