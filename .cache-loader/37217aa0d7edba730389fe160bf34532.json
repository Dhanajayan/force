{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/analytics/recently_viewed_artworks.js","dependencies":[{"path":"/Users/eve/development/force/src/desktop/analytics/recently_viewed_artworks.js","mtime":1519227435000},{"path":"/Users/eve/development/force/.babelrc","mtime":1528124541000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["(function () {\n  'use strict';\n\n  var alreadyTracked = false;\n\n  var isRVARailVisible = function isRVARailVisible() {\n    if ($('#recently-viewed-artworks').length < 1) {\n      return false;\n    }\n\n    var viewportTop = $(window).scrollTop();\n    var viewportBottom = viewportTop + $(window).height();\n    var rvaTop = $('#recently-viewed-artworks').offset().top;\n    var rvaHeight = $('#recently-viewed-artworks').height();\n    return viewportBottom > rvaTop + rvaHeight;\n  };\n\n  var RVAArtworkIds = function RVAArtworkIds() {\n    return $('#recently-viewed-artworks .artwork-item').map(function () {\n      return $(this).attr('data-artwork-id');\n    }).toArray();\n  };\n\n  var trackImpressions = function trackImpressions() {\n    if (!alreadyTracked && isRVARailVisible()) {\n      var ids = RVAArtworkIds();\n\n      if (ids.length > 0) {\n        analytics.track('Impression', {\n          type: 'module',\n          label: 'Recently viewed artworks',\n          artwork_ids: ids\n        });\n        alreadyTracked = true;\n      }\n    }\n  };\n\n  $(window).on('scroll', _.throttle(trackImpressions, 200));\n  $(document).on('click', '.analytics-rva-artwork-thumbnail', function (e) {\n    analytics.track('Click', {\n      type: 'thumbnail',\n      label: 'Recently viewed artwork',\n      context_module: 'recently_viewed_artworks',\n      destination_path: $(this).attr('href')\n    });\n  });\n})();",{"version":3,"sources":["src/desktop/analytics/recently_viewed_artworks.js"],"names":["alreadyTracked","isRVARailVisible","$","length","viewportTop","window","scrollTop","viewportBottom","height","rvaTop","offset","top","rvaHeight","RVAArtworkIds","map","attr","toArray","trackImpressions","ids","analytics","track","type","label","artwork_ids","on","_","throttle","document","e","context_module","destination_path"],"mappings":"AAAA,CAAC,YAAY;AACX;;AAEA,MAAIA,iBAAiB,KAArB;;AAEA,MAAIC,mBAAmB,SAAnBA,gBAAmB,GAAY;AACjC,QAAGC,EAAE,2BAAF,EAA+BC,MAA/B,GAAwC,CAA3C,EAA6C;AAAE,aAAO,KAAP;AAAe;;AAC9D,QAAIC,cAAcF,EAAEG,MAAF,EAAUC,SAAV,EAAlB;AACA,QAAIC,iBAAiBH,cAAcF,EAAEG,MAAF,EAAUG,MAAV,EAAnC;AACA,QAAIC,SAASP,EAAE,2BAAF,EAA+BQ,MAA/B,GAAwCC,GAArD;AACA,QAAIC,YAAYV,EAAE,2BAAF,EAA+BM,MAA/B,EAAhB;AACA,WAAOD,iBAAkBE,SAASG,SAAlC;AACD,GAPD;;AASA,MAAIC,gBAAgB,SAAhBA,aAAgB,GAAY;AAC9B,WAAOX,EAAE,yCAAF,EAA6CY,GAA7C,CAAiD,YAAY;AAClE,aAAOZ,EAAE,IAAF,EAAQa,IAAR,CAAa,iBAAb,CAAP;AACD,KAFM,EAEJC,OAFI,EAAP;AAGD,GAJD;;AAMA,MAAIC,mBAAmB,SAAnBA,gBAAmB,GAAY;AACjC,QAAI,CAACjB,cAAD,IAAmBC,kBAAvB,EAA2C;AACzC,UAAIiB,MAAML,eAAV;;AACA,UAAIK,IAAIf,MAAJ,GAAa,CAAjB,EAAoB;AAClBgB,kBAAUC,KAAV,CAAgB,YAAhB,EAA8B;AAC5BC,gBAAM,QADsB;AAE5BC,iBAAO,0BAFqB;AAG5BC,uBAAaL;AAHe,SAA9B;AAKAlB,yBAAiB,IAAjB;AACD;AACF;AACF,GAZD;;AAcAE,IAAEG,MAAF,EAAUmB,EAAV,CAAa,QAAb,EAAuBC,EAAEC,QAAF,CAAWT,gBAAX,EAA6B,GAA7B,CAAvB;AAEAf,IAAEyB,QAAF,EAAYH,EAAZ,CAAe,OAAf,EAAwB,kCAAxB,EAA4D,UAAUI,CAAV,EAAa;AACvET,cAAUC,KAAV,CAAgB,OAAhB,EAAyB;AACvBC,YAAM,WADiB;AAEvBC,aAAO,yBAFgB;AAGvBO,sBAAgB,0BAHO;AAIvBC,wBAAkB5B,EAAE,IAAF,EAAQa,IAAR,CAAa,MAAb;AAJK,KAAzB;AAMD,GAPD;AAQD,CA5CD","file":"/Users/eve/development/force/src/desktop/analytics/recently_viewed_artworks.js","sourceRoot":"/Users/eve/development/force","sourcesContent":["(function () {\n  'use strict'\n\n  var alreadyTracked = false\n\n  var isRVARailVisible = function () {\n    if($('#recently-viewed-artworks').length < 1){ return false; }\n    var viewportTop = $(window).scrollTop()\n    var viewportBottom = viewportTop + $(window).height()\n    var rvaTop = $('#recently-viewed-artworks').offset().top\n    var rvaHeight = $('#recently-viewed-artworks').height()\n    return viewportBottom > (rvaTop + rvaHeight)\n  }\n\n  var RVAArtworkIds = function () {\n    return $('#recently-viewed-artworks .artwork-item').map(function () {\n      return $(this).attr('data-artwork-id')\n    }).toArray()\n  }\n\n  var trackImpressions = function () {\n    if (!alreadyTracked && isRVARailVisible()) {\n      var ids = RVAArtworkIds()\n      if (ids.length > 0) {\n        analytics.track('Impression', {\n          type: 'module',\n          label: 'Recently viewed artworks',\n          artwork_ids: ids\n        })\n        alreadyTracked = true\n      }\n    }\n  }\n\n  $(window).on('scroll', _.throttle(trackImpressions, 200))\n\n  $(document).on('click', '.analytics-rva-artwork-thumbnail', function (e) {\n    analytics.track('Click', {\n      type: 'thumbnail',\n      label: 'Recently viewed artwork',\n      context_module: 'recently_viewed_artworks',\n      destination_path: $(this).attr('href')\n    })\n  })\n})()\n"]}]}