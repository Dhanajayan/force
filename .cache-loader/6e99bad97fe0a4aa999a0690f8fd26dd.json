{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/mobile/analytics/auth.js","dependencies":[{"path":"/Users/eve/development/force/src/mobile/analytics/auth.js","mtime":1519227436000},{"path":"/Users/eve/development/force/.babelrc","mtime":1528124541000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["var _JSON$stringify = require(\"@babel/runtime/core-js/json/stringify\");\n\n//\n// Events for signup and login.\n//\n// Created account (via email)\nanalyticsHooks.on('auth:signup', function (data, res) {\n  analytics.track('Created account', {\n    acquisition_initiative: data.acquisition_initiative,\n    signup_service: 'email',\n    user_id: res.user.id\n  });\n}); // Created account (via social)\n// 1. Upon clicking the social signup button\n\n$(document).on('click', '.auth-signup-facebook, .marketing-signup-modal-fb', function () {\n  // 2. Store some data in cookies before being redirected everywhere\n  Cookies.set('analytics-signup', _JSON$stringify({\n    service: 'facebook',\n    acquisition_initiative: location.search.replace('?m-id=', '')\n  }));\n}); // 3. After landing back on Artsy send the tracking call and expire the cookie\n\nif (Cookies.get('analytics-signup')) {\n  var data = JSON.parse(Cookies.get('analytics-signup'));\n  Cookies.expire('analytics-signup');\n\n  if (sd.CURRENT_USER) {\n    analytics.track('Created account', {\n      acquisition_initiative: data.acquisition_initiative,\n      signup_service: data.service,\n      user_id: sd.CURRENT_USER.id\n    });\n  }\n} // Successfully logged in\n\n\nanalyticsHooks.on('auth:login', function (options) {\n  analytics.track('Successfully logged in');\n});",{"version":3,"sources":["src/mobile/analytics/auth.js"],"names":["analyticsHooks","on","data","res","analytics","track","acquisition_initiative","signup_service","user_id","user","id","$","document","Cookies","set","service","location","search","replace","get","JSON","parse","expire","sd","CURRENT_USER","options"],"mappings":";;AAAA;AACA;AACA;AAEA;AACAA,eAAeC,EAAf,CAAkB,aAAlB,EAAiC,UAASC,IAAT,EAAeC,GAAf,EAAoB;AACnDC,YAAUC,KAAV,CAAgB,iBAAhB,EAAmC;AACjCC,4BAAwBJ,KAAKI,sBADI;AAEjCC,oBAAgB,OAFiB;AAGjCC,aAASL,IAAIM,IAAJ,CAASC;AAHe,GAAnC;AAKD,CAND,E,CAQA;AAEA;;AACAC,EAAEC,QAAF,EAAYX,EAAZ,CACE,OADF,EAEE,mDAFF,EAGE,YAAW;AACT;AACAY,UAAQC,GAAR,CACE,kBADF,EAEE,gBAAe;AACbC,aAAS,UADI;AAEbT,4BAAwBU,SAASC,MAAT,CAAgBC,OAAhB,CAAwB,QAAxB,EAAkC,EAAlC;AAFX,GAAf,CAFF;AAOD,CAZH,E,CAeA;;AACA,IAAIL,QAAQM,GAAR,CAAY,kBAAZ,CAAJ,EAAqC;AACnC,MAAIjB,OAAOkB,KAAKC,KAAL,CAAWR,QAAQM,GAAR,CAAY,kBAAZ,CAAX,CAAX;AACAN,UAAQS,MAAR,CAAe,kBAAf;;AACA,MAAIC,GAAGC,YAAP,EAAqB;AACnBpB,cAAUC,KAAV,CAAgB,iBAAhB,EAAmC;AACjCC,8BAAwBJ,KAAKI,sBADI;AAEjCC,sBAAgBL,KAAKa,OAFY;AAGjCP,eAASe,GAAGC,YAAH,CAAgBd;AAHQ,KAAnC;AAKD;AACF,C,CAED;;;AACAV,eAAeC,EAAf,CAAkB,YAAlB,EAAgC,UAASwB,OAAT,EAAkB;AAChDrB,YAAUC,KAAV,CAAgB,wBAAhB;AACD,CAFD","file":"/Users/eve/development/force/src/mobile/analytics/auth.js","sourceRoot":"/Users/eve/development/force","sourcesContent":["//\n// Events for signup and login.\n//\n\n// Created account (via email)\nanalyticsHooks.on('auth:signup', function(data, res) {\n  analytics.track('Created account', {\n    acquisition_initiative: data.acquisition_initiative,\n    signup_service: 'email',\n    user_id: res.user.id,\n  })\n})\n\n// Created account (via social)\n\n// 1. Upon clicking the social signup button\n$(document).on(\n  'click',\n  '.auth-signup-facebook, .marketing-signup-modal-fb',\n  function() {\n    // 2. Store some data in cookies before being redirected everywhere\n    Cookies.set(\n      'analytics-signup',\n      JSON.stringify({\n        service: 'facebook',\n        acquisition_initiative: location.search.replace('?m-id=', ''),\n      })\n    )\n  }\n)\n\n// 3. After landing back on Artsy send the tracking call and expire the cookie\nif (Cookies.get('analytics-signup')) {\n  var data = JSON.parse(Cookies.get('analytics-signup'))\n  Cookies.expire('analytics-signup')\n  if (sd.CURRENT_USER) {\n    analytics.track('Created account', {\n      acquisition_initiative: data.acquisition_initiative,\n      signup_service: data.service,\n      user_id: sd.CURRENT_USER.id,\n    })\n  }\n}\n\n// Successfully logged in\nanalyticsHooks.on('auth:login', function(options) {\n  analytics.track('Successfully logged in')\n})\n"]}]}