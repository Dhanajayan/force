{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/mobile/analytics/bidding.js","dependencies":[{"path":"/Users/eve/development/force/src/mobile/analytics/bidding.js","mtime":1519227436000},{"path":"/Users/eve/development/force/.babelrc","mtime":1528124541000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["//\n// Generic events around bidding for auctions\n//\nvar AUCTION_ID = sd.AUCTION && sd.AUCTION.id || sd.SALE && sd.SALE.id || sd.UPCOMING_AUCTIONS && sd.UPCOMING_AUCTIONS[0].id || location.pathname.replace('/auction/', '').split('/')[0] || location.search.replace('?auction_id=', '') || null;\nvar USER_AUCTION = {};\nif (sd.CURRENT_USER) USER_AUCTION.user_id = sd.CURRENT_USER.id;\nif (AUCTION_ID) USER_AUCTION.auction_slug = AUCTION_ID; // -----------------------------------------------------------------------------\n// Events from https://trello.com/c/nqmq1yjL/264-web-send-data-to-segment\n// -----------------------------------------------------------------------------\n// Clicked “Register to bid” on the auction feature page\n// There is no \"Register\" button on /auction/:id like Force\n// Clicked \"Register\" in the Thank You / Auction modal\n\nanalytics.trackLink($('.auction-subscribed-thank-you [href*=sign_up]')[0], 'Clicked “Register to bid” on the auction feature page', USER_AUCTION); // Successful registration on auction feature page\n\nanalyticsHooks.on('auth:signup', function (data) {\n  analytics.track('Successful registration on auction feature page', USER_AUCTION);\n}); // Registration submitted\n\nanalyticsHooks.on('registration:submitted', function () {\n  analytics.track('Registration submitted', USER_AUCTION);\n}); // Registration submit billing address\n\nanalyticsHooks.on('registration:submitted-address', function (options) {\n  analytics.track('Registration submit billing address', USER_AUCTION);\n}); // Registration card validated\n\nanalyticsHooks.on('registration:validated', function (options) {\n  analytics.track('Registration card validated', USER_AUCTION);\n}); // Clicked “Bid” on the artwork page\n\nanalytics.trackLink($('.artwork-bid-button')[0], 'Clicked “Bid” on the artwork page', USER_AUCTION); // Clicked “Bid” button on artwork item from auction feature page\n// Does not exist in MG, just list item links\n// Clicked “Confirm Bid” on bid page\n\n$('#feature-bid-page-container .avant-garde-box-button-black').click(function () {\n  analytics.track('Clicked “Confirm Bid” on bid page', USER_AUCTION); // Error placing your bid\n\n  $(document).one('ajaxError', function (e, jqXHR, settings, error) {\n    analytics.track('Error placing your bid', jqXHR.responseText);\n  });\n}); // Confirmed bid on bid page\n\nanalyticsHooks.on('confirm:bid', function (bidderPosition) {\n  analytics.track('Confirmed bid on bid page', {\n    user_id: USER_AUCTION.user_id,\n    auction_slug: USER_AUCTION.auction_slug,\n    bidder_position_id: bidderPosition.id\n  });\n}); // Auction Page Pageview\n\nif (location.pathname.match(new RegExp('auction/.*')) && !location.pathname.match(new RegExp('auction/.*/'))) {\n  analytics.track('Auction Page Pageview', {\n    slug: AUCTION_ID,\n    preview: sd.AUCTION.auction_state,\n    nonInteraction: 1\n  });\n} // -----------------------------------------------------------------------------\n// Misc Events\n// -----------------------------------------------------------------------------\n// Clicked \"Register\" in the Thank You / Auction modal\n\n\n$(document).on('click', '.auction-subscribed-register', function () {\n  analytics.track('Clicked \"Register\" in the Thank You / Auction modal');\n}); // Clicked \"Skip\" in the Thank You / Auction modal\n\n$(document).on('click', '.auction-subscribed-skip', function () {\n  analytics.track('Clicked \"Skip\" in the Thank You / Auction modal');\n}); // Showed ‘Confirm bid on artwork page’\n\nif (location.pathname.match(/artwork\\/.*\\/bid/)) analytics.track(\"Showed 'Confirm bid on artwork page'\", {\n  nonInteraction: 1\n}); // Trigged login for bid registrations\n\nif (location.pathname.indexOf('/log_in') !== -1 && location.search.indexOf('?redirect_uri=/auction-registration/') !== -1) {\n  analytics.track('Trigged login form via register to bid button');\n}",{"version":3,"sources":["src/mobile/analytics/bidding.js"],"names":["AUCTION_ID","sd","AUCTION","id","SALE","UPCOMING_AUCTIONS","location","pathname","replace","split","search","USER_AUCTION","CURRENT_USER","user_id","auction_slug","analytics","trackLink","$","analyticsHooks","on","data","track","options","click","document","one","e","jqXHR","settings","error","responseText","bidderPosition","bidder_position_id","match","RegExp","slug","preview","auction_state","nonInteraction","indexOf"],"mappings":"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","file":"/Users/eve/development/force/src/mobile/analytics/bidding.js","sourceRoot":"/Users/eve/development/force","sourcesContent":["//\n// Generic events around bidding for auctions\n//\n\nvar AUCTION_ID =\n  (sd.AUCTION && sd.AUCTION.id) ||\n  (sd.SALE && sd.SALE.id) ||\n  (sd.UPCOMING_AUCTIONS && sd.UPCOMING_AUCTIONS[0].id) ||\n  location.pathname.replace('/auction/', '').split('/')[0] ||\n  location.search.replace('?auction_id=', '') ||\n  null\nvar USER_AUCTION = {}\nif (sd.CURRENT_USER) USER_AUCTION.user_id = sd.CURRENT_USER.id\nif (AUCTION_ID) USER_AUCTION.auction_slug = AUCTION_ID\n\n// -----------------------------------------------------------------------------\n// Events from https://trello.com/c/nqmq1yjL/264-web-send-data-to-segment\n// -----------------------------------------------------------------------------\n\n// Clicked “Register to bid” on the auction feature page\n// There is no \"Register\" button on /auction/:id like Force\n\n// Clicked \"Register\" in the Thank You / Auction modal\nanalytics.trackLink(\n  $('.auction-subscribed-thank-you [href*=sign_up]')[0],\n  'Clicked “Register to bid” on the auction feature page',\n  USER_AUCTION\n)\n\n// Successful registration on auction feature page\nanalyticsHooks.on('auth:signup', function(data) {\n  analytics.track(\n    'Successful registration on auction feature page',\n    USER_AUCTION\n  )\n})\n\n// Registration submitted\nanalyticsHooks.on('registration:submitted', function() {\n  analytics.track('Registration submitted', USER_AUCTION)\n})\n\n// Registration submit billing address\nanalyticsHooks.on('registration:submitted-address', function(options) {\n  analytics.track('Registration submit billing address', USER_AUCTION)\n})\n\n// Registration card validated\nanalyticsHooks.on('registration:validated', function(options) {\n  analytics.track('Registration card validated', USER_AUCTION)\n})\n\n// Clicked “Bid” on the artwork page\nanalytics.trackLink(\n  $('.artwork-bid-button')[0],\n  'Clicked “Bid” on the artwork page',\n  USER_AUCTION\n)\n\n// Clicked “Bid” button on artwork item from auction feature page\n// Does not exist in MG, just list item links\n\n// Clicked “Confirm Bid” on bid page\n$('#feature-bid-page-container .avant-garde-box-button-black').click(\n  function() {\n    analytics.track('Clicked “Confirm Bid” on bid page', USER_AUCTION)\n\n    // Error placing your bid\n    $(document).one('ajaxError', function(e, jqXHR, settings, error) {\n      analytics.track('Error placing your bid', jqXHR.responseText)\n    })\n  }\n)\n\n// Confirmed bid on bid page\nanalyticsHooks.on('confirm:bid', function(bidderPosition) {\n  analytics.track('Confirmed bid on bid page', {\n    user_id: USER_AUCTION.user_id,\n    auction_slug: USER_AUCTION.auction_slug,\n    bidder_position_id: bidderPosition.id,\n  })\n})\n\n// Auction Page Pageview\nif (\n  location.pathname.match(new RegExp('auction/.*')) &&\n  !location.pathname.match(new RegExp('auction/.*/'))\n) {\n  analytics.track('Auction Page Pageview', {\n    slug: AUCTION_ID,\n    preview: sd.AUCTION.auction_state,\n    nonInteraction: 1,\n  })\n}\n\n// -----------------------------------------------------------------------------\n// Misc Events\n// -----------------------------------------------------------------------------\n\n// Clicked \"Register\" in the Thank You / Auction modal\n$(document).on('click', '.auction-subscribed-register', function() {\n  analytics.track('Clicked \"Register\" in the Thank You / Auction modal')\n})\n\n// Clicked \"Skip\" in the Thank You / Auction modal\n$(document).on('click', '.auction-subscribed-skip', function() {\n  analytics.track('Clicked \"Skip\" in the Thank You / Auction modal')\n})\n\n// Showed ‘Confirm bid on artwork page’\nif (location.pathname.match(/artwork\\/.*\\/bid/))\n  analytics.track(\"Showed 'Confirm bid on artwork page'\", { nonInteraction: 1 })\n\n// Trigged login for bid registrations\nif (\n  location.pathname.indexOf('/log_in') !== -1 &&\n  location.search.indexOf('?redirect_uri=/auction-registration/') !== -1\n) {\n  analytics.track('Trigged login form via register to bid button')\n}\n"]}]}