{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/mobile/analytics/criteo.js","dependencies":[{"path":"/Users/eve/development/force/src/mobile/analytics/criteo.js","mtime":1519227436000},{"path":"/Users/eve/development/force/.babelrc","mtime":1528124541000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["//\n// Criteo tracking for auctions product feed and artworks product feed.\n//\nwindow.criteo_q = window.criteo_q || [];\nvar pathSplit = location.pathname.split('/');\n\nvar userEmail = function () {\n  return sd.CURRENT_USER ? [sd.CURRENT_USER.email] : [];\n}();\n\nif (pathSplit[1] === 'auctions') {\n  // http://www.artsy.net/auctions - (AUCTIONS viewHome)\n  //              0          1\n  window.criteo_q.push({\n    event: 'setAccount',\n    account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER\n  }, {\n    event: 'setSiteType',\n    type: 'm'\n  }, {\n    event: 'viewHome'\n  });\n} else if (pathSplit[1] === 'auction') {\n  if (!pathSplit[3]) {\n    // https://www.artsy.net/auction/:auction_id - (AUCTIONS viewList)\n    //              0          1          2\n    window.criteo_q.push({\n      event: 'setAccount',\n      account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER\n    }, {\n      event: 'setSiteType',\n      type: 'm'\n    }, {\n      event: 'viewList',\n      item: sd.ARTWORKS.map(function (a) {\n        return a._id;\n      })\n    });\n  } else if (pathSplit[3] === 'bid') {\n    // https://www.artsy.net/auction/:auction_id/bid - (AUCTIONS trackTransaction)\n    //              0          1          2       3\n    analyticsHooks.on('confirm:bid', function (bidderPosition) {\n      var price = bidderPosition.get('max_bid_amount_cents') ? bidderPosition.get('max_bid_amount_cents') / 100 : null;\n      window.criteo_q.push({\n        event: 'setAccount',\n        account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER\n      }, {\n        event: 'setSiteType',\n        type: 'm'\n      }, {\n        event: 'trackTransaction',\n        id: bidderPosition.get('bidder').id,\n        item: [{\n          id: bidderPosition.get('sale_artwork').artwork.id,\n          price: price,\n          quantity: 1\n        }]\n      });\n    });\n  }\n} else if (pathSplit[1] === 'artwork' && !pathSplit[3]) {\n  // https://www.artsy.net/artwork/:artwork_id - (AUCTIONS & ARTWORKS viewItem)\n  //              0          1          2\n  if (sd.AUCTION && sd.AUCTION.artwork_id) {\n    window.criteo_q.push({\n      event: 'setAccount',\n      account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER\n    }, {\n      event: 'setSiteType',\n      type: 'm'\n    }, {\n      event: 'viewItem',\n      item: sd.AUCTION && sd.AUCTION.artwork_id\n    });\n  } else {\n    window.criteo_q.push({\n      event: 'setAccount',\n      account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER\n    }, {\n      event: 'setSiteType',\n      type: 'm'\n    }, {\n      event: 'setEmail',\n      email: userEmail\n    }, {\n      event: 'viewItem',\n      item: sd.ARTWORK._id\n    });\n  }\n} else {\n  if (pathSplit[1] === 'collect') {\n    // https://www.artsy.net/collect - (ARTWORKS viewHome)\n    //              0          1\n    window.criteo_q.push({\n      event: 'setAccount',\n      account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER\n    }, {\n      event: 'setSiteType',\n      type: 'm'\n    }, {\n      event: 'setEmail',\n      email: userEmail\n    }, {\n      event: 'viewHome'\n    });\n  } else if (pathSplit[1] === 'artist' && !pathSplit[3]) {\n    // https://www.artsy.net/artist/:artist_id - (ARTWORKS viewList)\n    //              0          1         2\n    window.criteo_q.push({\n      event: 'setAccount',\n      account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER\n    }, {\n      event: 'setSiteType',\n      type: 'm'\n    }, {\n      event: 'setEmail',\n      email: userEmail\n    }, {\n      event: 'viewList',\n      item: _.pluck(_.filter(sd.ARTWORKS, function (a) {\n        return a.availability === 'for sale';\n      }), '_id')\n    });\n  }\n}",{"version":3,"sources":["src/mobile/analytics/criteo.js"],"names":["window","criteo_q","pathSplit","location","pathname","split","userEmail","sd","CURRENT_USER","email","push","event","account","CRITEO_AUCTIONS_ACCOUNT_NUMBER","type","item","ARTWORKS","map","a","_id","analyticsHooks","on","bidderPosition","price","get","id","artwork","quantity","AUCTION","artwork_id","CRITEO_ARTWORKS_ACCOUNT_NUMBER","ARTWORK","_","pluck","filter","availability"],"mappings":"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","file":"/Users/eve/development/force/src/mobile/analytics/criteo.js","sourceRoot":"/Users/eve/development/force","sourcesContent":["//\n// Criteo tracking for auctions product feed and artworks product feed.\n//\n\nwindow.criteo_q = window.criteo_q || []\nvar pathSplit = location.pathname.split('/')\nvar userEmail = (function() {\n  return sd.CURRENT_USER ? [sd.CURRENT_USER.email] : []\n})()\nif (pathSplit[1] === 'auctions') {\n  // http://www.artsy.net/auctions - (AUCTIONS viewHome)\n  //              0          1\n  window.criteo_q.push(\n    { event: 'setAccount', account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER },\n    { event: 'setSiteType', type: 'm' },\n    { event: 'viewHome' }\n  )\n} else if (pathSplit[1] === 'auction') {\n  if (!pathSplit[3]) {\n    // https://www.artsy.net/auction/:auction_id - (AUCTIONS viewList)\n    //              0          1          2\n    window.criteo_q.push(\n      { event: 'setAccount', account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER },\n      { event: 'setSiteType', type: 'm' },\n      {\n        event: 'viewList',\n        item: sd.ARTWORKS.map(function(a) {\n          return a._id\n        }),\n      }\n    )\n  } else if (pathSplit[3] === 'bid') {\n    // https://www.artsy.net/auction/:auction_id/bid - (AUCTIONS trackTransaction)\n    //              0          1          2       3\n    analyticsHooks.on('confirm:bid', function(bidderPosition) {\n      var price = bidderPosition.get('max_bid_amount_cents')\n        ? bidderPosition.get('max_bid_amount_cents') / 100\n        : null\n      window.criteo_q.push(\n        { event: 'setAccount', account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER },\n        { event: 'setSiteType', type: 'm' },\n        {\n          event: 'trackTransaction',\n          id: bidderPosition.get('bidder').id,\n          item: [\n            {\n              id: bidderPosition.get('sale_artwork').artwork.id,\n              price: price,\n              quantity: 1,\n            },\n          ],\n        }\n      )\n    })\n  }\n} else if (pathSplit[1] === 'artwork' && !pathSplit[3]) {\n  // https://www.artsy.net/artwork/:artwork_id - (AUCTIONS & ARTWORKS viewItem)\n  //              0          1          2\n  if (sd.AUCTION && sd.AUCTION.artwork_id) {\n    window.criteo_q.push(\n      { event: 'setAccount', account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER },\n      { event: 'setSiteType', type: 'm' },\n      { event: 'viewItem', item: sd.AUCTION && sd.AUCTION.artwork_id }\n    )\n  } else {\n    window.criteo_q.push(\n      { event: 'setAccount', account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER },\n      { event: 'setSiteType', type: 'm' },\n      { event: 'setEmail', email: userEmail },\n      { event: 'viewItem', item: sd.ARTWORK._id }\n    )\n  }\n} else {\n  if (pathSplit[1] === 'collect') {\n    // https://www.artsy.net/collect - (ARTWORKS viewHome)\n    //              0          1\n    window.criteo_q.push(\n      { event: 'setAccount', account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER },\n      { event: 'setSiteType', type: 'm' },\n      { event: 'setEmail', email: userEmail },\n      { event: 'viewHome' }\n    )\n  } else if (pathSplit[1] === 'artist' && !pathSplit[3]) {\n    // https://www.artsy.net/artist/:artist_id - (ARTWORKS viewList)\n    //              0          1         2\n    window.criteo_q.push(\n      { event: 'setAccount', account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER },\n      { event: 'setSiteType', type: 'm' },\n      { event: 'setEmail', email: userEmail },\n      {\n        event: 'viewList',\n        item: _.pluck(\n          _.filter(sd.ARTWORKS, function(a) {\n            return a.availability === 'for sale'\n          }),\n          '_id'\n        ),\n      }\n    )\n  }\n}\n"]}]}