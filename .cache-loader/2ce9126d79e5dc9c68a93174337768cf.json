{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/apps/editorial_features/components/gucci/components/App.jsx","dependencies":[{"path":"/Users/eve/development/force/src/desktop/apps/editorial_features/components/gucci/components/App.jsx","mtime":1521064654000},{"path":"/Users/eve/development/force/.babelrc","mtime":1528124541000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\n\nvar _getPrototypeOf = _interopRequireDefault(require(\"@babel/runtime/core-js/object/get-prototype-of\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _debounce2 = _interopRequireDefault(require(\"lodash/debounce\"));\n\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _Helpers = require(\"@artsy/reaction/dist/Components/Helpers\");\n\nvar _fixed_header = require(\"./nav/fixed_header.jsx\");\n\nvar _series_header = require(\"./series/series_header.jsx\");\n\nvar _series_footer = require(\"./series/series_footer.jsx\");\n\nvar _section = require(\"./section/section.jsx\");\n\nvar _templateObject = /*#__PURE__*/ (0, _taggedTemplateLiteral2.default)([\"\\n    padding: 0;\\n  \"], [\"\\n    padding: 0;\\n  \"]);\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inherits2.default)(App, _Component);\n\n  function App() {\n    var _ref;\n\n    var _temp, _this;\n\n    (0, _classCallCheck2.default)(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return (0, _possibleConstructorReturn2.default)(_this, (_temp = _this = (0, _possibleConstructorReturn2.default)(this, (_ref = App.__proto__ || (0, _getPrototypeOf.default)(App)).call.apply(_ref, [this].concat(args))), Object.defineProperty((0, _assertThisInitialized2.default)(_this), \"state\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: {\n        activeSection: _this.props.activeSection,\n        isMobile: _this.props.isMobile,\n        showHeader: false\n      }\n    }), Object.defineProperty((0, _assertThisInitialized2.default)(_this), \"checkWindowSize\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        var isMobile = false;\n\n        if (document.documentElement.clientWidth < 720) {\n          isMobile = true;\n        }\n\n        _this.setState({\n          isMobile: isMobile\n        });\n      }\n    }), Object.defineProperty((0, _assertThisInitialized2.default)(_this), \"inBody\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value(showHeader) {\n        _this.setState({\n          showHeader: showHeader\n        });\n      }\n    }), Object.defineProperty((0, _assertThisInitialized2.default)(_this), \"onChangeSection\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value(index) {\n        var section = _this.props.curation.sections[index];\n\n        _this.setState({\n          activeSection: index\n        });\n\n        document.getElementById(section.slug).scrollIntoView();\n      }\n    }), Object.defineProperty((0, _assertThisInitialized2.default)(_this), \"onEnterSection\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value(index, _ref2) {\n        var previousPosition = _ref2.previousPosition,\n            currentPosition = _ref2.currentPosition;\n        var section = _this.props.curation.sections[index];\n\n        if (previousPosition === 'above' && currentPosition === 'inside') {\n          _this.setState({\n            activeSection: index\n          });\n\n          document.title = section.title;\n          window.history.pushState({}, section.title, \"/gender-equality/\".concat(section.slug));\n        }\n      }\n    }), Object.defineProperty((0, _assertThisInitialized2.default)(_this), \"onLeaveSection\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value(index, _ref3) {\n        var previousPosition = _ref3.previousPosition,\n            currentPosition = _ref3.currentPosition;\n        var nextSection = _this.props.curation.sections[index + 1];\n\n        if (nextSection && previousPosition === 'inside' && currentPosition === 'above') {\n          _this.setState({\n            activeSection: index + 1\n          });\n\n          document.title = nextSection.title;\n          window.history.pushState({}, nextSection.title, \"/gender-equality/\".concat(nextSection.slug));\n        }\n      }\n    }), _temp));\n  }\n\n  (0, _createClass2.default)(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // setup window isMobile\n      this.checkWindowSize();\n      window.addEventListener('resize', (0, _debounce2.default)(this.checkWindowSize, 30));\n      var showHeader = false; // if landing on slug, go to section and show header\n\n      if (this.props.activeSection) {\n        this.onChangeSection(this.props.activeSection);\n      } // if landing scrolled below header, show fixed header\n\n\n      if (window.scrollY > 100) {\n        showHeader = true;\n      }\n\n      this.setState({\n        showHeader: showHeader\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var curation = this.props.curation;\n      var _state = this.state,\n          activeSection = _state.activeSection,\n          isMobile = _state.isMobile,\n          showHeader = _state.showHeader;\n      return _react.default.createElement(\"div\", {\n        className: \"gucci\"\n      }, _react.default.createElement(_fixed_header.FixedHeader // fixed position shows on scroll\n      , {\n        activeSection: activeSection,\n        curation: curation,\n        onChangeSection: this.onChangeSection,\n        isMobile: isMobile,\n        isVisible: showHeader,\n        isOpen: this.props.activeSection\n      }), _react.default.createElement(_series_header.SeriesHeader // relative position always at content top\n      , {\n        activeSection: activeSection,\n        curation: curation,\n        inBody: this.inBody,\n        isMobile: isMobile,\n        onChangeSection: this.onChangeSection\n      }), _react.default.createElement(GucciBody, null, curation.sections.map(function (section, index) {\n        return _react.default.createElement(\"div\", {\n          id: section.slug,\n          key: 'section-' + index\n        }, _react.default.createElement(_section.Section, {\n          section: section,\n          index: index,\n          onEnterSection: _this2.onEnterSection,\n          onLeaveSection: _this2.onLeaveSection\n        }));\n      }), _react.default.createElement(_series_footer.SeriesFooter, {\n        curation: curation,\n        isMobile: isMobile\n      })));\n    }\n  }]);\n  return App;\n}(_react.Component);\n\nexports.default = App;\nObject.defineProperty(App, \"propTypes\", {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  value: {\n    curation: _propTypes.default.object,\n    activeSection: _propTypes.default.number,\n    isMobile: _propTypes.default.bool\n  }\n});\n\nvar GucciBody =\n/*#__PURE__*/\n_styledComponents.default.div.withConfig({\n  displayName: \"App__GucciBody\",\n  componentId: \"s19nxsx3-0\"\n})([\"width:100%;max-width:1240px;margin:0 auto;padding:0 20px;.col{max-width:100%;position:relative;}\", \";\"], _Helpers.pMedia.sm(_templateObject));",{"version":3,"sources":["src/desktop/apps/editorial_features/components/gucci/components/App.jsx"],"names":["App","activeSection","props","isMobile","showHeader","document","documentElement","clientWidth","setState","index","section","curation","sections","getElementById","slug","scrollIntoView","previousPosition","currentPosition","title","window","history","pushState","nextSection","checkWindowSize","addEventListener","onChangeSection","scrollY","state","inBody","map","onEnterSection","onLeaveSection","object","number","bool","GucciBody","div","sm"],"mappings":"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","file":"/Users/eve/development/force/src/desktop/apps/editorial_features/components/gucci/components/App.jsx","sourceRoot":"/Users/eve/development/force","sourcesContent":["import styled from 'styled-components'\nimport PropTypes from 'prop-types'\nimport React, { Component } from 'react'\nimport { debounce } from 'lodash'\nimport { pMedia } from 'reaction/Components/Helpers'\nimport { FixedHeader } from './nav/fixed_header.jsx'\nimport { SeriesHeader } from './series/series_header.jsx'\nimport { SeriesFooter } from './series/series_footer.jsx'\nimport { Section } from './section/section.jsx'\n\nexport default class App extends Component {\n  static propTypes = {\n    curation: PropTypes.object,\n    activeSection: PropTypes.number,\n    isMobile: PropTypes.bool,\n  }\n\n  state = {\n    activeSection: this.props.activeSection,\n    isMobile: this.props.isMobile,\n    showHeader: false,\n  }\n\n  componentDidMount() {\n    // setup window isMobile\n    this.checkWindowSize()\n    window.addEventListener('resize', debounce(this.checkWindowSize, 30))\n    let showHeader = false\n    // if landing on slug, go to section and show header\n    if (this.props.activeSection) {\n      this.onChangeSection(this.props.activeSection)\n    }\n    // if landing scrolled below header, show fixed header\n    if (window.scrollY > 100) {\n      showHeader = true\n    }\n    this.setState({ showHeader })\n  }\n\n  checkWindowSize = () => {\n    let isMobile = false\n    if (document.documentElement.clientWidth < 720) {\n      isMobile = true\n    }\n    this.setState({ isMobile })\n  }\n\n  inBody = (showHeader) => {\n    this.setState({ showHeader })\n  }\n\n  onChangeSection = (index) => {\n    const section = this.props.curation.sections[index]\n    this.setState({ activeSection: index })\n    document.getElementById(section.slug).scrollIntoView()\n  }\n\n  onEnterSection = (index, { previousPosition, currentPosition }) => {\n    const section = this.props.curation.sections[index]\n    if (previousPosition === 'above' && currentPosition === 'inside') {\n      this.setState({ activeSection: index })\n      document.title = section.title\n      window.history.pushState(\n        {},\n        section.title,\n        `/gender-equality/${section.slug}`\n      )\n    }\n  }\n\n  onLeaveSection = (index, { previousPosition, currentPosition }) => {\n    const nextSection = this.props.curation.sections[index + 1]\n    if (\n      nextSection &&\n      previousPosition === 'inside' &&\n      currentPosition === 'above'\n    ) {\n      this.setState({ activeSection: index + 1 })\n      document.title = nextSection.title\n      window.history.pushState(\n        {},\n        nextSection.title,\n        `/gender-equality/${nextSection.slug}`\n      )\n    }\n  }\n\n  render() {\n    const { curation } = this.props\n    const { activeSection, isMobile, showHeader } = this.state\n\n    return (\n      <div className=\"gucci\">\n        <FixedHeader // fixed position shows on scroll\n          activeSection={activeSection}\n          curation={curation}\n          onChangeSection={this.onChangeSection}\n          isMobile={isMobile}\n          isVisible={showHeader}\n          isOpen={this.props.activeSection}\n        />\n\n        <SeriesHeader // relative position always at content top\n          activeSection={activeSection}\n          curation={curation}\n          inBody={this.inBody}\n          isMobile={isMobile}\n          onChangeSection={this.onChangeSection}\n        />\n\n        <GucciBody>\n          {curation.sections.map((section, index) => (\n            <div id={section.slug} key={'section-' + index}>\n              <Section\n                section={section}\n                index={index}\n                onEnterSection={this.onEnterSection}\n                onLeaveSection={this.onLeaveSection}\n              />\n            </div>\n          ))}\n          <SeriesFooter curation={curation} isMobile={isMobile} />\n        </GucciBody>\n      </div>\n    )\n  }\n}\n\nconst GucciBody = styled.div`\n  width: 100%;\n  max-width: 1240px;\n  margin: 0 auto;\n  padding: 0 20px;\n  .col {\n    max-width: 100%;\n    position: relative;\n  }\n  ${pMedia.sm`\n    padding: 0;\n  `};\n`\n"]}]}