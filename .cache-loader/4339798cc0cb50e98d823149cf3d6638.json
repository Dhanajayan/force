{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/apps/consign/client/actions.js","dependencies":[{"path":"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js","mtime":1527619810000},{"path":"/Users/eve/development/force/.babelrc","mtime":1537178749000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\n\n(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nimport _request from 'superagent';\nimport gemup from 'gemup';\nimport get from 'lodash.get';\nimport stepsConfig from \"./steps_config\";\nimport { data as _sd } from 'sharify';\nimport { fetchToken as _fetchToken, formattedLocation } from \"../helpers\";\nimport { find } from 'underscore';\nimport { push } from 'react-router-redux'; // FIXME: Rewire\n\nvar request = _request;\nvar sd = _sd;\nvar fetchToken = _fetchToken; // Action types\n\nexport var ADD_ASSET_ID = 'ADD_ASSET_ID';\nexport var ADD_IMAGE_TO_UPLOADED_IMAGES = 'ADD_IMAGE_TO_UPLOADED_IMAGES';\nexport var CLEAR_ARTIST_SUGGESTIONS = 'CLEAR_ARTIST_SUGGESTIONS';\nexport var CLEAR_ERROR = 'CLEAR_ERROR';\nexport var CLEAR_LOCATION_DATA = 'CLEAR_LOCATION_DATA';\nexport var CLEAR_LOCATION_SUGGESTIONS = 'CLEAR_LOCATION_SUGGESTIONS';\nexport var ERROR_ON_IMAGE = 'ERROR_ON_IMAGE';\nexport var FREEZE_LOCATION_INPUT = 'FREEZE_LOCATION_INPUT';\nexport var HIDE_LOADER = 'HIDE_LOADER';\nexport var HIDE_NOT_CONSIGNING_MESSAGE = 'HIDE_NOT_CONSIGNING_MESSAGE';\nexport var IGNORE_REDIRECT_ON_AUTH = 'IGNORE_REDIRECT_ON_AUTH';\nexport var REMOVE_ERRORED_IMAGE = 'REMOVE_ERRORED_IMAGE';\nexport var REMOVE_UPLOADED_IMAGE = 'REMOVE_UPLOADED_IMAGE';\nexport var SHOW_LOADER = 'SHOW_LOADER';\nexport var SHOW_NOT_CONSIGNING_MESSAGE = 'SHOW_NOT_CONSIGNING_MESSAGE';\nexport var SHOW_RESET_PASSWORD_SUCCESS_MESSAGE = 'SHOW_RESET_PASSWORD_SUCCESS_MESSAGE';\nexport var START_PROCESSING_IMAGE = 'START_PROCESSING_IMAGE';\nexport var STOP_PROCESSING_IMAGE = 'STOP_PROCESSING_IMAGE';\nexport var SUBMISSION_CREATED = 'SUBMISSION_CREATED';\nexport var SUBMISSION_COMPLETED = 'SUBMISSION_COMPLETED';\nexport var SUBMISSION_ERROR = 'SUBMISSION_ERROR';\nexport var SUBMIT_ARTIST = 'SUBMIT_ARTIST';\nexport var UNFREEZE_LOCATION_INPUT = 'UNFREEZE_LOCATION_INPUT';\nexport var UPDATE_ARTIST_AUTOCOMPLETE_VALUE = 'UPDATE_ARTIST_AUTOCOMPLETE_VALUE';\nexport var UPDATE_ARTIST_ID = 'UPDATE_ARTIST_ID';\nexport var UPDATE_ARTIST_NAME = 'UPDATE_ARTIST_NAME';\nexport var UPDATE_ARTIST_SUGGESTIONS = 'UPDATE_ARTIST_SUGGESTIONS';\nexport var UPDATE_AUTH_FORM_STATE = 'UPDATE_AUTH_FORM_STATE';\nexport var UPDATE_CURRENT_STEP = 'UPDATE_CURRENT_STEP';\nexport var UPDATE_ERROR = 'UPDATE_ERROR';\nexport var UPDATE_INPUTS = 'UPDATE_INPUTS';\nexport var UPDATE_LOCATION_AUTOCOMPLETE_VALUE = 'UPDATE_LOCATION_AUTOCOMPLETE_VALUE';\nexport var UPDATE_LOCATION_CITY_VALUE = 'UPDATE_LOCATION_CITY_VALUE';\nexport var UPDATE_LOCATION_SUGGESTIONS = 'UPDATE_LOCATION_SUGGESTIONS';\nexport var UPDATE_LOCATION_VALUES = 'UPDATE_LOCATION_VALUES';\nexport var UPDATE_PROGRESS_BAR = 'UPDATE_PROGRESS_BAR';\nexport var UPDATE_SKIP_PHOTO_SUBMISSION = 'UPDATE_SKIP_PHOTO_SUBMISSION';\nexport var UPDATE_STEPS_WITH_USER = 'UPDATE_STEPS_WITH_USER';\nexport var UPDATE_STEPS_WITHOUT_USER = 'UPDATE_STEPS_WITHOUT_USER';\nexport var UPDATE_SUBMISSION = 'UPDATE_SUBMISSION';\nexport var UPDATE_USER = 'UPDATE_USER';\nexport var UPDATE_USER_PHONE = 'UPDATE_USER_PHONE'; // Action creators\n\nexport function addAssetId(assetId) {\n  return {\n    type: ADD_ASSET_ID,\n    payload: {\n      assetId: assetId\n    }\n  };\n}\nexport function addImageToUploadedImages(fileName, src) {\n  return {\n    type: ADD_IMAGE_TO_UPLOADED_IMAGES,\n    payload: {\n      fileName: fileName,\n      src: src\n    }\n  };\n}\nexport function chooseArtist(value) {\n  return function (dispatch) {\n    dispatch(updateArtistId(value._id));\n    dispatch(updateArtistName(value.name));\n  };\n}\nexport function chooseArtistAdvance() {\n  return function (dispatch) {\n    dispatch(submitArtist());\n    dispatch(push(stepsConfig.describeWork.path));\n  };\n}\nexport function chooseLocation(location) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch, getState) {\n        var parseDetails, placesService;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                parseDetails = function parseDetails(place, status) {\n                  if (status !== window.google.maps.places.PlacesServiceStatus.OK) {\n                    console.error('Unable to reach maps API', status);\n                  } else {\n                    var address_components = place.address_components;\n                    var city = find(address_components, function (comp) {\n                      return comp.types[0] === 'locality';\n                    });\n                    var state = find(address_components, function (comp) {\n                      return comp.types[0] === 'administrative_area_level_1';\n                    });\n                    var country = find(address_components, function (comp) {\n                      return comp.types[0] === 'country';\n                    });\n                    var cityDisplay = city && city.long_name;\n                    var countryDisplay = country && country.long_name;\n                    var stateDisplay = state && state.long_name;\n                    dispatch(updateLocationInputValues(cityDisplay, stateDisplay, countryDisplay));\n                    dispatch(freezeLocationInput());\n                  }\n                };\n\n                _context.prev = 1;\n\n                if (!window.google) {\n                  _context.next = 6;\n                  break;\n                }\n\n                placesService = new window.google.maps.places.PlacesService(document.createElement('div'));\n                _context.next = 6;\n                return placesService.getDetails({\n                  placeId: location.place_id\n                }, parseDetails);\n\n              case 6:\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](1);\n                console.error('(consignments/client/actions.js @ chooseLocation) Error:', _context.t0);\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 8]]);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n}\nexport function clearArtistSuggestions() {\n  return {\n    type: CLEAR_ARTIST_SUGGESTIONS\n  };\n}\nexport function clearError() {\n  return {\n    type: CLEAR_ERROR\n  };\n}\nexport function clearLocationData() {\n  return {\n    type: CLEAR_LOCATION_DATA\n  };\n}\nexport function clearLocationSuggestions() {\n  return {\n    type: CLEAR_LOCATION_SUGGESTIONS\n  };\n}\nexport function completeSubmission() {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(dispatch, getState) {\n        var _getState, _getState$submissionF, submission, submissionIdFromServer, user, token, submissionQueryParam, submissionResponse;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _getState = getState(), _getState$submissionF = _getState.submissionFlow, submission = _getState$submissionF.submission, submissionIdFromServer = _getState$submissionF.submissionIdFromServer, user = _getState$submissionF.user;\n                _context2.next = 4;\n                return fetchToken(user.accessToken);\n\n              case 4:\n                token = _context2.sent;\n                submissionQueryParam = submission.id || submissionIdFromServer;\n                _context2.next = 8;\n                return request.put(\"\".concat(sd.CONVECTION_APP_URL, \"/api/submissions/\").concat(submissionQueryParam)).set('Authorization', \"Bearer \".concat(token)).send({\n                  state: 'submitted'\n                });\n\n              case 8:\n                submissionResponse = _context2.sent;\n                dispatch(updateSubmission(submissionResponse.body));\n                dispatch(submissionCompleted());\n                dispatch(hideLoader());\n                dispatch(push(stepsConfig.thankYou.submissionPath.replace(':id', submissionResponse.body.id)));\n                _context2.next = 21;\n                break;\n\n              case 15:\n                _context2.prev = 15;\n                _context2.t0 = _context2[\"catch\"](0);\n                dispatch(hideLoader());\n                dispatch(submissionError('convection_complete_submission'));\n                dispatch(updateError('Unable to submit at this time.'));\n                console.error('(consignments/client/actions.js @ completeSubmission) Error:', _context2.t0);\n\n              case 21:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 15]]);\n      }));\n\n      return function (_x3, _x4) {\n        return _ref2.apply(this, arguments);\n      };\n    }()\n  );\n}\nexport function createSubmission() {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(dispatch, getState) {\n        var _getState2, _getState2$submission, inputs, submission, user, token, submissionBody, userBody;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _getState2 = getState(), _getState2$submission = _getState2.submissionFlow, inputs = _getState2$submission.inputs, submission = _getState2$submission.submission, user = _getState2$submission.user;\n                _context3.next = 4;\n                return fetchToken(user.accessToken);\n\n              case 4:\n                token = _context3.sent;\n\n                if (!submission.id) {\n                  _context3.next = 11;\n                  break;\n                }\n\n                _context3.next = 8;\n                return request.put(\"\".concat(sd.CONVECTION_APP_URL, \"/api/submissions/\").concat(submission.id)).set('Authorization', \"Bearer \".concat(token)).send(inputs);\n\n              case 8:\n                submissionBody = _context3.sent;\n                _context3.next = 14;\n                break;\n\n              case 11:\n                _context3.next = 13;\n                return request.post(\"\".concat(sd.CONVECTION_APP_URL, \"/api/submissions\")).set('Authorization', \"Bearer \".concat(token)).send(inputs);\n\n              case 13:\n                submissionBody = _context3.sent;\n\n              case 14:\n                if (!(user.phone !== inputs.phone)) {\n                  _context3.next = 19;\n                  break;\n                }\n\n                _context3.next = 17;\n                return request.put(\"\".concat(sd.API_URL, \"/api/v1/me\")).set('X-ACCESS-TOKEN', user.accessToken).send({\n                  phone: inputs.phone\n                });\n\n              case 17:\n                userBody = _context3.sent;\n                dispatch(updateUserPhone(userBody.body.phone));\n\n              case 19:\n                dispatch(submissionCreated(submissionBody.body.id));\n                dispatch(updateSubmission(submissionBody.body)); // update state to reflect current submission\n\n                dispatch(hideLoader());\n                dispatch(push(stepsConfig.describeWork.submissionPath.replace(':id', submissionBody.body.id)));\n                dispatch(push(stepsConfig.uploadPhotos.submissionPath.replace(':id', submissionBody.body.id)));\n                _context3.next = 32;\n                break;\n\n              case 26:\n                _context3.prev = 26;\n                _context3.t0 = _context3[\"catch\"](0);\n                dispatch(hideLoader());\n                dispatch(submissionError('convection_create'));\n                dispatch(updateError('Unable to submit at this time.'));\n                console.error('(consignments/client/actions.js @ createSubmission) Error:', _context3.t0);\n\n              case 32:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 26]]);\n      }));\n\n      return function (_x5, _x6) {\n        return _ref3.apply(this, arguments);\n      };\n    }()\n  );\n}\nexport function errorOnImage(fileName) {\n  return {\n    type: ERROR_ON_IMAGE,\n    payload: {\n      fileName: fileName\n    }\n  };\n}\nexport function fetchArtistSuggestions(value) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref4 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4(dispatch, getState) {\n        var _getState3, user, res;\n\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _getState3 = getState(), user = _getState3.submissionFlow.user;\n                _context4.next = 4;\n                return request.get(\"\".concat(sd.API_URL, \"/api/v1/match/artists\")).query({\n                  visible_to_public: 'true',\n                  term: value\n                }).set('X-ACCESS-TOKEN', user.accessToken);\n\n              case 4:\n                res = _context4.sent;\n                dispatch(updateArtistSuggestions(res.body));\n                dispatch(hideNotConsigningMessage());\n                _context4.next = 12;\n                break;\n\n              case 9:\n                _context4.prev = 9;\n                _context4.t0 = _context4[\"catch\"](0);\n                console.error('(consignments/client/actions.js @ fetchArtistSuggestions) Error:', _context4.t0);\n\n              case 12:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 9]]);\n      }));\n\n      return function (_x7, _x8) {\n        return _ref4.apply(this, arguments);\n      };\n    }()\n  );\n}\nexport function fetchLocationSuggestions(value) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref5 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5(dispatch, getState) {\n        var displaySuggestions, autocompleteService;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                displaySuggestions = function displaySuggestions(predictions, status) {\n                  if (status !== window.google.maps.places.PlacesServiceStatus.OK) {\n                    console.error('Unable to reach maps API', status);\n                  } else {\n                    dispatch(updateLocationSuggestions(predictions));\n                  }\n                };\n\n                _context5.prev = 1;\n\n                if (!window.google) {\n                  _context5.next = 6;\n                  break;\n                }\n\n                autocompleteService = new window.google.maps.places.AutocompleteService();\n                _context5.next = 6;\n                return autocompleteService.getPlacePredictions({\n                  input: value,\n                  types: ['(cities)']\n                }, displaySuggestions);\n\n              case 6:\n                _context5.next = 11;\n                break;\n\n              case 8:\n                _context5.prev = 8;\n                _context5.t0 = _context5[\"catch\"](1);\n                console.error('(consignments/client/actions.js @ fetchLocationSuggestions) Error:', _context5.t0);\n\n              case 11:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[1, 8]]);\n      }));\n\n      return function (_x9, _x10) {\n        return _ref5.apply(this, arguments);\n      };\n    }()\n  );\n}\nexport function freezeLocationInput() {\n  return {\n    type: FREEZE_LOCATION_INPUT\n  };\n}\nexport function handleImageUpload(file) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref6 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6(dispatch, getState) {\n        var options;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                try {\n                  if (file.type === 'image/jpeg' || file.type === 'image/png') {\n                    options = {\n                      acl: 'private',\n                      app: sd.CONVECTION_GEMINI_APP,\n                      key: sd.GEMINI_S3_ACCESS_KEY,\n                      fail: function fail(_err) {\n                        dispatch(errorOnImage(file.name));\n                      },\n                      add: function add(src) {\n                        dispatch(addImageToUploadedImages(file.name, src));\n                        dispatch(startProcessingImage(file.name));\n                      },\n                      progress: function progress(percent) {\n                        dispatch(updateProgressBar(file.name, percent));\n                      },\n                      done: function done(src, geminiKey, bucket) {\n                        var key = \"\".concat(geminiKey, \"/\").concat(file.name);\n                        dispatch(uploadImageToGemini(key, bucket, file.name));\n                      }\n                    };\n                    gemup(file, options);\n                  } else {\n                    dispatch(addImageToUploadedImages(file.name));\n                    dispatch(errorOnImage(file.name));\n                  }\n                } catch (err) {\n                  console.error('(consignments/client/actions.js @ handleImageUpload) Error:', err);\n                }\n\n              case 1:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      return function (_x11, _x12) {\n        return _ref6.apply(this, arguments);\n      };\n    }()\n  );\n}\nexport function hideNotConsigningMessage() {\n  return {\n    type: HIDE_NOT_CONSIGNING_MESSAGE\n  };\n}\nexport function ignoreRedirectOnAuth() {\n  return {\n    type: IGNORE_REDIRECT_ON_AUTH\n  };\n}\nexport function logIn(values) {\n  var accountCreated = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref7 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee7(dispatch, getState) {\n        var _getState4, redirectOnAuth, options, user, errorMessage;\n\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                dispatch(showLoader());\n                _getState4 = getState(), redirectOnAuth = _getState4.submissionFlow.redirectOnAuth;\n                options = {\n                  email: values.email,\n                  password: values.password,\n                  _csrf: sd.CSRF_TOKEN\n                };\n                _context7.next = 6;\n                return request.post(sd.AP.loginPagePath).set('Content-Type', 'application/json').set('Accept', 'application/json').set('X-Requested-With', 'XMLHttpRequest').send(options);\n\n              case 6:\n                user = _context7.sent;\n                dispatch(updateUser(user.body.user, accountCreated));\n                redirectOnAuth && dispatch(push(stepsConfig.chooseArtist.path));\n                dispatch(clearError());\n                dispatch(hideLoader());\n                _context7.next = 19;\n                break;\n\n              case 13:\n                _context7.prev = 13;\n                _context7.t0 = _context7[\"catch\"](0);\n                errorMessage = get(_context7.t0, 'response.body.error', false);\n                dispatch(updateError(errorMessage));\n                dispatch(hideLoader());\n                console.error('(consignments/client/actions.js @ logIn) Error:', _context7.t0);\n\n              case 19:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[0, 13]]);\n      }));\n\n      return function (_x13, _x14) {\n        return _ref7.apply(this, arguments);\n      };\n    }()\n  );\n}\nexport function removeErroredImage(fileName) {\n  return {\n    type: REMOVE_ERRORED_IMAGE,\n    payload: {\n      fileName: fileName\n    }\n  };\n}\nexport function removeImage(fileName) {\n  return function (dispatch) {\n    dispatch(removeErroredImage(fileName));\n    dispatch(stopProcessingImage(fileName));\n    dispatch(removeUploadedImage(fileName));\n  };\n}\nexport function removeUploadedImage(fileName) {\n  return {\n    type: REMOVE_UPLOADED_IMAGE,\n    payload: {\n      fileName: fileName\n    }\n  };\n}\nexport function resetPassword(values) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref8 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee8(dispatch, getState) {\n        var options;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.prev = 0;\n                options = {\n                  email: values.email\n                };\n                _context8.next = 4;\n                return request.post(\"\".concat(sd.API_URL, \"/api/v1/users/send_reset_password_instructions\")).set('Content-Type', 'application/json').set('Accept', 'application/json').set('X-XAPP-TOKEN', sd.ARTSY_XAPP_TOKEN).send(options);\n\n              case 4:\n                dispatch(clearError());\n                dispatch(showResetPasswordSuccessMessage());\n                _context8.next = 11;\n                break;\n\n              case 8:\n                _context8.prev = 8;\n                _context8.t0 = _context8[\"catch\"](0);\n                dispatch(updateError(_context8.t0.response.body.error));\n\n              case 11:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this, [[0, 8]]);\n      }));\n\n      return function (_x15, _x16) {\n        return _ref8.apply(this, arguments);\n      };\n    }()\n  );\n}\nexport function scrubLocation() {\n  return function (dispatch, getState) {\n    var _getState5 = getState(),\n        _getState5$submission = _getState5.submissionFlow,\n        inputs = _getState5$submission.inputs,\n        locationAutocompleteValue = _getState5$submission.locationAutocompleteValue; // if user has selected from the autocomplete, one of these should be filled\n    // in the off-chance it's not, stick the outlier data in the city field\n\n\n    if (!(inputs.location_city || inputs.location_country || inputs.location_state) && locationAutocompleteValue) {\n      dispatch(updateLocationCityValue(locationAutocompleteValue));\n    }\n  };\n}\nexport function showNotConsigningMessage() {\n  return {\n    type: SHOW_NOT_CONSIGNING_MESSAGE\n  };\n}\nexport function showResetPasswordSuccessMessage() {\n  return {\n    type: SHOW_RESET_PASSWORD_SUCCESS_MESSAGE\n  };\n}\nexport function signUp(values) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref9 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee9(dispatch, getState) {\n        var options, errorMessage;\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.prev = 0;\n                dispatch(showLoader());\n                options = {\n                  email: values.email,\n                  name: values.name,\n                  password: values.password,\n                  _csrf: sd.CSRF_TOKEN\n                };\n                _context9.next = 5;\n                return request.post(sd.AP.signupPagePath).set('Content-Type', 'application/json').set('Accept', 'application/json').set('X-Requested-With', 'XMLHttpRequest').send(options);\n\n              case 5:\n                dispatch(logIn(values, true));\n                _context9.next = 14;\n                break;\n\n              case 8:\n                _context9.prev = 8;\n                _context9.t0 = _context9[\"catch\"](0);\n                errorMessage = get(_context9.t0, 'response.body.error', false);\n                dispatch(updateError(errorMessage));\n                dispatch(hideLoader());\n                console.error('(consignments/client/actions.js @ signUp) Error:', _context9.t0);\n\n              case 14:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this, [[0, 8]]);\n      }));\n\n      return function (_x17, _x18) {\n        return _ref9.apply(this, arguments);\n      };\n    }()\n  );\n}\nexport function startProcessingImage(fileName) {\n  return {\n    type: START_PROCESSING_IMAGE,\n    payload: {\n      fileName: fileName\n    }\n  };\n}\nexport function stopProcessingImage(fileName) {\n  return {\n    type: STOP_PROCESSING_IMAGE,\n    payload: {\n      fileName: fileName\n    }\n  };\n}\nexport function submitArtist() {\n  return {\n    type: SUBMIT_ARTIST\n  };\n}\nexport function submitDescribeWork(values) {\n  return function (dispatch) {\n    dispatch(clearError());\n    dispatch(showLoader());\n    dispatch(updateInputs(values)); // update the inputs\n\n    dispatch(scrubLocation());\n    dispatch(createSubmission()); // create the submission in convection\n  };\n}\nexport function selectPhoto(file) {\n  return function (dispatch) {\n    dispatch(handleImageUpload(file)); // update the inputs\n  };\n}\nexport function showLoader() {\n  return {\n    type: SHOW_LOADER\n  };\n}\nexport function hideLoader() {\n  return {\n    type: HIDE_LOADER\n  };\n}\nexport function submissionCreated(submissionId) {\n  return {\n    type: SUBMISSION_CREATED,\n    payload: {\n      submissionId: submissionId\n    }\n  };\n}\nexport function submissionCompleted() {\n  return {\n    type: SUBMISSION_COMPLETED\n  };\n}\nexport function submissionError(errorType) {\n  return {\n    type: SUBMISSION_ERROR,\n    payload: {\n      errorType: errorType\n    }\n  };\n}\nexport function submitPhoto() {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref10 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee10(dispatch, getState) {\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                dispatch(showLoader());\n\n                try {\n                  dispatch(completeSubmission());\n                } catch (err) {\n                  dispatch(hideLoader());\n                  dispatch(updateError('Unable to submit at this time.'));\n                  console.error('(consignments/client/actions.js @ submitPhoto) Error:', err);\n                }\n\n              case 2:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      return function (_x19, _x20) {\n        return _ref10.apply(this, arguments);\n      };\n    }()\n  );\n}\nexport function unfreezeLocationInput() {\n  return {\n    type: UNFREEZE_LOCATION_INPUT\n  };\n}\nexport function updateArtistAutocompleteValue(value) {\n  return {\n    type: UPDATE_ARTIST_AUTOCOMPLETE_VALUE,\n    payload: {\n      value: value\n    }\n  };\n}\nexport function updateArtistId(artistId) {\n  return {\n    type: UPDATE_ARTIST_ID,\n    payload: {\n      artistId: artistId\n    }\n  };\n}\nexport function updateArtistName(artistName) {\n  return {\n    type: UPDATE_ARTIST_NAME,\n    payload: {\n      artistName: artistName\n    }\n  };\n}\nexport function updateArtistSuggestions(suggestions) {\n  return {\n    type: UPDATE_ARTIST_SUGGESTIONS,\n    payload: {\n      suggestions: suggestions\n    }\n  };\n}\nexport function updateAuthFormState(state) {\n  return {\n    type: UPDATE_AUTH_FORM_STATE,\n    payload: {\n      state: state\n    }\n  };\n}\nexport function updateAuthFormStateAndClearError(state) {\n  return function (dispatch) {\n    dispatch(updateAuthFormState(state));\n    dispatch(clearError());\n  };\n}\nexport function updateError(error) {\n  return {\n    type: UPDATE_ERROR,\n    payload: {\n      error: error\n    }\n  };\n}\nexport function updateCurrentStep(step) {\n  return {\n    type: UPDATE_CURRENT_STEP,\n    payload: {\n      step: step\n    }\n  };\n}\nexport function updateInputs(inputs) {\n  if (inputs.edition === false) {\n    inputs.edition_number = '';\n    inputs.edition_size = 0;\n  }\n\n  return {\n    type: UPDATE_INPUTS,\n    payload: {\n      inputs: inputs\n    }\n  };\n}\nexport function updateLocationAutocomplete(value) {\n  return function (dispatch) {\n    dispatch(clearLocationData());\n    dispatch(updateLocationAutocompleteValue(value));\n  };\n}\nexport function updateLocationAutocompleteValue(value) {\n  return {\n    type: UPDATE_LOCATION_AUTOCOMPLETE_VALUE,\n    payload: {\n      value: value\n    }\n  };\n}\nexport function updateLocationCityValue(city) {\n  return {\n    type: UPDATE_LOCATION_CITY_VALUE,\n    payload: {\n      city: city\n    }\n  };\n}\nexport function updateLocationInputValues(city, state, country) {\n  return {\n    type: UPDATE_LOCATION_VALUES,\n    payload: {\n      city: city,\n      state: state,\n      country: country\n    }\n  };\n}\nexport function updateLocationFromSubmissionAndFreeze(city, state, country) {\n  return function (dispatch, getState) {\n    var _getState6 = getState(),\n        _getState6$submission = _getState6.submissionFlow.submission,\n        location_city = _getState6$submission.location_city,\n        location_state = _getState6$submission.location_state,\n        location_country = _getState6$submission.location_country;\n\n    var location = formattedLocation(location_city, location_state, location_country);\n    dispatch(updateLocationAutocompleteValue(location));\n    dispatch(freezeLocationInput());\n  };\n}\nexport function updateLocationSuggestions(suggestions) {\n  return {\n    type: UPDATE_LOCATION_SUGGESTIONS,\n    payload: {\n      suggestions: suggestions\n    }\n  };\n}\nexport function updateProgressBar(fileName, percent) {\n  return {\n    type: UPDATE_PROGRESS_BAR,\n    payload: {\n      fileName: fileName,\n      percent: percent\n    }\n  };\n}\nexport function updateSkipPhotoSubmission(skip) {\n  return {\n    type: UPDATE_SKIP_PHOTO_SUBMISSION,\n    payload: {\n      skip: skip\n    }\n  };\n}\nexport function updateStepsWithUser() {\n  return {\n    type: UPDATE_STEPS_WITH_USER\n  };\n}\nexport function updateStepsWithoutUser() {\n  return {\n    type: UPDATE_STEPS_WITHOUT_USER\n  };\n}\nexport function updateSubmission(submission) {\n  return {\n    type: UPDATE_SUBMISSION,\n    payload: {\n      submission: submission\n    }\n  };\n}\nexport function updateUser(user, accountCreated) {\n  return {\n    type: UPDATE_USER,\n    payload: {\n      user: user,\n      accountCreated: accountCreated\n    }\n  };\n}\nexport function updateUserPhone(phone) {\n  return {\n    type: UPDATE_USER_PHONE,\n    payload: {\n      phone: phone\n    }\n  };\n}\nexport function uploadImageToConvection(geminiToken, fileName) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref11 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee11(dispatch, getState) {\n        var _getState7, _getState7$submission, submission, submissionIdFromServer, user, submissionId, token, inputs, assetResponse, assetId;\n\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                _context11.prev = 0;\n                _getState7 = getState(), _getState7$submission = _getState7.submissionFlow, submission = _getState7$submission.submission, submissionIdFromServer = _getState7$submission.submissionIdFromServer, user = _getState7$submission.user;\n                submissionId = submission.id || submissionIdFromServer;\n                _context11.next = 5;\n                return fetchToken(user.accessToken);\n\n              case 5:\n                token = _context11.sent;\n                inputs = {\n                  submission_id: submissionId,\n                  gemini_token: geminiToken\n                };\n                _context11.next = 9;\n                return request.post(\"\".concat(sd.CONVECTION_APP_URL, \"/api/assets\")).set('Authorization', \"Bearer \".concat(token)).send(inputs);\n\n              case 9:\n                assetResponse = _context11.sent;\n                assetId = assetResponse.body.id;\n                dispatch(stopProcessingImage(fileName));\n                dispatch(addAssetId(assetId));\n                _context11.next = 19;\n                break;\n\n              case 15:\n                _context11.prev = 15;\n                _context11.t0 = _context11[\"catch\"](0);\n                dispatch(errorOnImage(fileName));\n                console.error('(consignments/client/actions.js @ uploadImageToConvection) Error:', _context11.t0);\n\n              case 19:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this, [[0, 15]]);\n      }));\n\n      return function (_x21, _x22) {\n        return _ref11.apply(this, arguments);\n      };\n    }()\n  );\n}\nexport function uploadImageToGemini(key, bucket, fileName) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref12 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee12(dispatch, getState) {\n        var _getState8, _getState8$submission, submission, submissionIdFromServer, submissionId, inputs, response, token;\n\n        return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                _context12.prev = 0;\n                _getState8 = getState(), _getState8$submission = _getState8.submissionFlow, submission = _getState8$submission.submission, submissionIdFromServer = _getState8$submission.submissionIdFromServer;\n                submissionId = submission.id || submissionIdFromServer;\n                inputs = {\n                  entry: {\n                    template_key: sd.CONVECTION_GEMINI_APP,\n                    source_key: key,\n                    source_bucket: bucket,\n                    metadata: {\n                      id: submissionId,\n                      _type: 'Consignment'\n                    }\n                  }\n                };\n                _context12.next = 6;\n                return request.post(\"\".concat(sd.GEMINI_APP, \"/entries.json\")).set('Authorization', \"Basic \".concat(encode(sd.CONVECTION_GEMINI_APP, ''))).send(inputs);\n\n              case 6:\n                response = _context12.sent;\n                token = response.body.token;\n                dispatch(uploadImageToConvection(token, fileName));\n                _context12.next = 15;\n                break;\n\n              case 11:\n                _context12.prev = 11;\n                _context12.t0 = _context12[\"catch\"](0);\n                dispatch(errorOnImage(fileName));\n                console.error('(consignments/client/actions.js @ uploadImageToGemini) Error:', _context12.t0);\n\n              case 15:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this, [[0, 11]]);\n      }));\n\n      return function (_x23, _x24) {\n        return _ref12.apply(this, arguments);\n      };\n    }()\n  );\n} // helpers\n\nfunction encode(key, secret) {\n  return btoa(unescape(encodeURIComponent([key, secret].join(':'))));\n}\n\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(request, \"request\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(sd, \"sd\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(fetchToken, \"fetchToken\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(ADD_ASSET_ID, \"ADD_ASSET_ID\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(ADD_IMAGE_TO_UPLOADED_IMAGES, \"ADD_IMAGE_TO_UPLOADED_IMAGES\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(CLEAR_ARTIST_SUGGESTIONS, \"CLEAR_ARTIST_SUGGESTIONS\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(CLEAR_ERROR, \"CLEAR_ERROR\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(CLEAR_LOCATION_DATA, \"CLEAR_LOCATION_DATA\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(CLEAR_LOCATION_SUGGESTIONS, \"CLEAR_LOCATION_SUGGESTIONS\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(ERROR_ON_IMAGE, \"ERROR_ON_IMAGE\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(FREEZE_LOCATION_INPUT, \"FREEZE_LOCATION_INPUT\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(HIDE_LOADER, \"HIDE_LOADER\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(HIDE_NOT_CONSIGNING_MESSAGE, \"HIDE_NOT_CONSIGNING_MESSAGE\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(IGNORE_REDIRECT_ON_AUTH, \"IGNORE_REDIRECT_ON_AUTH\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(REMOVE_ERRORED_IMAGE, \"REMOVE_ERRORED_IMAGE\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(REMOVE_UPLOADED_IMAGE, \"REMOVE_UPLOADED_IMAGE\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(SHOW_LOADER, \"SHOW_LOADER\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(SHOW_NOT_CONSIGNING_MESSAGE, \"SHOW_NOT_CONSIGNING_MESSAGE\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(SHOW_RESET_PASSWORD_SUCCESS_MESSAGE, \"SHOW_RESET_PASSWORD_SUCCESS_MESSAGE\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(START_PROCESSING_IMAGE, \"START_PROCESSING_IMAGE\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(STOP_PROCESSING_IMAGE, \"STOP_PROCESSING_IMAGE\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(SUBMISSION_CREATED, \"SUBMISSION_CREATED\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(SUBMISSION_COMPLETED, \"SUBMISSION_COMPLETED\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(SUBMISSION_ERROR, \"SUBMISSION_ERROR\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(SUBMIT_ARTIST, \"SUBMIT_ARTIST\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(UNFREEZE_LOCATION_INPUT, \"UNFREEZE_LOCATION_INPUT\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(UPDATE_ARTIST_AUTOCOMPLETE_VALUE, \"UPDATE_ARTIST_AUTOCOMPLETE_VALUE\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(UPDATE_ARTIST_ID, \"UPDATE_ARTIST_ID\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(UPDATE_ARTIST_NAME, \"UPDATE_ARTIST_NAME\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(UPDATE_ARTIST_SUGGESTIONS, \"UPDATE_ARTIST_SUGGESTIONS\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(UPDATE_AUTH_FORM_STATE, \"UPDATE_AUTH_FORM_STATE\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(UPDATE_CURRENT_STEP, \"UPDATE_CURRENT_STEP\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(UPDATE_ERROR, \"UPDATE_ERROR\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(UPDATE_INPUTS, \"UPDATE_INPUTS\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(UPDATE_LOCATION_AUTOCOMPLETE_VALUE, \"UPDATE_LOCATION_AUTOCOMPLETE_VALUE\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(UPDATE_LOCATION_CITY_VALUE, \"UPDATE_LOCATION_CITY_VALUE\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(UPDATE_LOCATION_SUGGESTIONS, \"UPDATE_LOCATION_SUGGESTIONS\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(UPDATE_LOCATION_VALUES, \"UPDATE_LOCATION_VALUES\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(UPDATE_PROGRESS_BAR, \"UPDATE_PROGRESS_BAR\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(UPDATE_SKIP_PHOTO_SUBMISSION, \"UPDATE_SKIP_PHOTO_SUBMISSION\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(UPDATE_STEPS_WITH_USER, \"UPDATE_STEPS_WITH_USER\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(UPDATE_STEPS_WITHOUT_USER, \"UPDATE_STEPS_WITHOUT_USER\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(UPDATE_SUBMISSION, \"UPDATE_SUBMISSION\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(UPDATE_USER, \"UPDATE_USER\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(UPDATE_USER_PHONE, \"UPDATE_USER_PHONE\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(addAssetId, \"addAssetId\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(addImageToUploadedImages, \"addImageToUploadedImages\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(chooseArtist, \"chooseArtist\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(chooseArtistAdvance, \"chooseArtistAdvance\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(chooseLocation, \"chooseLocation\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(clearArtistSuggestions, \"clearArtistSuggestions\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(clearError, \"clearError\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(clearLocationData, \"clearLocationData\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(clearLocationSuggestions, \"clearLocationSuggestions\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(completeSubmission, \"completeSubmission\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(createSubmission, \"createSubmission\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(errorOnImage, \"errorOnImage\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(fetchArtistSuggestions, \"fetchArtistSuggestions\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(fetchLocationSuggestions, \"fetchLocationSuggestions\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(freezeLocationInput, \"freezeLocationInput\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(handleImageUpload, \"handleImageUpload\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(hideNotConsigningMessage, \"hideNotConsigningMessage\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(ignoreRedirectOnAuth, \"ignoreRedirectOnAuth\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(logIn, \"logIn\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(removeErroredImage, \"removeErroredImage\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(removeImage, \"removeImage\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(removeUploadedImage, \"removeUploadedImage\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(resetPassword, \"resetPassword\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(scrubLocation, \"scrubLocation\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(showNotConsigningMessage, \"showNotConsigningMessage\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(showResetPasswordSuccessMessage, \"showResetPasswordSuccessMessage\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(signUp, \"signUp\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(startProcessingImage, \"startProcessingImage\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(stopProcessingImage, \"stopProcessingImage\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(submitArtist, \"submitArtist\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(submitDescribeWork, \"submitDescribeWork\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(selectPhoto, \"selectPhoto\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(showLoader, \"showLoader\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(hideLoader, \"hideLoader\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(submissionCreated, \"submissionCreated\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(submissionCompleted, \"submissionCompleted\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(submissionError, \"submissionError\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(submitPhoto, \"submitPhoto\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(unfreezeLocationInput, \"unfreezeLocationInput\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateArtistAutocompleteValue, \"updateArtistAutocompleteValue\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateArtistId, \"updateArtistId\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateArtistName, \"updateArtistName\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateArtistSuggestions, \"updateArtistSuggestions\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateAuthFormState, \"updateAuthFormState\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateAuthFormStateAndClearError, \"updateAuthFormStateAndClearError\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateError, \"updateError\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateCurrentStep, \"updateCurrentStep\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateInputs, \"updateInputs\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateLocationAutocomplete, \"updateLocationAutocomplete\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateLocationAutocompleteValue, \"updateLocationAutocompleteValue\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateLocationCityValue, \"updateLocationCityValue\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateLocationInputValues, \"updateLocationInputValues\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateLocationFromSubmissionAndFreeze, \"updateLocationFromSubmissionAndFreeze\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateLocationSuggestions, \"updateLocationSuggestions\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateProgressBar, \"updateProgressBar\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateSkipPhotoSubmission, \"updateSkipPhotoSubmission\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateStepsWithUser, \"updateStepsWithUser\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateStepsWithoutUser, \"updateStepsWithoutUser\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateSubmission, \"updateSubmission\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateUser, \"updateUser\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(updateUserPhone, \"updateUserPhone\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(uploadImageToConvection, \"uploadImageToConvection\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(uploadImageToGemini, \"uploadImageToGemini\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  reactHotLoader.register(encode, \"encode\", \"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/eve/development/force/src/desktop/apps/consign/client/actions.js"],"names":["_request","gemup","get","stepsConfig","data","_sd","fetchToken","_fetchToken","formattedLocation","find","push","request","sd","ADD_ASSET_ID","ADD_IMAGE_TO_UPLOADED_IMAGES","CLEAR_ARTIST_SUGGESTIONS","CLEAR_ERROR","CLEAR_LOCATION_DATA","CLEAR_LOCATION_SUGGESTIONS","ERROR_ON_IMAGE","FREEZE_LOCATION_INPUT","HIDE_LOADER","HIDE_NOT_CONSIGNING_MESSAGE","IGNORE_REDIRECT_ON_AUTH","REMOVE_ERRORED_IMAGE","REMOVE_UPLOADED_IMAGE","SHOW_LOADER","SHOW_NOT_CONSIGNING_MESSAGE","SHOW_RESET_PASSWORD_SUCCESS_MESSAGE","START_PROCESSING_IMAGE","STOP_PROCESSING_IMAGE","SUBMISSION_CREATED","SUBMISSION_COMPLETED","SUBMISSION_ERROR","SUBMIT_ARTIST","UNFREEZE_LOCATION_INPUT","UPDATE_ARTIST_AUTOCOMPLETE_VALUE","UPDATE_ARTIST_ID","UPDATE_ARTIST_NAME","UPDATE_ARTIST_SUGGESTIONS","UPDATE_AUTH_FORM_STATE","UPDATE_CURRENT_STEP","UPDATE_ERROR","UPDATE_INPUTS","UPDATE_LOCATION_AUTOCOMPLETE_VALUE","UPDATE_LOCATION_CITY_VALUE","UPDATE_LOCATION_SUGGESTIONS","UPDATE_LOCATION_VALUES","UPDATE_PROGRESS_BAR","UPDATE_SKIP_PHOTO_SUBMISSION","UPDATE_STEPS_WITH_USER","UPDATE_STEPS_WITHOUT_USER","UPDATE_SUBMISSION","UPDATE_USER","UPDATE_USER_PHONE","addAssetId","assetId","type","payload","addImageToUploadedImages","fileName","src","chooseArtist","value","dispatch","updateArtistId","_id","updateArtistName","name","chooseArtistAdvance","submitArtist","describeWork","path","chooseLocation","location","getState","parseDetails","place","status","window","google","maps","places","PlacesServiceStatus","OK","console","error","address_components","city","comp","types","state","country","cityDisplay","long_name","countryDisplay","stateDisplay","updateLocationInputValues","freezeLocationInput","placesService","PlacesService","document","createElement","getDetails","placeId","place_id","clearArtistSuggestions","clearError","clearLocationData","clearLocationSuggestions","completeSubmission","submissionFlow","submission","submissionIdFromServer","user","accessToken","token","submissionQueryParam","id","put","CONVECTION_APP_URL","set","send","submissionResponse","updateSubmission","body","submissionCompleted","hideLoader","thankYou","submissionPath","replace","submissionError","updateError","createSubmission","inputs","submissionBody","post","phone","API_URL","userBody","updateUserPhone","submissionCreated","uploadPhotos","errorOnImage","fetchArtistSuggestions","query","visible_to_public","term","res","updateArtistSuggestions","hideNotConsigningMessage","fetchLocationSuggestions","displaySuggestions","predictions","updateLocationSuggestions","autocompleteService","AutocompleteService","getPlacePredictions","input","handleImageUpload","file","options","acl","app","CONVECTION_GEMINI_APP","key","GEMINI_S3_ACCESS_KEY","fail","_err","add","startProcessingImage","progress","percent","updateProgressBar","done","geminiKey","bucket","uploadImageToGemini","err","ignoreRedirectOnAuth","logIn","values","accountCreated","showLoader","redirectOnAuth","email","password","_csrf","CSRF_TOKEN","AP","loginPagePath","updateUser","errorMessage","removeErroredImage","removeImage","stopProcessingImage","removeUploadedImage","resetPassword","ARTSY_XAPP_TOKEN","showResetPasswordSuccessMessage","response","scrubLocation","locationAutocompleteValue","location_city","location_country","location_state","updateLocationCityValue","showNotConsigningMessage","signUp","signupPagePath","submitDescribeWork","updateInputs","selectPhoto","submissionId","errorType","submitPhoto","unfreezeLocationInput","updateArtistAutocompleteValue","artistId","artistName","suggestions","updateAuthFormState","updateAuthFormStateAndClearError","updateCurrentStep","step","edition","edition_number","edition_size","updateLocationAutocomplete","updateLocationAutocompleteValue","updateLocationFromSubmissionAndFreeze","updateSkipPhotoSubmission","skip","updateStepsWithUser","updateStepsWithoutUser","uploadImageToConvection","geminiToken","submission_id","gemini_token","assetResponse","entry","template_key","source_key","source_bucket","metadata","_type","GEMINI_APP","encode","secret","btoa","unescape","encodeURIComponent","join"],"mappings":"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AC,oB;0BACAC,qB;0BACAC,W;0BACAC,2B;0BACAC,mC;0BAEAC,sB;0BACAC,qB;0BACAC,kB;0BACAC,oB;0BACAC,gB;0BACAC,a;0BACAC,uB;0BACAC,gC;0BAEAC,gB;0BACAC,kB;0BACAC,yB;0BACAC,sB;0BACAC,mB;0BACAC,Y;0BACAC,a;0BACAC,kC;0BAEAC,0B;0BACAC,2B;0BACAC,sB;0BACAC,mB;0BACAC,4B;0BACAC,sB;0BACAC,yB;0BACAC,iB;0BACAC,W;0BACAC,iB;0BAGGC,U;0BASAI,wB;0BAUAG,Y;0BAOAO,mB;0BAOAI,c;0BAkDAiC,sB;0BAMAC,U;0BAMAC,iB;0BAMAC,wB;0BAMAC,kB;0BAqCAuB,gB;0BA0DAU,Y;0BASAC,sB;0BAmBAO,wB;0BA2BArD,mB;0BAMA6D,iB;0BAqCAT,wB;0BAMA6B,oB;0BAMAC,K;0BAgCAa,kB;0BASAC,W;0BAQAE,mB;0BASAC,a;0BAoBAI,a;0BAkBAM,wB;0BAMAR,+B;0BAMAS,M;0BA2BAtC,oB;0BASAyB,mB;0BASA7H,Y;0BAMA4I,kB;0BAUAE,W;0BAMA7B,U;0BAMAxD,U;0BAMAc,iB;0BASAf,mB;0BAMAK,e;0BASAoF,W;0BAgBAC,qB;0BAMAC,6B;0BASAxJ,c;0BASAE,gB;0BASAkF,uB;0BASAwE,mB;0BASAC,gC;0BAOA1F,W;0BASA2F,iB;0BASAZ,Y;0BAcAiB,0B;0BAOAC,+B;0BASAvB,uB;0BASA7G,yB;0BAWAqI,qC;0BAkBA5E,yB;0BASAmB,iB;0BAUA0D,yB;0BASAE,mB;0BAMAC,sB;0BAMA9G,gB;0BASAmE,U;0BAUAnD,e;0BASA+F,uB;0BA8BA1D,mB;0BAqCPsE,M","sourcesContent":["import _request from 'superagent'\nimport gemup from 'gemup'\nimport get from 'lodash.get'\nimport stepsConfig from './steps_config'\nimport { data as _sd } from 'sharify'\nimport { fetchToken as _fetchToken, formattedLocation } from '../helpers'\nimport { find } from 'underscore'\nimport { push } from 'react-router-redux'\n\n// FIXME: Rewire\nlet request = _request\nlet sd = _sd\nlet fetchToken = _fetchToken\n\n// Action types\nexport const ADD_ASSET_ID = 'ADD_ASSET_ID'\nexport const ADD_IMAGE_TO_UPLOADED_IMAGES = 'ADD_IMAGE_TO_UPLOADED_IMAGES'\nexport const CLEAR_ARTIST_SUGGESTIONS = 'CLEAR_ARTIST_SUGGESTIONS'\nexport const CLEAR_ERROR = 'CLEAR_ERROR'\nexport const CLEAR_LOCATION_DATA = 'CLEAR_LOCATION_DATA'\nexport const CLEAR_LOCATION_SUGGESTIONS = 'CLEAR_LOCATION_SUGGESTIONS'\nexport const ERROR_ON_IMAGE = 'ERROR_ON_IMAGE'\nexport const FREEZE_LOCATION_INPUT = 'FREEZE_LOCATION_INPUT'\nexport const HIDE_LOADER = 'HIDE_LOADER'\nexport const HIDE_NOT_CONSIGNING_MESSAGE = 'HIDE_NOT_CONSIGNING_MESSAGE'\nexport const IGNORE_REDIRECT_ON_AUTH = 'IGNORE_REDIRECT_ON_AUTH'\nexport const REMOVE_ERRORED_IMAGE = 'REMOVE_ERRORED_IMAGE'\nexport const REMOVE_UPLOADED_IMAGE = 'REMOVE_UPLOADED_IMAGE'\nexport const SHOW_LOADER = 'SHOW_LOADER'\nexport const SHOW_NOT_CONSIGNING_MESSAGE = 'SHOW_NOT_CONSIGNING_MESSAGE'\nexport const SHOW_RESET_PASSWORD_SUCCESS_MESSAGE =\n  'SHOW_RESET_PASSWORD_SUCCESS_MESSAGE'\nexport const START_PROCESSING_IMAGE = 'START_PROCESSING_IMAGE'\nexport const STOP_PROCESSING_IMAGE = 'STOP_PROCESSING_IMAGE'\nexport const SUBMISSION_CREATED = 'SUBMISSION_CREATED'\nexport const SUBMISSION_COMPLETED = 'SUBMISSION_COMPLETED'\nexport const SUBMISSION_ERROR = 'SUBMISSION_ERROR'\nexport const SUBMIT_ARTIST = 'SUBMIT_ARTIST'\nexport const UNFREEZE_LOCATION_INPUT = 'UNFREEZE_LOCATION_INPUT'\nexport const UPDATE_ARTIST_AUTOCOMPLETE_VALUE =\n  'UPDATE_ARTIST_AUTOCOMPLETE_VALUE'\nexport const UPDATE_ARTIST_ID = 'UPDATE_ARTIST_ID'\nexport const UPDATE_ARTIST_NAME = 'UPDATE_ARTIST_NAME'\nexport const UPDATE_ARTIST_SUGGESTIONS = 'UPDATE_ARTIST_SUGGESTIONS'\nexport const UPDATE_AUTH_FORM_STATE = 'UPDATE_AUTH_FORM_STATE'\nexport const UPDATE_CURRENT_STEP = 'UPDATE_CURRENT_STEP'\nexport const UPDATE_ERROR = 'UPDATE_ERROR'\nexport const UPDATE_INPUTS = 'UPDATE_INPUTS'\nexport const UPDATE_LOCATION_AUTOCOMPLETE_VALUE =\n  'UPDATE_LOCATION_AUTOCOMPLETE_VALUE'\nexport const UPDATE_LOCATION_CITY_VALUE = 'UPDATE_LOCATION_CITY_VALUE'\nexport const UPDATE_LOCATION_SUGGESTIONS = 'UPDATE_LOCATION_SUGGESTIONS'\nexport const UPDATE_LOCATION_VALUES = 'UPDATE_LOCATION_VALUES'\nexport const UPDATE_PROGRESS_BAR = 'UPDATE_PROGRESS_BAR'\nexport const UPDATE_SKIP_PHOTO_SUBMISSION = 'UPDATE_SKIP_PHOTO_SUBMISSION'\nexport const UPDATE_STEPS_WITH_USER = 'UPDATE_STEPS_WITH_USER'\nexport const UPDATE_STEPS_WITHOUT_USER = 'UPDATE_STEPS_WITHOUT_USER'\nexport const UPDATE_SUBMISSION = 'UPDATE_SUBMISSION'\nexport const UPDATE_USER = 'UPDATE_USER'\nexport const UPDATE_USER_PHONE = 'UPDATE_USER_PHONE'\n\n// Action creators\nexport function addAssetId(assetId) {\n  return {\n    type: ADD_ASSET_ID,\n    payload: {\n      assetId,\n    },\n  }\n}\n\nexport function addImageToUploadedImages(fileName, src) {\n  return {\n    type: ADD_IMAGE_TO_UPLOADED_IMAGES,\n    payload: {\n      fileName,\n      src,\n    },\n  }\n}\n\nexport function chooseArtist(value) {\n  return dispatch => {\n    dispatch(updateArtistId(value._id))\n    dispatch(updateArtistName(value.name))\n  }\n}\n\nexport function chooseArtistAdvance() {\n  return dispatch => {\n    dispatch(submitArtist())\n    dispatch(push(stepsConfig.describeWork.path))\n  }\n}\n\nexport function chooseLocation(location) {\n  return async (dispatch, getState) => {\n    const parseDetails = (place, status) => {\n      if (status !== window.google.maps.places.PlacesServiceStatus.OK) {\n        console.error('Unable to reach maps API', status)\n      } else {\n        const { address_components } = place\n        const city = find(\n          address_components,\n          comp => comp.types[0] === 'locality'\n        )\n        const state = find(\n          address_components,\n          comp => comp.types[0] === 'administrative_area_level_1'\n        )\n        const country = find(\n          address_components,\n          comp => comp.types[0] === 'country'\n        )\n\n        const cityDisplay = city && city.long_name\n        const countryDisplay = country && country.long_name\n        const stateDisplay = state && state.long_name\n\n        dispatch(\n          updateLocationInputValues(cityDisplay, stateDisplay, countryDisplay)\n        )\n        dispatch(freezeLocationInput())\n      }\n    }\n\n    try {\n      if (window.google) {\n        const placesService = new window.google.maps.places.PlacesService(\n          document.createElement('div')\n        )\n        await placesService.getDetails(\n          { placeId: location.place_id },\n          parseDetails\n        )\n      }\n    } catch (err) {\n      console.error(\n        '(consignments/client/actions.js @ chooseLocation) Error:',\n        err\n      )\n    }\n  }\n}\n\nexport function clearArtistSuggestions() {\n  return {\n    type: CLEAR_ARTIST_SUGGESTIONS,\n  }\n}\n\nexport function clearError() {\n  return {\n    type: CLEAR_ERROR,\n  }\n}\n\nexport function clearLocationData() {\n  return {\n    type: CLEAR_LOCATION_DATA,\n  }\n}\n\nexport function clearLocationSuggestions() {\n  return {\n    type: CLEAR_LOCATION_SUGGESTIONS,\n  }\n}\n\nexport function completeSubmission() {\n  return async (dispatch, getState) => {\n    try {\n      const {\n        submissionFlow: { submission, submissionIdFromServer, user },\n      } = getState()\n      const token = await fetchToken(user.accessToken)\n\n      const submissionQueryParam = submission.id || submissionIdFromServer\n      const submissionResponse = await request\n        .put(`${sd.CONVECTION_APP_URL}/api/submissions/${submissionQueryParam}`)\n        .set('Authorization', `Bearer ${token}`)\n        .send({ state: 'submitted' })\n\n      dispatch(updateSubmission(submissionResponse.body))\n      dispatch(submissionCompleted())\n      dispatch(hideLoader())\n      dispatch(\n        push(\n          stepsConfig.thankYou.submissionPath.replace(\n            ':id',\n            submissionResponse.body.id\n          )\n        )\n      )\n    } catch (err) {\n      dispatch(hideLoader())\n      dispatch(submissionError('convection_complete_submission'))\n      dispatch(updateError('Unable to submit at this time.'))\n      console.error(\n        '(consignments/client/actions.js @ completeSubmission) Error:',\n        err\n      )\n    }\n  }\n}\n\nexport function createSubmission() {\n  return async (dispatch, getState) => {\n    try {\n      const { submissionFlow: { inputs, submission, user } } = getState()\n      const token = await fetchToken(user.accessToken)\n      let submissionBody\n      if (submission.id) {\n        submissionBody = await request\n          .put(`${sd.CONVECTION_APP_URL}/api/submissions/${submission.id}`)\n          .set('Authorization', `Bearer ${token}`)\n          .send(inputs)\n      } else {\n        submissionBody = await request\n          .post(`${sd.CONVECTION_APP_URL}/api/submissions`)\n          .set('Authorization', `Bearer ${token}`)\n          .send(inputs)\n      }\n      let userBody\n      // update the user's phone number if it has been changed\n      if (user.phone !== inputs.phone) {\n        userBody = await request\n          .put(`${sd.API_URL}/api/v1/me`)\n          .set('X-ACCESS-TOKEN', user.accessToken)\n          .send({ phone: inputs.phone })\n        dispatch(updateUserPhone(userBody.body.phone))\n      }\n\n      dispatch(submissionCreated(submissionBody.body.id))\n      dispatch(updateSubmission(submissionBody.body)) // update state to reflect current submission\n      dispatch(hideLoader())\n      dispatch(\n        push(\n          stepsConfig.describeWork.submissionPath.replace(\n            ':id',\n            submissionBody.body.id\n          )\n        )\n      )\n      dispatch(\n        push(\n          stepsConfig.uploadPhotos.submissionPath.replace(\n            ':id',\n            submissionBody.body.id\n          )\n        )\n      )\n    } catch (err) {\n      dispatch(hideLoader())\n      dispatch(submissionError('convection_create'))\n      dispatch(updateError('Unable to submit at this time.'))\n      console.error(\n        '(consignments/client/actions.js @ createSubmission) Error:',\n        err\n      )\n    }\n  }\n}\n\nexport function errorOnImage(fileName) {\n  return {\n    type: ERROR_ON_IMAGE,\n    payload: {\n      fileName,\n    },\n  }\n}\n\nexport function fetchArtistSuggestions(value) {\n  return async (dispatch, getState) => {\n    try {\n      const { submissionFlow: { user } } = getState()\n      const res = await request\n        .get(`${sd.API_URL}/api/v1/match/artists`)\n        .query({ visible_to_public: 'true', term: value })\n        .set('X-ACCESS-TOKEN', user.accessToken)\n      dispatch(updateArtistSuggestions(res.body))\n      dispatch(hideNotConsigningMessage())\n    } catch (err) {\n      console.error(\n        '(consignments/client/actions.js @ fetchArtistSuggestions) Error:',\n        err\n      )\n    }\n  }\n}\n\nexport function fetchLocationSuggestions(value) {\n  return async (dispatch, getState) => {\n    const displaySuggestions = (predictions, status) => {\n      if (status !== window.google.maps.places.PlacesServiceStatus.OK) {\n        console.error('Unable to reach maps API', status)\n      } else {\n        dispatch(updateLocationSuggestions(predictions))\n      }\n    }\n\n    try {\n      if (window.google) {\n        const autocompleteService = new window.google.maps.places.AutocompleteService()\n        await autocompleteService.getPlacePredictions(\n          { input: value, types: ['(cities)'] },\n          displaySuggestions\n        )\n      }\n    } catch (err) {\n      console.error(\n        '(consignments/client/actions.js @ fetchLocationSuggestions) Error:',\n        err\n      )\n    }\n  }\n}\n\nexport function freezeLocationInput() {\n  return {\n    type: FREEZE_LOCATION_INPUT,\n  }\n}\n\nexport function handleImageUpload(file) {\n  return async (dispatch, getState) => {\n    try {\n      if (file.type === 'image/jpeg' || file.type === 'image/png') {\n        const options = {\n          acl: 'private',\n          app: sd.CONVECTION_GEMINI_APP,\n          key: sd.GEMINI_S3_ACCESS_KEY,\n          fail: _err => {\n            dispatch(errorOnImage(file.name))\n          },\n          add: src => {\n            dispatch(addImageToUploadedImages(file.name, src))\n            dispatch(startProcessingImage(file.name))\n          },\n          progress: percent => {\n            dispatch(updateProgressBar(file.name, percent))\n          },\n          done: (src, geminiKey, bucket) => {\n            const key = `${geminiKey}/${file.name}`\n            dispatch(uploadImageToGemini(key, bucket, file.name))\n          },\n        }\n        gemup(file, options)\n      } else {\n        dispatch(addImageToUploadedImages(file.name))\n        dispatch(errorOnImage(file.name))\n      }\n    } catch (err) {\n      console.error(\n        '(consignments/client/actions.js @ handleImageUpload) Error:',\n        err\n      )\n    }\n  }\n}\n\nexport function hideNotConsigningMessage() {\n  return {\n    type: HIDE_NOT_CONSIGNING_MESSAGE,\n  }\n}\n\nexport function ignoreRedirectOnAuth() {\n  return {\n    type: IGNORE_REDIRECT_ON_AUTH,\n  }\n}\n\nexport function logIn(values, accountCreated = false) {\n  return async (dispatch, getState) => {\n    try {\n      dispatch(showLoader())\n\n      const { submissionFlow: { redirectOnAuth } } = getState()\n\n      const options = {\n        email: values.email,\n        password: values.password,\n        _csrf: sd.CSRF_TOKEN,\n      }\n      const user = await request\n        .post(sd.AP.loginPagePath)\n        .set('Content-Type', 'application/json')\n        .set('Accept', 'application/json')\n        .set('X-Requested-With', 'XMLHttpRequest')\n        .send(options)\n\n      dispatch(updateUser(user.body.user, accountCreated))\n      redirectOnAuth && dispatch(push(stepsConfig.chooseArtist.path))\n      dispatch(clearError())\n      dispatch(hideLoader())\n    } catch (err) {\n      const errorMessage = get(err, 'response.body.error', false)\n      dispatch(updateError(errorMessage))\n      dispatch(hideLoader())\n      console.error('(consignments/client/actions.js @ logIn) Error:', err)\n    }\n  }\n}\n\nexport function removeErroredImage(fileName) {\n  return {\n    type: REMOVE_ERRORED_IMAGE,\n    payload: {\n      fileName,\n    },\n  }\n}\n\nexport function removeImage(fileName) {\n  return dispatch => {\n    dispatch(removeErroredImage(fileName))\n    dispatch(stopProcessingImage(fileName))\n    dispatch(removeUploadedImage(fileName))\n  }\n}\n\nexport function removeUploadedImage(fileName) {\n  return {\n    type: REMOVE_UPLOADED_IMAGE,\n    payload: {\n      fileName,\n    },\n  }\n}\n\nexport function resetPassword(values) {\n  return async (dispatch, getState) => {\n    try {\n      const options = {\n        email: values.email,\n      }\n      await request\n        .post(`${sd.API_URL}/api/v1/users/send_reset_password_instructions`)\n        .set('Content-Type', 'application/json')\n        .set('Accept', 'application/json')\n        .set('X-XAPP-TOKEN', sd.ARTSY_XAPP_TOKEN)\n        .send(options)\n      dispatch(clearError())\n      dispatch(showResetPasswordSuccessMessage())\n    } catch (err) {\n      dispatch(updateError(err.response.body.error))\n    }\n  }\n}\n\nexport function scrubLocation() {\n  return (dispatch, getState) => {\n    const { submissionFlow: { inputs, locationAutocompleteValue } } = getState()\n    // if user has selected from the autocomplete, one of these should be filled\n    // in the off-chance it's not, stick the outlier data in the city field\n    if (\n      !(\n        inputs.location_city ||\n        inputs.location_country ||\n        inputs.location_state\n      ) &&\n      locationAutocompleteValue\n    ) {\n      dispatch(updateLocationCityValue(locationAutocompleteValue))\n    }\n  }\n}\n\nexport function showNotConsigningMessage() {\n  return {\n    type: SHOW_NOT_CONSIGNING_MESSAGE,\n  }\n}\n\nexport function showResetPasswordSuccessMessage() {\n  return {\n    type: SHOW_RESET_PASSWORD_SUCCESS_MESSAGE,\n  }\n}\n\nexport function signUp(values) {\n  return async (dispatch, getState) => {\n    try {\n      dispatch(showLoader())\n\n      const options = {\n        email: values.email,\n        name: values.name,\n        password: values.password,\n        _csrf: sd.CSRF_TOKEN,\n      }\n      await request\n        .post(sd.AP.signupPagePath)\n        .set('Content-Type', 'application/json')\n        .set('Accept', 'application/json')\n        .set('X-Requested-With', 'XMLHttpRequest')\n        .send(options)\n      dispatch(logIn(values, true))\n    } catch (err) {\n      const errorMessage = get(err, 'response.body.error', false)\n      dispatch(updateError(errorMessage))\n      dispatch(hideLoader())\n      console.error('(consignments/client/actions.js @ signUp) Error:', err)\n    }\n  }\n}\n\nexport function startProcessingImage(fileName) {\n  return {\n    type: START_PROCESSING_IMAGE,\n    payload: {\n      fileName,\n    },\n  }\n}\n\nexport function stopProcessingImage(fileName) {\n  return {\n    type: STOP_PROCESSING_IMAGE,\n    payload: {\n      fileName,\n    },\n  }\n}\n\nexport function submitArtist() {\n  return {\n    type: SUBMIT_ARTIST,\n  }\n}\n\nexport function submitDescribeWork(values) {\n  return dispatch => {\n    dispatch(clearError())\n    dispatch(showLoader())\n    dispatch(updateInputs(values)) // update the inputs\n    dispatch(scrubLocation())\n    dispatch(createSubmission()) // create the submission in convection\n  }\n}\n\nexport function selectPhoto(file) {\n  return dispatch => {\n    dispatch(handleImageUpload(file)) // update the inputs\n  }\n}\n\nexport function showLoader() {\n  return {\n    type: SHOW_LOADER,\n  }\n}\n\nexport function hideLoader() {\n  return {\n    type: HIDE_LOADER,\n  }\n}\n\nexport function submissionCreated(submissionId) {\n  return {\n    type: SUBMISSION_CREATED,\n    payload: {\n      submissionId,\n    },\n  }\n}\n\nexport function submissionCompleted() {\n  return {\n    type: SUBMISSION_COMPLETED,\n  }\n}\n\nexport function submissionError(errorType) {\n  return {\n    type: SUBMISSION_ERROR,\n    payload: {\n      errorType,\n    },\n  }\n}\n\nexport function submitPhoto() {\n  return async (dispatch, getState) => {\n    dispatch(showLoader())\n    try {\n      dispatch(completeSubmission())\n    } catch (err) {\n      dispatch(hideLoader())\n      dispatch(updateError('Unable to submit at this time.'))\n      console.error(\n        '(consignments/client/actions.js @ submitPhoto) Error:',\n        err\n      )\n    }\n  }\n}\n\nexport function unfreezeLocationInput() {\n  return {\n    type: UNFREEZE_LOCATION_INPUT,\n  }\n}\n\nexport function updateArtistAutocompleteValue(value) {\n  return {\n    type: UPDATE_ARTIST_AUTOCOMPLETE_VALUE,\n    payload: {\n      value,\n    },\n  }\n}\n\nexport function updateArtistId(artistId) {\n  return {\n    type: UPDATE_ARTIST_ID,\n    payload: {\n      artistId,\n    },\n  }\n}\n\nexport function updateArtistName(artistName) {\n  return {\n    type: UPDATE_ARTIST_NAME,\n    payload: {\n      artistName,\n    },\n  }\n}\n\nexport function updateArtistSuggestions(suggestions) {\n  return {\n    type: UPDATE_ARTIST_SUGGESTIONS,\n    payload: {\n      suggestions,\n    },\n  }\n}\n\nexport function updateAuthFormState(state) {\n  return {\n    type: UPDATE_AUTH_FORM_STATE,\n    payload: {\n      state,\n    },\n  }\n}\n\nexport function updateAuthFormStateAndClearError(state) {\n  return dispatch => {\n    dispatch(updateAuthFormState(state))\n    dispatch(clearError())\n  }\n}\n\nexport function updateError(error) {\n  return {\n    type: UPDATE_ERROR,\n    payload: {\n      error,\n    },\n  }\n}\n\nexport function updateCurrentStep(step) {\n  return {\n    type: UPDATE_CURRENT_STEP,\n    payload: {\n      step,\n    },\n  }\n}\n\nexport function updateInputs(inputs) {\n  if (inputs.edition === false) {\n    inputs.edition_number = ''\n    inputs.edition_size = 0\n  }\n\n  return {\n    type: UPDATE_INPUTS,\n    payload: {\n      inputs,\n    },\n  }\n}\n\nexport function updateLocationAutocomplete(value) {\n  return dispatch => {\n    dispatch(clearLocationData())\n    dispatch(updateLocationAutocompleteValue(value))\n  }\n}\n\nexport function updateLocationAutocompleteValue(value) {\n  return {\n    type: UPDATE_LOCATION_AUTOCOMPLETE_VALUE,\n    payload: {\n      value,\n    },\n  }\n}\n\nexport function updateLocationCityValue(city) {\n  return {\n    type: UPDATE_LOCATION_CITY_VALUE,\n    payload: {\n      city,\n    },\n  }\n}\n\nexport function updateLocationInputValues(city, state, country) {\n  return {\n    type: UPDATE_LOCATION_VALUES,\n    payload: {\n      city,\n      state,\n      country,\n    },\n  }\n}\n\nexport function updateLocationFromSubmissionAndFreeze(city, state, country) {\n  return (dispatch, getState) => {\n    const {\n      submissionFlow: {\n        submission: { location_city, location_state, location_country },\n      },\n    } = getState()\n    const location = formattedLocation(\n      location_city,\n      location_state,\n      location_country\n    )\n\n    dispatch(updateLocationAutocompleteValue(location))\n    dispatch(freezeLocationInput())\n  }\n}\n\nexport function updateLocationSuggestions(suggestions) {\n  return {\n    type: UPDATE_LOCATION_SUGGESTIONS,\n    payload: {\n      suggestions,\n    },\n  }\n}\n\nexport function updateProgressBar(fileName, percent) {\n  return {\n    type: UPDATE_PROGRESS_BAR,\n    payload: {\n      fileName,\n      percent,\n    },\n  }\n}\n\nexport function updateSkipPhotoSubmission(skip) {\n  return {\n    type: UPDATE_SKIP_PHOTO_SUBMISSION,\n    payload: {\n      skip,\n    },\n  }\n}\n\nexport function updateStepsWithUser() {\n  return {\n    type: UPDATE_STEPS_WITH_USER,\n  }\n}\n\nexport function updateStepsWithoutUser() {\n  return {\n    type: UPDATE_STEPS_WITHOUT_USER,\n  }\n}\n\nexport function updateSubmission(submission) {\n  return {\n    type: UPDATE_SUBMISSION,\n    payload: {\n      submission,\n    },\n  }\n}\n\nexport function updateUser(user, accountCreated) {\n  return {\n    type: UPDATE_USER,\n    payload: {\n      user,\n      accountCreated,\n    },\n  }\n}\n\nexport function updateUserPhone(phone) {\n  return {\n    type: UPDATE_USER_PHONE,\n    payload: {\n      phone,\n    },\n  }\n}\n\nexport function uploadImageToConvection(geminiToken, fileName) {\n  return async (dispatch, getState) => {\n    try {\n      const {\n        submissionFlow: { submission, submissionIdFromServer, user },\n      } = getState()\n      const submissionId = submission.id || submissionIdFromServer\n      const token = await fetchToken(user.accessToken)\n      const inputs = {\n        submission_id: submissionId,\n        gemini_token: geminiToken,\n      }\n      const assetResponse = await request\n        .post(`${sd.CONVECTION_APP_URL}/api/assets`)\n        .set('Authorization', `Bearer ${token}`)\n        .send(inputs)\n      const assetId = assetResponse.body.id\n\n      dispatch(stopProcessingImage(fileName))\n      dispatch(addAssetId(assetId))\n    } catch (err) {\n      dispatch(errorOnImage(fileName))\n      console.error(\n        '(consignments/client/actions.js @ uploadImageToConvection) Error:',\n        err\n      )\n    }\n  }\n}\n\nexport function uploadImageToGemini(key, bucket, fileName) {\n  return async (dispatch, getState) => {\n    try {\n      const {\n        submissionFlow: { submission, submissionIdFromServer },\n      } = getState()\n      const submissionId = submission.id || submissionIdFromServer\n      const inputs = {\n        entry: {\n          template_key: sd.CONVECTION_GEMINI_APP,\n          source_key: key,\n          source_bucket: bucket,\n          metadata: {\n            id: submissionId,\n            _type: 'Consignment',\n          },\n        },\n      }\n      const response = await request\n        .post(`${sd.GEMINI_APP}/entries.json`)\n        .set('Authorization', `Basic ${encode(sd.CONVECTION_GEMINI_APP, '')}`)\n        .send(inputs)\n\n      const token = response.body.token\n\n      dispatch(uploadImageToConvection(token, fileName))\n    } catch (err) {\n      dispatch(errorOnImage(fileName))\n      console.error(\n        '(consignments/client/actions.js @ uploadImageToGemini) Error:',\n        err\n      )\n    }\n  }\n}\n\n// helpers\nfunction encode(key, secret) {\n  return btoa(unescape(encodeURIComponent([key, secret].join(':'))))\n}\n"]}]}