{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/apps/consign/client/validate.js","dependencies":[{"path":"/Users/eve/development/force/src/desktop/apps/consign/client/validate.js","mtime":1519227436000},{"path":"/Users/eve/development/force/.babelrc","mtime":1528124541000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validate = validate;\nexports.scrollToError = exports.dispatchAndScrollToError = exports.numberWarning = void 0;\n\nvar _keys = _interopRequireDefault(require(\"@babel/runtime/core-js/object/keys\"));\n\nvar _actions = require(\"./actions\");\n\nvar numberWarning = function numberWarning(value) {\n  return value && isNaN(Number(value)) && 'Must be a number';\n};\n\nexports.numberWarning = numberWarning;\n\nvar dispatchAndScrollToError = function dispatchAndScrollToError(errors, dispatch) {\n  dispatch((0, _actions.submissionError)('validation'));\n  scrollToError(errors);\n};\n\nexports.dispatchAndScrollToError = dispatchAndScrollToError;\n\nvar scrollToError = function scrollToError(errors) {\n  var scrollBuffer = 5;\n  var firstError = (0, _keys.default)(errors)[0];\n  var firstErrorElement = document.getElementsByName(firstError)[0];\n\n  if (firstErrorElement) {\n    window.scrollTo(0, firstErrorElement.offsetTop - scrollBuffer);\n    firstErrorElement.querySelector('input').focus();\n  }\n};\n\nexports.scrollToError = scrollToError;\n\nfunction validate(values) {\n  var depth = values.depth,\n      edition = values.edition,\n      edition_number = values.edition_number,\n      edition_size = values.edition_size,\n      height = values.height,\n      location = values.location,\n      medium = values.medium,\n      phone = values.phone,\n      title = values.title,\n      width = values.width,\n      year = values.year;\n  var errors = {}; // The order of these errors are important, as it determines which field to scroll to\n  // when there is an error on submission.\n\n  if (!title) errors.title = 'Required';\n  if (!year) errors.year = 'Required';\n  if (!medium) errors.medium = 'Required';\n  if (!phone) errors.phone = 'Required';\n  if (!height || numberWarning(height)) errors.height = 'Required';\n  if (!width || numberWarning(width)) errors.width = 'Required';\n  if (numberWarning(depth)) errors.depth = 'Required';\n\n  if (edition) {\n    if (!edition_number) errors.edition_number = 'Required';\n    if (!edition_size || numberWarning(edition_size)) errors.edition_size = 'Required';\n  }\n\n  if (!location) errors.location = 'Required';\n  return errors;\n}",{"version":3,"sources":["src/desktop/apps/consign/client/validate.js"],"names":["numberWarning","value","isNaN","Number","dispatchAndScrollToError","errors","dispatch","scrollToError","scrollBuffer","firstError","firstErrorElement","document","getElementsByName","window","scrollTo","offsetTop","querySelector","focus","validate","values","depth","edition","edition_number","edition_size","height","location","medium","phone","title","width","year"],"mappings":";;;;;;;;;;;;AAAA;;AAEO,IAAMA,gBAAgB,SAAhBA,aAAgB;AAAA,SAASC,SAASC,MAAMC,OAAOF,KAAP,CAAN,CAAT,IAAiC,kBAA1C;AAAA,CAAtB;;;;AAEA,IAAMG,2BAA2B,SAA3BA,wBAA2B,CAACC,MAAD,EAASC,QAAT,EAAsB;AAC5DA,WAAS,8BAAgB,YAAhB,CAAT;AACAC,gBAAcF,MAAd;AACD,CAHM;;;;AAKA,IAAME,gBAAgB,SAAhBA,aAAgB,CAACF,MAAD,EAAY;AACvC,MAAMG,eAAe,CAArB;AACA,MAAMC,aAAa,mBAAYJ,MAAZ,EAAoB,CAApB,CAAnB;AACA,MAAMK,oBAAoBC,SAASC,iBAAT,CAA2BH,UAA3B,EAAuC,CAAvC,CAA1B;;AACA,MAAIC,iBAAJ,EAAuB;AACrBG,WAAOC,QAAP,CAAgB,CAAhB,EAAmBJ,kBAAkBK,SAAlB,GAA8BP,YAAjD;AACAE,sBAAkBM,aAAlB,CAAgC,OAAhC,EAAyCC,KAAzC;AACD;AACF,CARM;;;;AAUA,SAASC,QAAT,CAAmBC,MAAnB,EAA2B;AAAA,MAE9BC,KAF8B,GAa5BD,MAb4B,CAE9BC,KAF8B;AAAA,MAG9BC,OAH8B,GAa5BF,MAb4B,CAG9BE,OAH8B;AAAA,MAI9BC,cAJ8B,GAa5BH,MAb4B,CAI9BG,cAJ8B;AAAA,MAK9BC,YAL8B,GAa5BJ,MAb4B,CAK9BI,YAL8B;AAAA,MAM9BC,MAN8B,GAa5BL,MAb4B,CAM9BK,MAN8B;AAAA,MAO9BC,QAP8B,GAa5BN,MAb4B,CAO9BM,QAP8B;AAAA,MAQ9BC,MAR8B,GAa5BP,MAb4B,CAQ9BO,MAR8B;AAAA,MAS9BC,KAT8B,GAa5BR,MAb4B,CAS9BQ,KAT8B;AAAA,MAU9BC,KAV8B,GAa5BT,MAb4B,CAU9BS,KAV8B;AAAA,MAW9BC,KAX8B,GAa5BV,MAb4B,CAW9BU,KAX8B;AAAA,MAY9BC,IAZ8B,GAa5BX,MAb4B,CAY9BW,IAZ8B;AAchC,MAAMzB,SAAS,EAAf,CAdgC,CAgBhC;AACA;;AACA,MAAI,CAACuB,KAAL,EAAYvB,OAAOuB,KAAP,GAAe,UAAf;AACZ,MAAI,CAACE,IAAL,EAAWzB,OAAOyB,IAAP,GAAc,UAAd;AACX,MAAI,CAACJ,MAAL,EAAarB,OAAOqB,MAAP,GAAgB,UAAhB;AACb,MAAI,CAACC,KAAL,EAAYtB,OAAOsB,KAAP,GAAe,UAAf;AACZ,MAAI,CAACH,MAAD,IAAWxB,cAAcwB,MAAd,CAAf,EAAsCnB,OAAOmB,MAAP,GAAgB,UAAhB;AACtC,MAAI,CAACK,KAAD,IAAU7B,cAAc6B,KAAd,CAAd,EAAoCxB,OAAOwB,KAAP,GAAe,UAAf;AACpC,MAAI7B,cAAcoB,KAAd,CAAJ,EAA0Bf,OAAOe,KAAP,GAAe,UAAf;;AAC1B,MAAIC,OAAJ,EAAa;AACX,QAAI,CAACC,cAAL,EAAqBjB,OAAOiB,cAAP,GAAwB,UAAxB;AACrB,QAAI,CAACC,YAAD,IAAiBvB,cAAcuB,YAAd,CAArB,EAAkDlB,OAAOkB,YAAP,GAAsB,UAAtB;AACnD;;AACD,MAAI,CAACE,QAAL,EAAepB,OAAOoB,QAAP,GAAkB,UAAlB;AAEf,SAAOpB,MAAP;AACD","file":"/Users/eve/development/force/src/desktop/apps/consign/client/validate.js","sourceRoot":"/Users/eve/development/force","sourcesContent":["import { submissionError } from './actions'\n\nexport const numberWarning = value => value && isNaN(Number(value)) && 'Must be a number'\n\nexport const dispatchAndScrollToError = (errors, dispatch) => {\n  dispatch(submissionError('validation'))\n  scrollToError(errors)\n}\n\nexport const scrollToError = (errors) => {\n  const scrollBuffer = 5\n  const firstError = Object.keys(errors)[0]\n  const firstErrorElement = document.getElementsByName(firstError)[0]\n  if (firstErrorElement) {\n    window.scrollTo(0, firstErrorElement.offsetTop - scrollBuffer)\n    firstErrorElement.querySelector('input').focus()\n  }\n}\n\nexport function validate (values) {\n  const {\n    depth,\n    edition,\n    edition_number,\n    edition_size,\n    height,\n    location,\n    medium,\n    phone,\n    title,\n    width,\n    year\n  } = values\n  const errors = {}\n\n  // The order of these errors are important, as it determines which field to scroll to\n  // when there is an error on submission.\n  if (!title) errors.title = 'Required'\n  if (!year) errors.year = 'Required'\n  if (!medium) errors.medium = 'Required'\n  if (!phone) errors.phone = 'Required'\n  if (!height || numberWarning(height)) errors.height = 'Required'\n  if (!width || numberWarning(width)) errors.width = 'Required'\n  if (numberWarning(depth)) errors.depth = 'Required'\n  if (edition) {\n    if (!edition_number) errors.edition_number = 'Required'\n    if (!edition_size || numberWarning(edition_size)) errors.edition_size = 'Required'\n  }\n  if (!location) errors.location = 'Required'\n\n  return errors\n}\n"]}]}