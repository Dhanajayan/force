{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/components/react/infinite_scroll/InfiniteScroll.js","dependencies":[{"path":"/Users/eve/development/force/src/desktop/components/react/infinite_scroll/InfiniteScroll.js","mtime":1519227436000},{"path":"/Users/eve/development/force/.babelrc","mtime":1528124541000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _getPrototypeOf = _interopRequireDefault(require(\"@babel/runtime/core-js/object/get-prototype-of\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _underscore = require(\"underscore\");\n\nvar THROTTLE_MS = 200;\n\nvar InfiniteScroll =\n/*#__PURE__*/\nfunction (_Component) {\n  (0, _inherits2.default)(InfiniteScroll, _Component);\n\n  function InfiniteScroll() {\n    var _ref;\n\n    var _temp, _this;\n\n    (0, _classCallCheck2.default)(this, InfiniteScroll);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return (0, _possibleConstructorReturn2.default)(_this, (_temp = _this = (0, _possibleConstructorReturn2.default)(this, (_ref = InfiniteScroll.__proto__ || (0, _getPrototypeOf.default)(InfiniteScroll)).call.apply(_ref, [this].concat(args))), Object.defineProperty((0, _assertThisInitialized2.default)(_this), \"state\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: {\n        isMounted: false,\n        $node: {}\n      }\n    }), Object.defineProperty((0, _assertThisInitialized2.default)(_this), \"handleScroll\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function value() {\n        var onTrigger = _this.props.onTrigger;\n        return (0, _underscore.throttle)(function () {\n          var _this$state = _this.state,\n              isMounted = _this$state.isMounted,\n              $node = _this$state.$node;\n\n          if (!isMounted) {\n            return;\n          } // TODO: Add ability to pass in threshold\n\n\n          var threshold = _this.$(window).height() + _this.$(window).scrollTop() + 500; // px push\n\n          var isTriggered = $node.height() > 0 && threshold >= $node.offset().top + $node.height();\n\n          if (isTriggered) {\n            onTrigger();\n          }\n        }, THROTTLE_MS);\n      }\n    }), _temp));\n  }\n\n  (0, _createClass2.default)(InfiniteScroll, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var triggerElement = this.props.triggerElement;\n      this.$ = require('jquery');\n      this.$(window).on(\"scroll\".concat(triggerElement), this.handleScroll());\n      this.setState(function () {\n        return {\n          isMounted: true,\n          $node: _this2.$(triggerElement)\n        };\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.$(window).off(\"scroll\".concat(this.props.triggerElement));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _react.default.createElement(\"div\", null, this.props.children);\n    }\n  }]);\n  return InfiniteScroll;\n}(_react.Component);\n\nexports.default = InfiniteScroll;\nObject.defineProperty(InfiniteScroll, \"propTypes\", {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  value: {\n    children: _propTypes.default.node.isRequired,\n    onTrigger: _propTypes.default.func.isRequired,\n    triggerElement: _propTypes.default.string.isRequired\n  }\n});",{"version":3,"sources":["src/desktop/components/react/infinite_scroll/InfiniteScroll.js"],"names":["THROTTLE_MS","InfiniteScroll","isMounted","$node","onTrigger","props","state","threshold","$","window","height","scrollTop","isTriggered","offset","top","triggerElement","require","on","handleScroll","setState","off","children","node","isRequired","func","string"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AAEA,IAAMA,cAAc,GAApB;;IAEqBC,c;;;;;;;;;;;;;;;;;;;;aAOX;AACNC,mBAAW,KADL;AAENC,eAAO;AAFD;;;;;aAuBO,iBAAM;AAAA,YACXC,SADW,GACG,MAAKC,KADR,CACXD,SADW;AAGnB,eAAO,0BAAS,YAAM;AAAA,4BACS,MAAKE,KADd;AAAA,cACZJ,SADY,eACZA,SADY;AAAA,cACDC,KADC,eACDA,KADC;;AAGpB,cAAI,CAACD,SAAL,EAAgB;AACd;AACD,WALmB,CAOpB;;;AACA,cAAMK,YACJ,MAAKC,CAAL,CAAOC,MAAP,EAAeC,MAAf,KAA0B,MAAKF,CAAL,CAAOC,MAAP,EAAeE,SAAf,EAA1B,GAAuD,GADzD,CARoB,CASyC;;AAC7D,cAAMC,cACJT,MAAMO,MAAN,KAAiB,CAAjB,IAAsBH,aAAaJ,MAAMU,MAAN,GAAeC,GAAf,GAAqBX,MAAMO,MAAN,EAD1D;;AAGA,cAAIE,WAAJ,EAAiB;AACfR;AACD;AACF,SAhBM,EAgBJJ,WAhBI,CAAP;AAiBD;;;;;;wCAtCmB;AAAA;;AAAA,UACVe,cADU,GACS,KAAKV,KADd,CACVU,cADU;AAGlB,WAAKP,CAAL,GAASQ,QAAQ,QAAR,CAAT;AACA,WAAKR,CAAL,CAAOC,MAAP,EAAeQ,EAAf,iBAA2BF,cAA3B,GAA6C,KAAKG,YAAL,EAA7C;AAEA,WAAKC,QAAL,CAAc,YAAM;AAClB,eAAO;AACLjB,qBAAW,IADN;AAELC,iBAAO,OAAKK,CAAL,CAAOO,cAAP;AAFF,SAAP;AAID,OALD;AAMD;;;2CAEsB;AACrB,WAAKP,CAAL,CAAOC,MAAP,EAAeW,GAAf,iBAA4B,KAAKf,KAAL,CAAWU,cAAvC;AACD;;;6BAwBQ;AACP,aAAO,0CAAM,KAAKV,KAAL,CAAWgB,QAAjB,CAAP;AACD;;;;;;sBAtDkBpB,c;;;;SACA;AACjBoB,cAAU,mBAAUC,IAAV,CAAeC,UADR;AAEjBnB,eAAW,mBAAUoB,IAAV,CAAeD,UAFT;AAGjBR,oBAAgB,mBAAUU,MAAV,CAAiBF;AAHhB","file":"/Users/eve/development/force/src/desktop/components/react/infinite_scroll/InfiniteScroll.js","sourceRoot":"/Users/eve/development/force","sourcesContent":["import PropTypes from 'prop-types'\nimport React, { Component } from 'react'\nimport { throttle } from 'underscore'\n\nconst THROTTLE_MS = 200\n\nexport default class InfiniteScroll extends Component {\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n    onTrigger: PropTypes.func.isRequired,\n    triggerElement: PropTypes.string.isRequired,\n  }\n\n  state = {\n    isMounted: false,\n    $node: {},\n  }\n\n  componentDidMount() {\n    const { triggerElement } = this.props\n\n    this.$ = require('jquery')\n    this.$(window).on(`scroll${triggerElement}`, this.handleScroll())\n\n    this.setState(() => {\n      return {\n        isMounted: true,\n        $node: this.$(triggerElement),\n      }\n    })\n  }\n\n  componentWillUnmount() {\n    this.$(window).off(`scroll${this.props.triggerElement}`)\n  }\n\n  handleScroll = () => {\n    const { onTrigger } = this.props\n\n    return throttle(() => {\n      const { isMounted, $node } = this.state\n\n      if (!isMounted) {\n        return\n      }\n\n      // TODO: Add ability to pass in threshold\n      const threshold =\n        this.$(window).height() + this.$(window).scrollTop() + 500 // px push\n      const isTriggered =\n        $node.height() > 0 && threshold >= $node.offset().top + $node.height()\n\n      if (isTriggered) {\n        onTrigger()\n      }\n    }, THROTTLE_MS)\n  }\n\n  render() {\n    return <div>{this.props.children}</div>\n  }\n}\n"]}]}