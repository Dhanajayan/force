{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js","dependencies":[{"path":"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js","mtime":1521064653000},{"path":"/Users/eve/development/force/.babelrc","mtime":1537178749000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\n\n(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nimport analyticsHooks from \"../../../lib/analytics_hooks.coffee\";\nimport _metaphysics from \"../../../../lib/metaphysics.coffee\";\nimport { filterQuery } from \"../queries/filter\";\nimport { worksByFollowedArtists } from \"../queries/worksByFollowedArtists\"; // FIXME: Rewire\n\nvar metaphysics = _metaphysics; // Action types\n\nexport var GET_ARTWORKS_FAILURE = 'GET_ARTWORKS_FAILURE';\nexport var GET_ARTWORKS_REQUEST = 'GET_ARTWORKS_REQUEST';\nexport var GET_ARTWORKS_SUCCESS = 'GET_ARTWORKS_SUCCESS';\nexport var SHOW_FOLLOWED_ARTISTS_RAIL = 'SHOW_FOLLOWED_ARTISTS_RAIL';\nexport var TOGGLE_LIST_VIEW = 'TOGGLE_LIST_VIEW';\nexport var UPDATE_AGGREGATED_ARTISTS = 'UPDATE_AGGREGATED_ARTISTS';\nexport var UPDATE_AGGREGATED_MEDIUMS = 'UPDATE_AGGREGATED_MEDIUMS';\nexport var UPDATE_ALL_FETCHED = 'UPDATE_ALL_FETCHED';\nexport var UPDATE_ARTIST_ID = 'UPDATE_ARTIST_ID';\nexport var UPDATE_ESTIMATE_DISPLAY = 'UPDATE_ESTIMATE_DISPLAY';\nexport var UPDATE_ESTIMATE_RANGE = 'UPDATE_ESTIMATE_RANGE';\nexport var UPDATE_INITIAL_MEDIUM_MAP = 'UPDATE_INITIAL_MEDIUM_MAP';\nexport var UPDATE_MEDIUM_ID = 'UPDATE_MEDIUM_ID';\nexport var UPDATE_NUM_ARTISTS_YOU_FOLLOW = 'UPDATE_NUM_ARTISTS_YOU_FOLLOW';\nexport var UPDATE_PAGE = 'UPDATE_PAGE';\nexport var UPDATE_SALE_ARTWORKS = 'UPDATE_SALE_ARTWORKS';\nexport var UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS = 'UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS';\nexport var UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS_TOTAL = 'UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS_TOTAL';\nexport var UPDATE_SORT = 'UPDATE_SORT';\nexport var UPDATE_TOTAL = 'UPDATE_TOTAL'; // Action creators\n\nexport function getArtworksFailure() {\n  return {\n    type: GET_ARTWORKS_FAILURE\n  };\n}\nexport function getArtworksRequest() {\n  return {\n    type: GET_ARTWORKS_REQUEST\n  };\n}\nexport function getArtworksSuccess() {\n  return {\n    type: GET_ARTWORKS_SUCCESS\n  };\n}\nexport function fetchArtworks() {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch, getState) {\n        var _getState, _getState$artworkBrow, filterParams, requestID, user, _ref2, filter_sale_artworks, aggregations, artistAggregation, mediumAggregation;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _getState = getState(), _getState$artworkBrow = _getState.artworkBrowser, filterParams = _getState$artworkBrow.filterParams, requestID = _getState$artworkBrow.requestID, user = _getState$artworkBrow.user;\n                _context.prev = 1;\n                dispatch(getArtworksRequest());\n                _context.next = 5;\n                return metaphysics({\n                  query: filterQuery,\n                  variables: filterParams,\n                  req: {\n                    user: user,\n                    id: requestID\n                  }\n                });\n\n              case 5:\n                _ref2 = _context.sent;\n                filter_sale_artworks = _ref2.filter_sale_artworks;\n\n                if (filter_sale_artworks.hits && filter_sale_artworks.hits.length) {\n                  analyticsHooks.trigger('auction:artworks:loaded', {\n                    data: filter_sale_artworks.hits.map(function (sale_artwork) {\n                      return sale_artwork.artwork._id;\n                    })\n                  });\n                }\n\n                aggregations = filter_sale_artworks.aggregations;\n                artistAggregation = aggregations.filter(function (agg) {\n                  return agg.slice === 'ARTIST';\n                });\n                mediumAggregation = aggregations.filter(function (agg) {\n                  return agg.slice === 'MEDIUM';\n                });\n                dispatch(updateAggregatedArtists(artistAggregation[0].counts));\n                dispatch(updateAggregatedMediums(mediumAggregation[0].counts));\n                dispatch(updateInitialMediumMap(mediumAggregation[0].counts));\n                dispatch(updateTotal(filter_sale_artworks.counts.total));\n                dispatch(updateNumArtistsYouFollow(filter_sale_artworks.counts.followed_artists));\n                dispatch(updateSaleArtworks(filter_sale_artworks.hits));\n                dispatch(updateAllFetched());\n                dispatch(getArtworksSuccess());\n                _context.next = 25;\n                break;\n\n              case 21:\n                _context.prev = 21;\n                _context.t0 = _context[\"catch\"](1);\n                dispatch(getArtworksFailure());\n                console.error('error!', _context.t0);\n\n              case 25:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 21]]);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n}\nexport function fetchArtworksByFollowedArtists() {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(dispatch, getState) {\n        var _getState2, _getState2$artworkBro, followedArtistRailMax, followedArtistRailPage, filterParams, requestID, user, inputVars, _ref4, filter_sale_artworks;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _getState2 = getState(), _getState2$artworkBro = _getState2.artworkBrowser, followedArtistRailMax = _getState2$artworkBro.followedArtistRailMax, followedArtistRailPage = _getState2$artworkBro.followedArtistRailPage, filterParams = _getState2$artworkBro.filterParams, requestID = _getState2$artworkBro.requestID, user = _getState2$artworkBro.user;\n                inputVars = {\n                  sale_id: filterParams.sale_id,\n                  page: followedArtistRailPage,\n                  size: followedArtistRailMax\n                };\n                _context2.prev = 2;\n                _context2.next = 5;\n                return metaphysics({\n                  query: worksByFollowedArtists,\n                  variables: inputVars,\n                  req: {\n                    user: user,\n                    id: requestID\n                  }\n                });\n\n              case 5:\n                _ref4 = _context2.sent;\n                filter_sale_artworks = _ref4.filter_sale_artworks;\n\n                if (filter_sale_artworks.hits.length > 0) {\n                  dispatch(updateSaleArtworksByFollowedArtists(filter_sale_artworks.hits));\n                  dispatch(updateSaleArtworksByFollowedArtistsTotal(filter_sale_artworks.counts.total));\n                  dispatch(showFollowedArtistsRail());\n                }\n\n                _context2.next = 13;\n                break;\n\n              case 10:\n                _context2.prev = 10;\n                _context2.t0 = _context2[\"catch\"](2);\n                console.error('error!', _context2.t0);\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[2, 10]]);\n      }));\n\n      return function (_x3, _x4) {\n        return _ref3.apply(this, arguments);\n      };\n    }()\n  );\n}\nexport function fetchMoreArtworks() {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref5 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(dispatch, getState) {\n        var _getState3, _getState3$artworkBro, filterParams, user, _ref6, filter_sale_artworks;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _getState3 = getState(), _getState3$artworkBro = _getState3.artworkBrowser, filterParams = _getState3$artworkBro.filterParams, user = _getState3$artworkBro.user;\n                _context3.prev = 1;\n                dispatch(getArtworksRequest());\n                _context3.next = 5;\n                return metaphysics({\n                  query: filterQuery,\n                  variables: filterParams,\n                  req: {\n                    user: user\n                  }\n                });\n\n              case 5:\n                _ref6 = _context3.sent;\n                filter_sale_artworks = _ref6.filter_sale_artworks;\n                dispatch(updateSaleArtworks(filter_sale_artworks.hits));\n                dispatch(updateAllFetched());\n                dispatch(getArtworksSuccess());\n                _context3.next = 16;\n                break;\n\n              case 12:\n                _context3.prev = 12;\n                _context3.t0 = _context3[\"catch\"](1);\n                dispatch(getArtworksFailure());\n                console.error('error!', _context3.t0);\n\n              case 16:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[1, 12]]);\n      }));\n\n      return function (_x5, _x6) {\n        return _ref5.apply(this, arguments);\n      };\n    }()\n  );\n}\nexport function infiniteScroll() {\n  return function (dispatch, getState) {\n    var _getState4 = getState(),\n        _getState4$artworkBro = _getState4.artworkBrowser,\n        allFetched = _getState4$artworkBro.allFetched,\n        isFetchingArtworks = _getState4$artworkBro.isFetchingArtworks;\n\n    if (!isFetchingArtworks && !allFetched) {\n      dispatch(updatePage(false));\n      dispatch(fetchMoreArtworks());\n    }\n  };\n}\nexport function resetArtworks() {\n  return function (dispatch, getState) {\n    var _getState5 = getState(),\n        isFetchingArtworks = _getState5.artworkBrowser.isFetchingArtworks;\n\n    if (!isFetchingArtworks) {\n      dispatch(updatePage(true));\n      dispatch(fetchArtworks());\n    }\n  };\n}\nexport function toggleListView(isListView) {\n  return {\n    type: TOGGLE_LIST_VIEW,\n    payload: {\n      isListView: isListView\n    }\n  };\n}\nexport function updateAggregatedArtists(aggregatedArtists) {\n  return {\n    type: UPDATE_AGGREGATED_ARTISTS,\n    payload: {\n      aggregatedArtists: aggregatedArtists\n    }\n  };\n}\nexport function updateAggregatedMediums(aggregatedMediums) {\n  return {\n    type: UPDATE_AGGREGATED_MEDIUMS,\n    payload: {\n      aggregatedMediums: aggregatedMediums\n    }\n  };\n}\nexport function updateAllFetched() {\n  return {\n    type: UPDATE_ALL_FETCHED\n  };\n}\nexport function updateArtistId(artistId) {\n  return {\n    type: UPDATE_ARTIST_ID,\n    payload: {\n      artistId: artistId\n    }\n  };\n}\nexport function updateArtistParams(artistId) {\n  return function (dispatch) {\n    dispatch(updateArtistId(artistId));\n    dispatch(resetArtworks());\n  };\n}\nexport function showFollowedArtistsRail() {\n  return {\n    type: SHOW_FOLLOWED_ARTISTS_RAIL\n  };\n}\nexport function updateEstimateDisplay(min, max) {\n  return {\n    type: UPDATE_ESTIMATE_DISPLAY,\n    payload: {\n      min: min,\n      max: max\n    }\n  };\n}\nexport function updateEstimateRange(min, max) {\n  return function (dispatch) {\n    dispatch(updateEstimateRangeParams(min, max));\n    dispatch(resetArtworks());\n  };\n}\nexport function updateEstimateRangeParams(min, max) {\n  return {\n    type: UPDATE_ESTIMATE_RANGE,\n    payload: {\n      min: min,\n      max: max\n    }\n  };\n}\nexport function updateInitialMediumMap(initialMediumMap) {\n  return {\n    type: UPDATE_INITIAL_MEDIUM_MAP,\n    payload: {\n      initialMediumMap: initialMediumMap\n    }\n  };\n}\nexport function updateMediumId(mediumId) {\n  return {\n    type: UPDATE_MEDIUM_ID,\n    payload: {\n      mediumId: mediumId\n    }\n  };\n}\nexport function updateMediumParams(mediumId) {\n  return function (dispatch) {\n    dispatch(updateMediumId(mediumId));\n    dispatch(resetArtworks());\n  };\n}\nexport function updateNumArtistsYouFollow(numArtistsYouFollow) {\n  return {\n    type: UPDATE_NUM_ARTISTS_YOU_FOLLOW,\n    payload: {\n      numArtistsYouFollow: numArtistsYouFollow\n    }\n  };\n}\nexport function updatePage(reset) {\n  return {\n    type: UPDATE_PAGE,\n    payload: {\n      reset: reset\n    }\n  };\n}\nexport function updateSaleArtworks(saleArtworks) {\n  return {\n    type: UPDATE_SALE_ARTWORKS,\n    payload: {\n      saleArtworks: saleArtworks\n    }\n  };\n}\nexport function updateSaleArtworksByFollowedArtists(saleArtworks) {\n  return {\n    type: UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS,\n    payload: {\n      saleArtworks: saleArtworks\n    }\n  };\n}\nexport function updateSaleArtworksByFollowedArtistsTotal(total) {\n  return {\n    type: UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS_TOTAL,\n    payload: {\n      total: total\n    }\n  };\n}\nexport function updateSort(sort) {\n  return function (dispatch) {\n    dispatch(updateSortParam(sort));\n    dispatch(resetArtworks());\n  };\n}\nexport function updateSortParam(sort) {\n  return {\n    type: UPDATE_SORT,\n    payload: {\n      sort: sort\n    }\n  };\n}\nexport function updateTotal(total) {\n  return {\n    type: UPDATE_TOTAL,\n    payload: {\n      total: total\n    }\n  };\n}\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(metaphysics, \"metaphysics\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(GET_ARTWORKS_FAILURE, \"GET_ARTWORKS_FAILURE\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(GET_ARTWORKS_REQUEST, \"GET_ARTWORKS_REQUEST\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(GET_ARTWORKS_SUCCESS, \"GET_ARTWORKS_SUCCESS\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(SHOW_FOLLOWED_ARTISTS_RAIL, \"SHOW_FOLLOWED_ARTISTS_RAIL\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(TOGGLE_LIST_VIEW, \"TOGGLE_LIST_VIEW\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(UPDATE_AGGREGATED_ARTISTS, \"UPDATE_AGGREGATED_ARTISTS\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(UPDATE_AGGREGATED_MEDIUMS, \"UPDATE_AGGREGATED_MEDIUMS\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(UPDATE_ALL_FETCHED, \"UPDATE_ALL_FETCHED\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(UPDATE_ARTIST_ID, \"UPDATE_ARTIST_ID\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(UPDATE_ESTIMATE_DISPLAY, \"UPDATE_ESTIMATE_DISPLAY\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(UPDATE_ESTIMATE_RANGE, \"UPDATE_ESTIMATE_RANGE\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(UPDATE_INITIAL_MEDIUM_MAP, \"UPDATE_INITIAL_MEDIUM_MAP\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(UPDATE_MEDIUM_ID, \"UPDATE_MEDIUM_ID\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(UPDATE_NUM_ARTISTS_YOU_FOLLOW, \"UPDATE_NUM_ARTISTS_YOU_FOLLOW\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(UPDATE_PAGE, \"UPDATE_PAGE\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(UPDATE_SALE_ARTWORKS, \"UPDATE_SALE_ARTWORKS\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS, \"UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS_TOTAL, \"UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS_TOTAL\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(UPDATE_SORT, \"UPDATE_SORT\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(UPDATE_TOTAL, \"UPDATE_TOTAL\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(getArtworksFailure, \"getArtworksFailure\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(getArtworksRequest, \"getArtworksRequest\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(getArtworksSuccess, \"getArtworksSuccess\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(fetchArtworks, \"fetchArtworks\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(fetchArtworksByFollowedArtists, \"fetchArtworksByFollowedArtists\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(fetchMoreArtworks, \"fetchMoreArtworks\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(infiniteScroll, \"infiniteScroll\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(resetArtworks, \"resetArtworks\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(toggleListView, \"toggleListView\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(updateAggregatedArtists, \"updateAggregatedArtists\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(updateAggregatedMediums, \"updateAggregatedMediums\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(updateAllFetched, \"updateAllFetched\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(updateArtistId, \"updateArtistId\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(updateArtistParams, \"updateArtistParams\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(showFollowedArtistsRail, \"showFollowedArtistsRail\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(updateEstimateDisplay, \"updateEstimateDisplay\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(updateEstimateRange, \"updateEstimateRange\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(updateEstimateRangeParams, \"updateEstimateRangeParams\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(updateInitialMediumMap, \"updateInitialMediumMap\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(updateMediumId, \"updateMediumId\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(updateMediumParams, \"updateMediumParams\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(updateNumArtistsYouFollow, \"updateNumArtistsYouFollow\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(updatePage, \"updatePage\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(updateSaleArtworks, \"updateSaleArtworks\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(updateSaleArtworksByFollowedArtists, \"updateSaleArtworksByFollowedArtists\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(updateSaleArtworksByFollowedArtistsTotal, \"updateSaleArtworksByFollowedArtistsTotal\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(updateSort, \"updateSort\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(updateSortParam, \"updateSortParam\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  reactHotLoader.register(updateTotal, \"updateTotal\", \"/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/eve/development/force/src/desktop/apps/auction/actions/artworkBrowser.js"],"names":["analyticsHooks","_metaphysics","filterQuery","worksByFollowedArtists","metaphysics","GET_ARTWORKS_FAILURE","GET_ARTWORKS_REQUEST","GET_ARTWORKS_SUCCESS","SHOW_FOLLOWED_ARTISTS_RAIL","TOGGLE_LIST_VIEW","UPDATE_AGGREGATED_ARTISTS","UPDATE_AGGREGATED_MEDIUMS","UPDATE_ALL_FETCHED","UPDATE_ARTIST_ID","UPDATE_ESTIMATE_DISPLAY","UPDATE_ESTIMATE_RANGE","UPDATE_INITIAL_MEDIUM_MAP","UPDATE_MEDIUM_ID","UPDATE_NUM_ARTISTS_YOU_FOLLOW","UPDATE_PAGE","UPDATE_SALE_ARTWORKS","UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS","UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS_TOTAL","UPDATE_SORT","UPDATE_TOTAL","getArtworksFailure","type","getArtworksRequest","getArtworksSuccess","fetchArtworks","dispatch","getState","artworkBrowser","filterParams","requestID","user","query","variables","req","id","filter_sale_artworks","hits","length","trigger","data","map","sale_artwork","artwork","_id","aggregations","artistAggregation","filter","agg","slice","mediumAggregation","updateAggregatedArtists","counts","updateAggregatedMediums","updateInitialMediumMap","updateTotal","total","updateNumArtistsYouFollow","followed_artists","updateSaleArtworks","updateAllFetched","console","error","fetchArtworksByFollowedArtists","followedArtistRailMax","followedArtistRailPage","inputVars","sale_id","page","size","updateSaleArtworksByFollowedArtists","updateSaleArtworksByFollowedArtistsTotal","showFollowedArtistsRail","fetchMoreArtworks","infiniteScroll","allFetched","isFetchingArtworks","updatePage","resetArtworks","toggleListView","isListView","payload","aggregatedArtists","aggregatedMediums","updateArtistId","artistId","updateArtistParams","updateEstimateDisplay","min","max","updateEstimateRange","updateEstimateRangeParams","initialMediumMap","updateMediumId","mediumId","updateMediumParams","numArtistsYouFollow","reset","saleArtworks","updateSort","sort","updateSortParam"],"mappings":"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","sourcesContent":["import analyticsHooks from 'desktop/lib/analytics_hooks.coffee'\nimport _metaphysics from 'lib/metaphysics.coffee'\nimport { filterQuery } from 'desktop/apps/auction/queries/filter'\nimport { worksByFollowedArtists } from 'desktop/apps/auction/queries/worksByFollowedArtists'\n\n// FIXME: Rewire\nlet metaphysics = _metaphysics\n\n// Action types\nexport const GET_ARTWORKS_FAILURE = 'GET_ARTWORKS_FAILURE'\nexport const GET_ARTWORKS_REQUEST = 'GET_ARTWORKS_REQUEST'\nexport const GET_ARTWORKS_SUCCESS = 'GET_ARTWORKS_SUCCESS'\nexport const SHOW_FOLLOWED_ARTISTS_RAIL = 'SHOW_FOLLOWED_ARTISTS_RAIL'\nexport const TOGGLE_LIST_VIEW = 'TOGGLE_LIST_VIEW'\nexport const UPDATE_AGGREGATED_ARTISTS = 'UPDATE_AGGREGATED_ARTISTS'\nexport const UPDATE_AGGREGATED_MEDIUMS = 'UPDATE_AGGREGATED_MEDIUMS'\nexport const UPDATE_ALL_FETCHED = 'UPDATE_ALL_FETCHED'\nexport const UPDATE_ARTIST_ID = 'UPDATE_ARTIST_ID'\nexport const UPDATE_ESTIMATE_DISPLAY = 'UPDATE_ESTIMATE_DISPLAY'\nexport const UPDATE_ESTIMATE_RANGE = 'UPDATE_ESTIMATE_RANGE'\nexport const UPDATE_INITIAL_MEDIUM_MAP = 'UPDATE_INITIAL_MEDIUM_MAP'\nexport const UPDATE_MEDIUM_ID = 'UPDATE_MEDIUM_ID'\nexport const UPDATE_NUM_ARTISTS_YOU_FOLLOW = 'UPDATE_NUM_ARTISTS_YOU_FOLLOW'\nexport const UPDATE_PAGE = 'UPDATE_PAGE'\nexport const UPDATE_SALE_ARTWORKS = 'UPDATE_SALE_ARTWORKS'\nexport const UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS = 'UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS'\nexport const UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS_TOTAL = 'UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS_TOTAL'\nexport const UPDATE_SORT = 'UPDATE_SORT'\nexport const UPDATE_TOTAL = 'UPDATE_TOTAL'\n\n// Action creators\nexport function getArtworksFailure () {\n  return {\n    type: GET_ARTWORKS_FAILURE\n  }\n}\n\nexport function getArtworksRequest () {\n  return {\n    type: GET_ARTWORKS_REQUEST\n  }\n}\n\nexport function getArtworksSuccess () {\n  return {\n    type: GET_ARTWORKS_SUCCESS\n  }\n}\n\nexport function fetchArtworks () {\n  return async (dispatch, getState) => {\n    const {\n      artworkBrowser: {\n        filterParams,\n        requestID,\n        user\n      }\n    } = getState()\n\n    try {\n      dispatch(getArtworksRequest())\n\n      const { filter_sale_artworks } = await metaphysics({\n        query: filterQuery,\n        variables: filterParams,\n        req: {\n          user,\n          id: requestID\n        }\n      })\n\n      if (filter_sale_artworks.hits && filter_sale_artworks.hits.length) {\n        analyticsHooks.trigger(\n          'auction:artworks:loaded',\n          { data: filter_sale_artworks.hits.map((sale_artwork) => sale_artwork.artwork._id) }\n        )\n      }\n\n      const aggregations = filter_sale_artworks.aggregations\n      const artistAggregation = aggregations.filter((agg) => agg.slice === 'ARTIST')\n      const mediumAggregation = aggregations.filter((agg) => agg.slice === 'MEDIUM')\n\n      dispatch(updateAggregatedArtists(artistAggregation[0].counts))\n      dispatch(updateAggregatedMediums(mediumAggregation[0].counts))\n      dispatch(updateInitialMediumMap(mediumAggregation[0].counts))\n      dispatch(updateTotal(filter_sale_artworks.counts.total))\n      dispatch(updateNumArtistsYouFollow(filter_sale_artworks.counts.followed_artists))\n      dispatch(updateSaleArtworks(filter_sale_artworks.hits))\n      dispatch(updateAllFetched())\n      dispatch(getArtworksSuccess())\n    } catch (error) {\n      dispatch(getArtworksFailure())\n      console.error('error!', error)\n    }\n  }\n}\n\nexport function fetchArtworksByFollowedArtists () {\n  return async (dispatch, getState) => {\n    const {\n      artworkBrowser: {\n        followedArtistRailMax,\n        followedArtistRailPage,\n        filterParams,\n        requestID,\n        user\n      }\n    } = getState()\n\n    const inputVars = {\n      sale_id: filterParams.sale_id,\n      page: followedArtistRailPage,\n      size: followedArtistRailMax\n    }\n\n    try {\n      const { filter_sale_artworks } = await metaphysics({\n        query: worksByFollowedArtists,\n        variables: inputVars,\n        req: {\n          user,\n          id: requestID\n        }\n      })\n      if (filter_sale_artworks.hits.length > 0) {\n        dispatch(updateSaleArtworksByFollowedArtists(filter_sale_artworks.hits))\n        dispatch(updateSaleArtworksByFollowedArtistsTotal(filter_sale_artworks.counts.total))\n        dispatch(showFollowedArtistsRail())\n      }\n    } catch (error) {\n      console.error('error!', error)\n    }\n  }\n}\n\nexport function fetchMoreArtworks () {\n  return async (dispatch, getState) => {\n    const {\n      artworkBrowser: {\n        filterParams,\n        user\n      }\n    } = getState()\n\n    try {\n      dispatch(getArtworksRequest())\n      const { filter_sale_artworks } = await metaphysics({\n        query: filterQuery,\n        variables: filterParams,\n        req: {\n          user\n        }\n      })\n      dispatch(updateSaleArtworks(filter_sale_artworks.hits))\n      dispatch(updateAllFetched())\n      dispatch(getArtworksSuccess())\n    } catch (error) {\n      dispatch(getArtworksFailure())\n      console.error('error!', error)\n    }\n  }\n}\n\nexport function infiniteScroll () {\n  return (dispatch, getState) => {\n    const {\n      artworkBrowser: {\n        allFetched,\n        isFetchingArtworks\n      }\n    } = getState()\n    if (!isFetchingArtworks && !allFetched) {\n      dispatch(updatePage(false))\n      dispatch(fetchMoreArtworks())\n    }\n  }\n}\n\nexport function resetArtworks () {\n  return (dispatch, getState) => {\n    const {\n      artworkBrowser: {\n        isFetchingArtworks\n      }\n    } = getState()\n    if (!isFetchingArtworks) {\n      dispatch(updatePage(true))\n      dispatch(fetchArtworks())\n    }\n  }\n}\n\nexport function toggleListView (isListView) {\n  return {\n    type: TOGGLE_LIST_VIEW,\n    payload: {\n      isListView\n    }\n  }\n}\n\nexport function updateAggregatedArtists (aggregatedArtists) {\n  return {\n    type: UPDATE_AGGREGATED_ARTISTS,\n    payload: {\n      aggregatedArtists\n    }\n  }\n}\n\nexport function updateAggregatedMediums (aggregatedMediums) {\n  return {\n    type: UPDATE_AGGREGATED_MEDIUMS,\n    payload: {\n      aggregatedMediums\n    }\n  }\n}\n\nexport function updateAllFetched () {\n  return {\n    type: UPDATE_ALL_FETCHED\n  }\n}\n\nexport function updateArtistId (artistId) {\n  return {\n    type: UPDATE_ARTIST_ID,\n    payload: {\n      artistId\n    }\n  }\n}\n\nexport function updateArtistParams (artistId) {\n  return (dispatch) => {\n    dispatch(updateArtistId(artistId))\n    dispatch(resetArtworks())\n  }\n}\n\nexport function showFollowedArtistsRail () {\n  return {\n    type: SHOW_FOLLOWED_ARTISTS_RAIL\n  }\n}\n\nexport function updateEstimateDisplay (min, max) {\n  return {\n    type: UPDATE_ESTIMATE_DISPLAY,\n    payload: {\n      min,\n      max\n    }\n  }\n}\n\nexport function updateEstimateRange (min, max) {\n  return (dispatch) => {\n    dispatch(updateEstimateRangeParams(min, max))\n    dispatch(resetArtworks())\n  }\n}\n\nexport function updateEstimateRangeParams (min, max) {\n  return {\n    type: UPDATE_ESTIMATE_RANGE,\n    payload: {\n      min,\n      max\n    }\n  }\n}\n\nexport function updateInitialMediumMap (initialMediumMap) {\n  return {\n    type: UPDATE_INITIAL_MEDIUM_MAP,\n    payload: {\n      initialMediumMap\n    }\n  }\n}\n\nexport function updateMediumId (mediumId) {\n  return {\n    type: UPDATE_MEDIUM_ID,\n    payload: {\n      mediumId\n    }\n  }\n}\n\nexport function updateMediumParams (mediumId) {\n  return (dispatch) => {\n    dispatch(updateMediumId(mediumId))\n    dispatch(resetArtworks())\n  }\n}\n\nexport function updateNumArtistsYouFollow (numArtistsYouFollow) {\n  return {\n    type: UPDATE_NUM_ARTISTS_YOU_FOLLOW,\n    payload: {\n      numArtistsYouFollow\n    }\n  }\n}\n\nexport function updatePage (reset) {\n  return {\n    type: UPDATE_PAGE,\n    payload: {\n      reset\n    }\n  }\n}\n\nexport function updateSaleArtworks (saleArtworks) {\n  return {\n    type: UPDATE_SALE_ARTWORKS,\n    payload: {\n      saleArtworks\n    }\n  }\n}\n\nexport function updateSaleArtworksByFollowedArtists (saleArtworks) {\n  return {\n    type: UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS,\n    payload: {\n      saleArtworks\n    }\n  }\n}\n\nexport function updateSaleArtworksByFollowedArtistsTotal (total) {\n  return {\n    type: UPDATE_SALE_ARTWORKS_BY_FOLLOWED_ARTISTS_TOTAL,\n    payload: {\n      total\n    }\n  }\n}\n\nexport function updateSort (sort) {\n  return (dispatch) => {\n    dispatch(updateSortParam(sort))\n    dispatch(resetArtworks())\n  }\n}\n\nexport function updateSortParam (sort) {\n  return {\n    type: UPDATE_SORT,\n    payload: {\n      sort\n    }\n  }\n}\n\nexport function updateTotal (total) {\n  return {\n    type: UPDATE_TOTAL,\n    payload: {\n      total\n    }\n  }\n}\n"]}]}