{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/apps/tag/client.js","dependencies":[{"path":"/Users/eve/development/force/src/desktop/apps/tag/client.js","mtime":1521064654000},{"path":"/Users/eve/development/force/.babelrc","mtime":1528124541000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _assign = _interopRequireDefault(require(\"@babel/runtime/core-js/object/assign\"));\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _querystring = _interopRequireDefault(require(\"querystring\"));\n\nvar _sharify = require(\"sharify\");\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\n\nvar _Tag = require(\"@artsy/reaction/dist/Components/Tag\");\n\nvar _Artsy = require(\"@artsy/reaction/dist/Components/Artsy\");\n\nvar _tag = _interopRequireDefault(require(\"../../models/tag.coffee\"));\n\nvar _current_user = _interopRequireDefault(require(\"../../models/current_user.coffee\"));\n\n// Update URL with current filters/mode/sort, for ease of sharing.\nvar onStateChange = function onStateChange(_ref) {\n  var filters = _ref.filters,\n      sort = _ref.sort;\n  var params = (0, _extends2.default)({}, filters, {\n    sort: sort\n  });\n\n  var fragment = '?' + _querystring.default.stringify(params);\n\n  window.history.replaceState({}, new _tag.default(_sharify.data.GENE).toPageTitle(), fragment);\n};\n\nfunction setupTagPage() {\n  // Pull out sort and filters from URL, if present\n  var urlParams = _querystring.default.parse(location.search.replace(/^\\?/, ''));\n\n  var sort;\n\n  if (urlParams.sort) {\n    sort = urlParams.sort;\n    delete urlParams.sort;\n  }\n\n  var options = (0, _assign.default)({}, {\n    sort: sort\n  }, {\n    filters: (0, _extends2.default)({}, urlParams)\n  }, {\n    tagID: _sharify.data.TAG.id\n  });\n\n  var user = _current_user.default.orNull();\n\n  _reactDom.default.render(_react.default.createElement(_Artsy.ContextProvider, {\n    currentUser: user ? user.toJSON() : null\n  }, _react.default.createElement(_Tag.Contents, (0, _extends2.default)({}, options, {\n    onStateChange: onStateChange\n  }))), document.getElementById('tag-filter'));\n}\n\nvar _default = {\n  setupTagPage: setupTagPage\n};\nexports.default = _default;",{"version":3,"sources":["src/desktop/apps/tag/client.js"],"names":["onStateChange","filters","sort","params","fragment","stringify","window","history","replaceState","GENE","toPageTitle","setupTagPage","urlParams","parse","location","search","replace","options","tagID","TAG","id","user","orNull","render","toJSON","document","getElementById"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AAEA;AACA,IAAMA,gBAAgB,SAAhBA,aAAgB,OAAuB;AAAA,MAApBC,OAAoB,QAApBA,OAAoB;AAAA,MAAXC,IAAW,QAAXA,IAAW;AAC3C,MAAMC,oCAAcF,OAAd;AAAuBC;AAAvB,IAAN;;AACA,MAAME,WAAW,MAAM,qBAAGC,SAAH,CAAaF,MAAb,CAAvB;;AACAG,SAAOC,OAAP,CAAeC,YAAf,CAA4B,EAA5B,EAAgC,iBAAQ,cAAGC,IAAX,EAAiBC,WAAjB,EAAhC,EAAgEN,QAAhE;AACD,CAJD;;AAMA,SAASO,YAAT,GAAwB;AACtB;AACA,MAAMC,YAAY,qBAAGC,KAAH,CAASC,SAASC,MAAT,CAAgBC,OAAhB,CAAwB,KAAxB,EAA+B,EAA/B,CAAT,CAAlB;;AACA,MAAId,IAAJ;;AACA,MAAIU,UAAUV,IAAd,EAAoB;AAClBA,WAAOU,UAAUV,IAAjB;AACA,WAAOU,UAAUV,IAAjB;AACD;;AAED,MAAMe,UAAU,qBACd,EADc,EAEd;AAAEf;AAAF,GAFc,EAGd;AAAED,wCAAcW,SAAd;AAAF,GAHc,EAId;AAAEM,WAAO,cAAGC,GAAH,CAAOC;AAAhB,GAJc,CAAhB;;AAMA,MAAMC,OAAO,sBAAYC,MAAZ,EAAb;;AACA,oBAASC,MAAT,CACE;AAAiB,iBAAaF,OAAOA,KAAKG,MAAL,EAAP,GAAuB;AAArD,KACE,uEAAcP,OAAd;AAAuB,mBAAejB;AAAtC,KADF,CADF,EAIEyB,SAASC,cAAT,CAAwB,YAAxB,CAJF;AAMD;;eAEc;AAAEf;AAAF,C","file":"/Users/eve/development/force/src/desktop/apps/tag/client.js","sourceRoot":"/Users/eve/development/force","sourcesContent":["import qs from 'querystring'\nimport { data as sd } from 'sharify'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Contents } from 'reaction/Components/Tag'\nimport { ContextProvider } from 'reaction/Components/Artsy'\n\nimport Tag from '../../models/tag.coffee'\nimport CurrentUser from '../../models/current_user.coffee'\n\n// Update URL with current filters/mode/sort, for ease of sharing.\nconst onStateChange = ({ filters, sort }) => {\n  const params = { ...filters, sort }\n  const fragment = '?' + qs.stringify(params)\n  window.history.replaceState({}, new Tag(sd.GENE).toPageTitle(), fragment)\n}\n\nfunction setupTagPage() {\n  // Pull out sort and filters from URL, if present\n  const urlParams = qs.parse(location.search.replace(/^\\?/, ''))\n  let sort\n  if (urlParams.sort) {\n    sort = urlParams.sort\n    delete urlParams.sort\n  }\n\n  const options = Object.assign(\n    {},\n    { sort },\n    { filters: { ...urlParams } },\n    { tagID: sd.TAG.id }\n  )\n  const user = CurrentUser.orNull()\n  ReactDOM.render(\n    <ContextProvider currentUser={user ? user.toJSON() : null}>\n      <Contents {...options} onStateChange={onStateChange} />\n    </ContextProvider>,\n    document.getElementById('tag-filter')\n  )\n}\n\nexport default { setupTagPage }\n"]}]}