{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/analytics/criteo.js","dependencies":[{"path":"/Users/eve/development/force/src/desktop/analytics/criteo.js","mtime":1519227435000},{"path":"/Users/eve/development/force/.babelrc","mtime":1537178749000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\n//\n// Criteo tracking for auctions product feed and artworks product feed\n//\nwindow.criteo_q = window.criteo_q || [];\nvar pathSplit = location.pathname.split('/');\n\nvar userEmail = function () {\n  return sd.CURRENT_USER ? [sd.CURRENT_USER.email] : [];\n}();\n\nif (pathSplit[1] === 'auctions') {\n  // http://www.artsy.net/auctions - (AUCTIONS viewHome)\n  //              0          1\n  window.criteo_q.push({\n    event: 'setAccount',\n    account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER\n  }, {\n    event: 'setSiteType',\n    type: 'd'\n  }, {\n    event: 'viewHome'\n  });\n} else if (pathSplit[1] === 'auction') {\n  if (!pathSplit[3]) {\n    // https://www.artsy.net/auction/:auction_id - (AUCTIONS viewList)\n    //              0          1          2\n    analyticsHooks.on('auction:artworks:loaded', function (artworks) {\n      window.criteo_q.push({\n        event: 'setAccount',\n        account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER\n      }, {\n        event: 'setSiteType',\n        type: 'd'\n      }, {\n        event: 'viewList',\n        item: artworks\n      });\n    });\n  } else if (pathSplit[3] === 'bid') {\n    // https://www.artsy.net/auction/:auction_id/bid - (AUCTIONS trackTransaction)\n    //              0          1          2       3\n    analyticsHooks.on('confirm:bid:form:success', function (data) {\n      var price = data.max_bid_amount_cents ? data.max_bid_amount_cents / 100 : null;\n      window.criteo_q.push({\n        event: 'setAccount',\n        account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER\n      }, {\n        event: 'setSiteType',\n        type: 'd'\n      }, {\n        event: 'trackTransaction',\n        id: data.bidder_position_id,\n        item: [{\n          id: sd.SALE_ARTWORK.artwork._id,\n          price: price,\n          quantity: 1\n        }]\n      });\n    });\n  }\n} else if (pathSplit[1] === 'artwork' && !pathSplit[3]) {\n  // https://www.artsy.net/artwork/:artwork_id - (AUCTIONS & ARTWORKS viewItem)\n  //              0          1          2\n  //\n  // We cannot send both ids on product pages, so, send the Auctions account ID\n  // if the artwork is in an auction, otherwise send the Artworks account ID.\n  if (sd.AUCTION && sd.AUCTION.artwork_id) {\n    window.criteo_q.push({\n      event: \"setAccount\",\n      account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER\n    }, {\n      event: \"setSiteType\",\n      type: \"m\"\n    }, {\n      event: \"viewItem\",\n      item: sd.AUCTION && sd.AUCTION.artwork_id\n    });\n  } else {\n    window.criteo_q.push({\n      event: 'setAccount',\n      account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER\n    }, {\n      event: 'setSiteType',\n      type: 'd'\n    }, {\n      event: 'setEmail',\n      email: userEmail\n    }, {\n      event: 'viewItem',\n      item: sd.COMMERCIAL.artwork._id\n    });\n  } // ARTWORKS viewBasket\n\n\n  analyticsHooks.on('inquiry_questionnaire:modal:opened', function (data) {\n    window.criteo_q.push({\n      event: 'setAccount',\n      account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER\n    }, {\n      event: 'setSiteType',\n      type: 'd'\n    }, {\n      event: 'setEmail',\n      email: userEmail\n    }, {\n      event: 'viewBasket',\n      item: [{\n        id: sd.COMMERCIAL.artwork._id,\n        price: sd.COMMERCIAL.artwork.price,\n        quantity: 1\n      }]\n    });\n  }); // ARTWORKS trackTransaction\n\n  analyticsHooks.on('inquiry_questionnaire:inquiry:sync', function (data) {\n    window.criteo_q.push({\n      event: 'setAccount',\n      account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER\n    }, {\n      event: 'setSiteType',\n      type: 'd'\n    }, {\n      event: 'setEmail',\n      email: userEmail\n    }, {\n      event: 'trackTransaction',\n      id: data.inquiry.id,\n      item: [{\n        id: sd.COMMERCIAL.artwork._id,\n        price: sd.COMMERCIAL.artwork.price,\n        quantity: 1\n      }]\n    });\n  });\n} else {\n  if (pathSplit[1] === 'collect') {\n    // https://www.artsy.net/collect - (ARTWORKS viewHome)\n    //              0          1\n    window.criteo_q.push({\n      event: 'setAccount',\n      account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER\n    }, {\n      event: 'setSiteType',\n      type: 'd'\n    }, {\n      event: 'setEmail',\n      email: userEmail\n    }, {\n      event: 'viewHome'\n    });\n  }\n}\n\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(pathSplit, \"pathSplit\", \"/Users/eve/development/force/src/desktop/analytics/criteo.js\");\n  reactHotLoader.register(userEmail, \"userEmail\", \"/Users/eve/development/force/src/desktop/analytics/criteo.js\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/eve/development/force/src/desktop/analytics/criteo.js"],"names":["window","criteo_q","pathSplit","location","pathname","split","userEmail","sd","CURRENT_USER","email","push","event","account","CRITEO_AUCTIONS_ACCOUNT_NUMBER","type","analyticsHooks","on","artworks","item","data","price","max_bid_amount_cents","id","bidder_position_id","SALE_ARTWORK","artwork","_id","quantity","AUCTION","artwork_id","CRITEO_ARTWORKS_ACCOUNT_NUMBER","COMMERCIAL","inquiry"],"mappings":"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","sourcesContent":["//\n// Criteo tracking for auctions product feed and artworks product feed\n//\nwindow.criteo_q = window.criteo_q || []\nvar pathSplit = location.pathname.split('/')\nvar userEmail = function() {\n  return sd.CURRENT_USER ? [sd.CURRENT_USER.email] : [];\n}()\nif (pathSplit[1] === 'auctions') {\n  // http://www.artsy.net/auctions - (AUCTIONS viewHome)\n  //              0          1\n  window.criteo_q.push(\n    { event: 'setAccount', account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER },\n    { event: 'setSiteType', type: 'd' },\n    { event: 'viewHome' }\n  )\n} else if (pathSplit[1] === 'auction') {\n  if (!pathSplit[3]) {\n    // https://www.artsy.net/auction/:auction_id - (AUCTIONS viewList)\n    //              0          1          2\n    analyticsHooks.on('auction:artworks:loaded', function(artworks) {\n      window.criteo_q.push(\n        { event: 'setAccount', account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER },\n        { event: 'setSiteType', type: 'd' },\n        { event: 'viewList', item: artworks }\n      )\n    })\n  } else if (pathSplit[3] === 'bid') {\n    // https://www.artsy.net/auction/:auction_id/bid - (AUCTIONS trackTransaction)\n    //              0          1          2       3\n    analyticsHooks.on('confirm:bid:form:success', function(data) {\n      const price = data.max_bid_amount_cents ? data.max_bid_amount_cents / 100 : null\n      window.criteo_q.push(\n        { event: 'setAccount', account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER },\n        { event: 'setSiteType', type: 'd' },\n        {\n          event: 'trackTransaction',\n          id: data.bidder_position_id,\n          item: [\n            {\n              id: sd.SALE_ARTWORK.artwork._id,\n              price: price,\n              quantity: 1\n            }\n          ]\n        }\n      )\n    })\n  }\n} else if (pathSplit[1] === 'artwork' && !pathSplit[3]) {\n  // https://www.artsy.net/artwork/:artwork_id - (AUCTIONS & ARTWORKS viewItem)\n  //              0          1          2\n  //\n  // We cannot send both ids on product pages, so, send the Auctions account ID\n  // if the artwork is in an auction, otherwise send the Artworks account ID.\n  if (sd.AUCTION && sd.AUCTION.artwork_id) {\n    window.criteo_q.push(\n      { event: \"setAccount\", account: sd.CRITEO_AUCTIONS_ACCOUNT_NUMBER },\n      { event: \"setSiteType\", type: \"m\" },\n      { event: \"viewItem\", item: sd.AUCTION && sd.AUCTION.artwork_id }\n    )\n  } else {\n    window.criteo_q.push(\n      { event: 'setAccount', account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER },\n      { event: 'setSiteType', type: 'd' },\n      { event: 'setEmail', email: userEmail },\n      { event: 'viewItem', item: sd.COMMERCIAL.artwork._id }\n    )\n  }\n  // ARTWORKS viewBasket\n  analyticsHooks.on('inquiry_questionnaire:modal:opened', function(data) {\n    window.criteo_q.push(\n      { event: 'setAccount', account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER },\n      { event: 'setSiteType', type: 'd' },\n      { event: 'setEmail', email: userEmail },\n      {\n        event: 'viewBasket',\n        item: [\n          {\n            id: sd.COMMERCIAL.artwork._id,\n            price: sd.COMMERCIAL.artwork.price,\n            quantity: 1\n          }\n        ]\n      }\n    )\n  })\n  // ARTWORKS trackTransaction\n  analyticsHooks.on('inquiry_questionnaire:inquiry:sync', function(data) {\n    window.criteo_q.push(\n      { event: 'setAccount', account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER },\n      { event: 'setSiteType', type: 'd' },\n      { event: 'setEmail', email: userEmail },\n      {\n        event: 'trackTransaction',\n        id: data.inquiry.id,\n        item: [\n          {\n            id: sd.COMMERCIAL.artwork._id,\n            price: sd.COMMERCIAL.artwork.price,\n            quantity: 1\n          }\n        ]\n      }\n    )\n  })\n} else {\n  if (pathSplit[1] === 'collect') {\n    // https://www.artsy.net/collect - (ARTWORKS viewHome)\n    //              0          1\n    window.criteo_q.push(\n      { event: 'setAccount', account: sd.CRITEO_ARTWORKS_ACCOUNT_NUMBER },\n      { event: 'setSiteType', type: 'd' },\n      { event: 'setEmail', email: userEmail },\n      { event: 'viewHome' }\n    )\n  }\n}\n"]}]}