{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/apps/consign/client/actions.js","dependencies":[{"path":"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js","mtime":1527619810000},{"path":"/Users/eve/development/force/.babelrc","mtime":1528124541000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":1509489566000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addAssetId = addAssetId;\nexports.addImageToUploadedImages = addImageToUploadedImages;\nexports.chooseArtist = chooseArtist;\nexports.chooseArtistAdvance = chooseArtistAdvance;\nexports.chooseLocation = chooseLocation;\nexports.clearArtistSuggestions = clearArtistSuggestions;\nexports.clearError = clearError;\nexports.clearLocationData = clearLocationData;\nexports.clearLocationSuggestions = clearLocationSuggestions;\nexports.completeSubmission = completeSubmission;\nexports.createSubmission = createSubmission;\nexports.errorOnImage = errorOnImage;\nexports.fetchArtistSuggestions = fetchArtistSuggestions;\nexports.fetchLocationSuggestions = fetchLocationSuggestions;\nexports.freezeLocationInput = freezeLocationInput;\nexports.handleImageUpload = handleImageUpload;\nexports.hideNotConsigningMessage = hideNotConsigningMessage;\nexports.ignoreRedirectOnAuth = ignoreRedirectOnAuth;\nexports.logIn = logIn;\nexports.removeErroredImage = removeErroredImage;\nexports.removeImage = removeImage;\nexports.removeUploadedImage = removeUploadedImage;\nexports.resetPassword = resetPassword;\nexports.scrubLocation = scrubLocation;\nexports.showNotConsigningMessage = showNotConsigningMessage;\nexports.showResetPasswordSuccessMessage = showResetPasswordSuccessMessage;\nexports.signUp = signUp;\nexports.startProcessingImage = startProcessingImage;\nexports.stopProcessingImage = stopProcessingImage;\nexports.submitArtist = submitArtist;\nexports.submitDescribeWork = submitDescribeWork;\nexports.selectPhoto = selectPhoto;\nexports.showLoader = showLoader;\nexports.hideLoader = hideLoader;\nexports.submissionCreated = submissionCreated;\nexports.submissionCompleted = submissionCompleted;\nexports.submissionError = submissionError;\nexports.submitPhoto = submitPhoto;\nexports.unfreezeLocationInput = unfreezeLocationInput;\nexports.updateArtistAutocompleteValue = updateArtistAutocompleteValue;\nexports.updateArtistId = updateArtistId;\nexports.updateArtistName = updateArtistName;\nexports.updateArtistSuggestions = updateArtistSuggestions;\nexports.updateAuthFormState = updateAuthFormState;\nexports.updateAuthFormStateAndClearError = updateAuthFormStateAndClearError;\nexports.updateError = updateError;\nexports.updateCurrentStep = updateCurrentStep;\nexports.updateInputs = updateInputs;\nexports.updateLocationAutocomplete = updateLocationAutocomplete;\nexports.updateLocationAutocompleteValue = updateLocationAutocompleteValue;\nexports.updateLocationCityValue = updateLocationCityValue;\nexports.updateLocationInputValues = updateLocationInputValues;\nexports.updateLocationFromSubmissionAndFreeze = updateLocationFromSubmissionAndFreeze;\nexports.updateLocationSuggestions = updateLocationSuggestions;\nexports.updateProgressBar = updateProgressBar;\nexports.updateSkipPhotoSubmission = updateSkipPhotoSubmission;\nexports.updateStepsWithUser = updateStepsWithUser;\nexports.updateStepsWithoutUser = updateStepsWithoutUser;\nexports.updateSubmission = updateSubmission;\nexports.updateUser = updateUser;\nexports.updateUserPhone = updateUserPhone;\nexports.uploadImageToConvection = uploadImageToConvection;\nexports.uploadImageToGemini = uploadImageToGemini;\nexports.UPDATE_USER_PHONE = exports.UPDATE_USER = exports.UPDATE_SUBMISSION = exports.UPDATE_STEPS_WITHOUT_USER = exports.UPDATE_STEPS_WITH_USER = exports.UPDATE_SKIP_PHOTO_SUBMISSION = exports.UPDATE_PROGRESS_BAR = exports.UPDATE_LOCATION_VALUES = exports.UPDATE_LOCATION_SUGGESTIONS = exports.UPDATE_LOCATION_CITY_VALUE = exports.UPDATE_LOCATION_AUTOCOMPLETE_VALUE = exports.UPDATE_INPUTS = exports.UPDATE_ERROR = exports.UPDATE_CURRENT_STEP = exports.UPDATE_AUTH_FORM_STATE = exports.UPDATE_ARTIST_SUGGESTIONS = exports.UPDATE_ARTIST_NAME = exports.UPDATE_ARTIST_ID = exports.UPDATE_ARTIST_AUTOCOMPLETE_VALUE = exports.UNFREEZE_LOCATION_INPUT = exports.SUBMIT_ARTIST = exports.SUBMISSION_ERROR = exports.SUBMISSION_COMPLETED = exports.SUBMISSION_CREATED = exports.STOP_PROCESSING_IMAGE = exports.START_PROCESSING_IMAGE = exports.SHOW_RESET_PASSWORD_SUCCESS_MESSAGE = exports.SHOW_NOT_CONSIGNING_MESSAGE = exports.SHOW_LOADER = exports.REMOVE_UPLOADED_IMAGE = exports.REMOVE_ERRORED_IMAGE = exports.IGNORE_REDIRECT_ON_AUTH = exports.HIDE_NOT_CONSIGNING_MESSAGE = exports.HIDE_LOADER = exports.FREEZE_LOCATION_INPUT = exports.ERROR_ON_IMAGE = exports.CLEAR_LOCATION_SUGGESTIONS = exports.CLEAR_LOCATION_DATA = exports.CLEAR_ERROR = exports.CLEAR_ARTIST_SUGGESTIONS = exports.ADD_IMAGE_TO_UPLOADED_IMAGES = exports.ADD_ASSET_ID = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _superagent = _interopRequireDefault(require(\"superagent\"));\n\nvar _gemup = _interopRequireDefault(require(\"gemup\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash.get\"));\n\nvar _steps_config = _interopRequireDefault(require(\"./steps_config\"));\n\nvar _sharify = require(\"sharify\");\n\nvar _helpers = require(\"../helpers\");\n\nvar _underscore = require(\"underscore\");\n\nvar _reactRouterRedux = require(\"react-router-redux\");\n\n// FIXME: Rewire\nvar request = _superagent.default;\nvar sd = _sharify.data;\nvar fetchToken = _helpers.fetchToken; // Action types\n\nvar ADD_ASSET_ID = 'ADD_ASSET_ID';\nexports.ADD_ASSET_ID = ADD_ASSET_ID;\nvar ADD_IMAGE_TO_UPLOADED_IMAGES = 'ADD_IMAGE_TO_UPLOADED_IMAGES';\nexports.ADD_IMAGE_TO_UPLOADED_IMAGES = ADD_IMAGE_TO_UPLOADED_IMAGES;\nvar CLEAR_ARTIST_SUGGESTIONS = 'CLEAR_ARTIST_SUGGESTIONS';\nexports.CLEAR_ARTIST_SUGGESTIONS = CLEAR_ARTIST_SUGGESTIONS;\nvar CLEAR_ERROR = 'CLEAR_ERROR';\nexports.CLEAR_ERROR = CLEAR_ERROR;\nvar CLEAR_LOCATION_DATA = 'CLEAR_LOCATION_DATA';\nexports.CLEAR_LOCATION_DATA = CLEAR_LOCATION_DATA;\nvar CLEAR_LOCATION_SUGGESTIONS = 'CLEAR_LOCATION_SUGGESTIONS';\nexports.CLEAR_LOCATION_SUGGESTIONS = CLEAR_LOCATION_SUGGESTIONS;\nvar ERROR_ON_IMAGE = 'ERROR_ON_IMAGE';\nexports.ERROR_ON_IMAGE = ERROR_ON_IMAGE;\nvar FREEZE_LOCATION_INPUT = 'FREEZE_LOCATION_INPUT';\nexports.FREEZE_LOCATION_INPUT = FREEZE_LOCATION_INPUT;\nvar HIDE_LOADER = 'HIDE_LOADER';\nexports.HIDE_LOADER = HIDE_LOADER;\nvar HIDE_NOT_CONSIGNING_MESSAGE = 'HIDE_NOT_CONSIGNING_MESSAGE';\nexports.HIDE_NOT_CONSIGNING_MESSAGE = HIDE_NOT_CONSIGNING_MESSAGE;\nvar IGNORE_REDIRECT_ON_AUTH = 'IGNORE_REDIRECT_ON_AUTH';\nexports.IGNORE_REDIRECT_ON_AUTH = IGNORE_REDIRECT_ON_AUTH;\nvar REMOVE_ERRORED_IMAGE = 'REMOVE_ERRORED_IMAGE';\nexports.REMOVE_ERRORED_IMAGE = REMOVE_ERRORED_IMAGE;\nvar REMOVE_UPLOADED_IMAGE = 'REMOVE_UPLOADED_IMAGE';\nexports.REMOVE_UPLOADED_IMAGE = REMOVE_UPLOADED_IMAGE;\nvar SHOW_LOADER = 'SHOW_LOADER';\nexports.SHOW_LOADER = SHOW_LOADER;\nvar SHOW_NOT_CONSIGNING_MESSAGE = 'SHOW_NOT_CONSIGNING_MESSAGE';\nexports.SHOW_NOT_CONSIGNING_MESSAGE = SHOW_NOT_CONSIGNING_MESSAGE;\nvar SHOW_RESET_PASSWORD_SUCCESS_MESSAGE = 'SHOW_RESET_PASSWORD_SUCCESS_MESSAGE';\nexports.SHOW_RESET_PASSWORD_SUCCESS_MESSAGE = SHOW_RESET_PASSWORD_SUCCESS_MESSAGE;\nvar START_PROCESSING_IMAGE = 'START_PROCESSING_IMAGE';\nexports.START_PROCESSING_IMAGE = START_PROCESSING_IMAGE;\nvar STOP_PROCESSING_IMAGE = 'STOP_PROCESSING_IMAGE';\nexports.STOP_PROCESSING_IMAGE = STOP_PROCESSING_IMAGE;\nvar SUBMISSION_CREATED = 'SUBMISSION_CREATED';\nexports.SUBMISSION_CREATED = SUBMISSION_CREATED;\nvar SUBMISSION_COMPLETED = 'SUBMISSION_COMPLETED';\nexports.SUBMISSION_COMPLETED = SUBMISSION_COMPLETED;\nvar SUBMISSION_ERROR = 'SUBMISSION_ERROR';\nexports.SUBMISSION_ERROR = SUBMISSION_ERROR;\nvar SUBMIT_ARTIST = 'SUBMIT_ARTIST';\nexports.SUBMIT_ARTIST = SUBMIT_ARTIST;\nvar UNFREEZE_LOCATION_INPUT = 'UNFREEZE_LOCATION_INPUT';\nexports.UNFREEZE_LOCATION_INPUT = UNFREEZE_LOCATION_INPUT;\nvar UPDATE_ARTIST_AUTOCOMPLETE_VALUE = 'UPDATE_ARTIST_AUTOCOMPLETE_VALUE';\nexports.UPDATE_ARTIST_AUTOCOMPLETE_VALUE = UPDATE_ARTIST_AUTOCOMPLETE_VALUE;\nvar UPDATE_ARTIST_ID = 'UPDATE_ARTIST_ID';\nexports.UPDATE_ARTIST_ID = UPDATE_ARTIST_ID;\nvar UPDATE_ARTIST_NAME = 'UPDATE_ARTIST_NAME';\nexports.UPDATE_ARTIST_NAME = UPDATE_ARTIST_NAME;\nvar UPDATE_ARTIST_SUGGESTIONS = 'UPDATE_ARTIST_SUGGESTIONS';\nexports.UPDATE_ARTIST_SUGGESTIONS = UPDATE_ARTIST_SUGGESTIONS;\nvar UPDATE_AUTH_FORM_STATE = 'UPDATE_AUTH_FORM_STATE';\nexports.UPDATE_AUTH_FORM_STATE = UPDATE_AUTH_FORM_STATE;\nvar UPDATE_CURRENT_STEP = 'UPDATE_CURRENT_STEP';\nexports.UPDATE_CURRENT_STEP = UPDATE_CURRENT_STEP;\nvar UPDATE_ERROR = 'UPDATE_ERROR';\nexports.UPDATE_ERROR = UPDATE_ERROR;\nvar UPDATE_INPUTS = 'UPDATE_INPUTS';\nexports.UPDATE_INPUTS = UPDATE_INPUTS;\nvar UPDATE_LOCATION_AUTOCOMPLETE_VALUE = 'UPDATE_LOCATION_AUTOCOMPLETE_VALUE';\nexports.UPDATE_LOCATION_AUTOCOMPLETE_VALUE = UPDATE_LOCATION_AUTOCOMPLETE_VALUE;\nvar UPDATE_LOCATION_CITY_VALUE = 'UPDATE_LOCATION_CITY_VALUE';\nexports.UPDATE_LOCATION_CITY_VALUE = UPDATE_LOCATION_CITY_VALUE;\nvar UPDATE_LOCATION_SUGGESTIONS = 'UPDATE_LOCATION_SUGGESTIONS';\nexports.UPDATE_LOCATION_SUGGESTIONS = UPDATE_LOCATION_SUGGESTIONS;\nvar UPDATE_LOCATION_VALUES = 'UPDATE_LOCATION_VALUES';\nexports.UPDATE_LOCATION_VALUES = UPDATE_LOCATION_VALUES;\nvar UPDATE_PROGRESS_BAR = 'UPDATE_PROGRESS_BAR';\nexports.UPDATE_PROGRESS_BAR = UPDATE_PROGRESS_BAR;\nvar UPDATE_SKIP_PHOTO_SUBMISSION = 'UPDATE_SKIP_PHOTO_SUBMISSION';\nexports.UPDATE_SKIP_PHOTO_SUBMISSION = UPDATE_SKIP_PHOTO_SUBMISSION;\nvar UPDATE_STEPS_WITH_USER = 'UPDATE_STEPS_WITH_USER';\nexports.UPDATE_STEPS_WITH_USER = UPDATE_STEPS_WITH_USER;\nvar UPDATE_STEPS_WITHOUT_USER = 'UPDATE_STEPS_WITHOUT_USER';\nexports.UPDATE_STEPS_WITHOUT_USER = UPDATE_STEPS_WITHOUT_USER;\nvar UPDATE_SUBMISSION = 'UPDATE_SUBMISSION';\nexports.UPDATE_SUBMISSION = UPDATE_SUBMISSION;\nvar UPDATE_USER = 'UPDATE_USER';\nexports.UPDATE_USER = UPDATE_USER;\nvar UPDATE_USER_PHONE = 'UPDATE_USER_PHONE'; // Action creators\n\nexports.UPDATE_USER_PHONE = UPDATE_USER_PHONE;\n\nfunction addAssetId(assetId) {\n  return {\n    type: ADD_ASSET_ID,\n    payload: {\n      assetId: assetId\n    }\n  };\n}\n\nfunction addImageToUploadedImages(fileName, src) {\n  return {\n    type: ADD_IMAGE_TO_UPLOADED_IMAGES,\n    payload: {\n      fileName: fileName,\n      src: src\n    }\n  };\n}\n\nfunction chooseArtist(value) {\n  return function (dispatch) {\n    dispatch(updateArtistId(value._id));\n    dispatch(updateArtistName(value.name));\n  };\n}\n\nfunction chooseArtistAdvance() {\n  return function (dispatch) {\n    dispatch(submitArtist());\n    dispatch((0, _reactRouterRedux.push)(_steps_config.default.describeWork.path));\n  };\n}\n\nfunction chooseLocation(location) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee(dispatch, getState) {\n        var parseDetails, placesService;\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                parseDetails = function parseDetails(place, status) {\n                  if (status !== window.google.maps.places.PlacesServiceStatus.OK) {\n                    console.error('Unable to reach maps API', status);\n                  } else {\n                    var address_components = place.address_components;\n                    var city = (0, _underscore.find)(address_components, function (comp) {\n                      return comp.types[0] === 'locality';\n                    });\n                    var state = (0, _underscore.find)(address_components, function (comp) {\n                      return comp.types[0] === 'administrative_area_level_1';\n                    });\n                    var country = (0, _underscore.find)(address_components, function (comp) {\n                      return comp.types[0] === 'country';\n                    });\n                    var cityDisplay = city && city.long_name;\n                    var countryDisplay = country && country.long_name;\n                    var stateDisplay = state && state.long_name;\n                    dispatch(updateLocationInputValues(cityDisplay, stateDisplay, countryDisplay));\n                    dispatch(freezeLocationInput());\n                  }\n                };\n\n                _context.prev = 1;\n\n                if (!window.google) {\n                  _context.next = 6;\n                  break;\n                }\n\n                placesService = new window.google.maps.places.PlacesService(document.createElement('div'));\n                _context.next = 6;\n                return placesService.getDetails({\n                  placeId: location.place_id\n                }, parseDetails);\n\n              case 6:\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](1);\n                console.error('(consignments/client/actions.js @ chooseLocation) Error:', _context.t0);\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 8]]);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n}\n\nfunction clearArtistSuggestions() {\n  return {\n    type: CLEAR_ARTIST_SUGGESTIONS\n  };\n}\n\nfunction clearError() {\n  return {\n    type: CLEAR_ERROR\n  };\n}\n\nfunction clearLocationData() {\n  return {\n    type: CLEAR_LOCATION_DATA\n  };\n}\n\nfunction clearLocationSuggestions() {\n  return {\n    type: CLEAR_LOCATION_SUGGESTIONS\n  };\n}\n\nfunction completeSubmission() {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref2 = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee2(dispatch, getState) {\n        var _getState, _getState$submissionF, submission, submissionIdFromServer, user, token, submissionQueryParam, submissionResponse;\n\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _getState = getState(), _getState$submissionF = _getState.submissionFlow, submission = _getState$submissionF.submission, submissionIdFromServer = _getState$submissionF.submissionIdFromServer, user = _getState$submissionF.user;\n                _context2.next = 4;\n                return fetchToken(user.accessToken);\n\n              case 4:\n                token = _context2.sent;\n                submissionQueryParam = submission.id || submissionIdFromServer;\n                _context2.next = 8;\n                return request.put(\"\".concat(sd.CONVECTION_APP_URL, \"/api/submissions/\").concat(submissionQueryParam)).set('Authorization', \"Bearer \".concat(token)).send({\n                  state: 'submitted'\n                });\n\n              case 8:\n                submissionResponse = _context2.sent;\n                dispatch(updateSubmission(submissionResponse.body));\n                dispatch(submissionCompleted());\n                dispatch(hideLoader());\n                dispatch((0, _reactRouterRedux.push)(_steps_config.default.thankYou.submissionPath.replace(':id', submissionResponse.body.id)));\n                _context2.next = 21;\n                break;\n\n              case 15:\n                _context2.prev = 15;\n                _context2.t0 = _context2[\"catch\"](0);\n                dispatch(hideLoader());\n                dispatch(submissionError('convection_complete_submission'));\n                dispatch(updateError('Unable to submit at this time.'));\n                console.error('(consignments/client/actions.js @ completeSubmission) Error:', _context2.t0);\n\n              case 21:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 15]]);\n      }));\n\n      return function (_x3, _x4) {\n        return _ref2.apply(this, arguments);\n      };\n    }()\n  );\n}\n\nfunction createSubmission() {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref3 = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee3(dispatch, getState) {\n        var _getState2, _getState2$submission, inputs, submission, user, token, submissionBody, userBody;\n\n        return _regenerator.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _getState2 = getState(), _getState2$submission = _getState2.submissionFlow, inputs = _getState2$submission.inputs, submission = _getState2$submission.submission, user = _getState2$submission.user;\n                _context3.next = 4;\n                return fetchToken(user.accessToken);\n\n              case 4:\n                token = _context3.sent;\n\n                if (!submission.id) {\n                  _context3.next = 11;\n                  break;\n                }\n\n                _context3.next = 8;\n                return request.put(\"\".concat(sd.CONVECTION_APP_URL, \"/api/submissions/\").concat(submission.id)).set('Authorization', \"Bearer \".concat(token)).send(inputs);\n\n              case 8:\n                submissionBody = _context3.sent;\n                _context3.next = 14;\n                break;\n\n              case 11:\n                _context3.next = 13;\n                return request.post(\"\".concat(sd.CONVECTION_APP_URL, \"/api/submissions\")).set('Authorization', \"Bearer \".concat(token)).send(inputs);\n\n              case 13:\n                submissionBody = _context3.sent;\n\n              case 14:\n                if (!(user.phone !== inputs.phone)) {\n                  _context3.next = 19;\n                  break;\n                }\n\n                _context3.next = 17;\n                return request.put(\"\".concat(sd.API_URL, \"/api/v1/me\")).set('X-ACCESS-TOKEN', user.accessToken).send({\n                  phone: inputs.phone\n                });\n\n              case 17:\n                userBody = _context3.sent;\n                dispatch(updateUserPhone(userBody.body.phone));\n\n              case 19:\n                dispatch(submissionCreated(submissionBody.body.id));\n                dispatch(updateSubmission(submissionBody.body)); // update state to reflect current submission\n\n                dispatch(hideLoader());\n                dispatch((0, _reactRouterRedux.push)(_steps_config.default.describeWork.submissionPath.replace(':id', submissionBody.body.id)));\n                dispatch((0, _reactRouterRedux.push)(_steps_config.default.uploadPhotos.submissionPath.replace(':id', submissionBody.body.id)));\n                _context3.next = 32;\n                break;\n\n              case 26:\n                _context3.prev = 26;\n                _context3.t0 = _context3[\"catch\"](0);\n                dispatch(hideLoader());\n                dispatch(submissionError('convection_create'));\n                dispatch(updateError('Unable to submit at this time.'));\n                console.error('(consignments/client/actions.js @ createSubmission) Error:', _context3.t0);\n\n              case 32:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 26]]);\n      }));\n\n      return function (_x5, _x6) {\n        return _ref3.apply(this, arguments);\n      };\n    }()\n  );\n}\n\nfunction errorOnImage(fileName) {\n  return {\n    type: ERROR_ON_IMAGE,\n    payload: {\n      fileName: fileName\n    }\n  };\n}\n\nfunction fetchArtistSuggestions(value) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref4 = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee4(dispatch, getState) {\n        var _getState3, user, res;\n\n        return _regenerator.default.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _getState3 = getState(), user = _getState3.submissionFlow.user;\n                _context4.next = 4;\n                return request.get(\"\".concat(sd.API_URL, \"/api/v1/match/artists\")).query({\n                  visible_to_public: 'true',\n                  term: value\n                }).set('X-ACCESS-TOKEN', user.accessToken);\n\n              case 4:\n                res = _context4.sent;\n                dispatch(updateArtistSuggestions(res.body));\n                dispatch(hideNotConsigningMessage());\n                _context4.next = 12;\n                break;\n\n              case 9:\n                _context4.prev = 9;\n                _context4.t0 = _context4[\"catch\"](0);\n                console.error('(consignments/client/actions.js @ fetchArtistSuggestions) Error:', _context4.t0);\n\n              case 12:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 9]]);\n      }));\n\n      return function (_x7, _x8) {\n        return _ref4.apply(this, arguments);\n      };\n    }()\n  );\n}\n\nfunction fetchLocationSuggestions(value) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref5 = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee5(dispatch, getState) {\n        var displaySuggestions, autocompleteService;\n        return _regenerator.default.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                displaySuggestions = function displaySuggestions(predictions, status) {\n                  if (status !== window.google.maps.places.PlacesServiceStatus.OK) {\n                    console.error('Unable to reach maps API', status);\n                  } else {\n                    dispatch(updateLocationSuggestions(predictions));\n                  }\n                };\n\n                _context5.prev = 1;\n\n                if (!window.google) {\n                  _context5.next = 6;\n                  break;\n                }\n\n                autocompleteService = new window.google.maps.places.AutocompleteService();\n                _context5.next = 6;\n                return autocompleteService.getPlacePredictions({\n                  input: value,\n                  types: ['(cities)']\n                }, displaySuggestions);\n\n              case 6:\n                _context5.next = 11;\n                break;\n\n              case 8:\n                _context5.prev = 8;\n                _context5.t0 = _context5[\"catch\"](1);\n                console.error('(consignments/client/actions.js @ fetchLocationSuggestions) Error:', _context5.t0);\n\n              case 11:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[1, 8]]);\n      }));\n\n      return function (_x9, _x10) {\n        return _ref5.apply(this, arguments);\n      };\n    }()\n  );\n}\n\nfunction freezeLocationInput() {\n  return {\n    type: FREEZE_LOCATION_INPUT\n  };\n}\n\nfunction handleImageUpload(file) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref6 = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee6(dispatch, getState) {\n        var options;\n        return _regenerator.default.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                try {\n                  if (file.type === 'image/jpeg' || file.type === 'image/png') {\n                    options = {\n                      acl: 'private',\n                      app: sd.CONVECTION_GEMINI_APP,\n                      key: sd.GEMINI_S3_ACCESS_KEY,\n                      fail: function fail(_err) {\n                        dispatch(errorOnImage(file.name));\n                      },\n                      add: function add(src) {\n                        dispatch(addImageToUploadedImages(file.name, src));\n                        dispatch(startProcessingImage(file.name));\n                      },\n                      progress: function progress(percent) {\n                        dispatch(updateProgressBar(file.name, percent));\n                      },\n                      done: function done(src, geminiKey, bucket) {\n                        var key = \"\".concat(geminiKey, \"/\").concat(file.name);\n                        dispatch(uploadImageToGemini(key, bucket, file.name));\n                      }\n                    };\n                    (0, _gemup.default)(file, options);\n                  } else {\n                    dispatch(addImageToUploadedImages(file.name));\n                    dispatch(errorOnImage(file.name));\n                  }\n                } catch (err) {\n                  console.error('(consignments/client/actions.js @ handleImageUpload) Error:', err);\n                }\n\n              case 1:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      return function (_x11, _x12) {\n        return _ref6.apply(this, arguments);\n      };\n    }()\n  );\n}\n\nfunction hideNotConsigningMessage() {\n  return {\n    type: HIDE_NOT_CONSIGNING_MESSAGE\n  };\n}\n\nfunction ignoreRedirectOnAuth() {\n  return {\n    type: IGNORE_REDIRECT_ON_AUTH\n  };\n}\n\nfunction logIn(values) {\n  var accountCreated = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref7 = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee7(dispatch, getState) {\n        var _getState4, redirectOnAuth, options, user, errorMessage;\n\n        return _regenerator.default.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                dispatch(showLoader());\n                _getState4 = getState(), redirectOnAuth = _getState4.submissionFlow.redirectOnAuth;\n                options = {\n                  email: values.email,\n                  password: values.password,\n                  _csrf: sd.CSRF_TOKEN\n                };\n                _context7.next = 6;\n                return request.post(sd.AP.loginPagePath).set('Content-Type', 'application/json').set('Accept', 'application/json').set('X-Requested-With', 'XMLHttpRequest').send(options);\n\n              case 6:\n                user = _context7.sent;\n                dispatch(updateUser(user.body.user, accountCreated));\n                redirectOnAuth && dispatch((0, _reactRouterRedux.push)(_steps_config.default.chooseArtist.path));\n                dispatch(clearError());\n                dispatch(hideLoader());\n                _context7.next = 19;\n                break;\n\n              case 13:\n                _context7.prev = 13;\n                _context7.t0 = _context7[\"catch\"](0);\n                errorMessage = (0, _lodash.default)(_context7.t0, 'response.body.error', false);\n                dispatch(updateError(errorMessage));\n                dispatch(hideLoader());\n                console.error('(consignments/client/actions.js @ logIn) Error:', _context7.t0);\n\n              case 19:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[0, 13]]);\n      }));\n\n      return function (_x13, _x14) {\n        return _ref7.apply(this, arguments);\n      };\n    }()\n  );\n}\n\nfunction removeErroredImage(fileName) {\n  return {\n    type: REMOVE_ERRORED_IMAGE,\n    payload: {\n      fileName: fileName\n    }\n  };\n}\n\nfunction removeImage(fileName) {\n  return function (dispatch) {\n    dispatch(removeErroredImage(fileName));\n    dispatch(stopProcessingImage(fileName));\n    dispatch(removeUploadedImage(fileName));\n  };\n}\n\nfunction removeUploadedImage(fileName) {\n  return {\n    type: REMOVE_UPLOADED_IMAGE,\n    payload: {\n      fileName: fileName\n    }\n  };\n}\n\nfunction resetPassword(values) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref8 = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee8(dispatch, getState) {\n        var options;\n        return _regenerator.default.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.prev = 0;\n                options = {\n                  email: values.email\n                };\n                _context8.next = 4;\n                return request.post(\"\".concat(sd.API_URL, \"/api/v1/users/send_reset_password_instructions\")).set('Content-Type', 'application/json').set('Accept', 'application/json').set('X-XAPP-TOKEN', sd.ARTSY_XAPP_TOKEN).send(options);\n\n              case 4:\n                dispatch(clearError());\n                dispatch(showResetPasswordSuccessMessage());\n                _context8.next = 11;\n                break;\n\n              case 8:\n                _context8.prev = 8;\n                _context8.t0 = _context8[\"catch\"](0);\n                dispatch(updateError(_context8.t0.response.body.error));\n\n              case 11:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this, [[0, 8]]);\n      }));\n\n      return function (_x15, _x16) {\n        return _ref8.apply(this, arguments);\n      };\n    }()\n  );\n}\n\nfunction scrubLocation() {\n  return function (dispatch, getState) {\n    var _getState5 = getState(),\n        _getState5$submission = _getState5.submissionFlow,\n        inputs = _getState5$submission.inputs,\n        locationAutocompleteValue = _getState5$submission.locationAutocompleteValue; // if user has selected from the autocomplete, one of these should be filled\n    // in the off-chance it's not, stick the outlier data in the city field\n\n\n    if (!(inputs.location_city || inputs.location_country || inputs.location_state) && locationAutocompleteValue) {\n      dispatch(updateLocationCityValue(locationAutocompleteValue));\n    }\n  };\n}\n\nfunction showNotConsigningMessage() {\n  return {\n    type: SHOW_NOT_CONSIGNING_MESSAGE\n  };\n}\n\nfunction showResetPasswordSuccessMessage() {\n  return {\n    type: SHOW_RESET_PASSWORD_SUCCESS_MESSAGE\n  };\n}\n\nfunction signUp(values) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref9 = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee9(dispatch, getState) {\n        var options, errorMessage;\n        return _regenerator.default.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                _context9.prev = 0;\n                dispatch(showLoader());\n                options = {\n                  email: values.email,\n                  name: values.name,\n                  password: values.password,\n                  _csrf: sd.CSRF_TOKEN\n                };\n                _context9.next = 5;\n                return request.post(sd.AP.signupPagePath).set('Content-Type', 'application/json').set('Accept', 'application/json').set('X-Requested-With', 'XMLHttpRequest').send(options);\n\n              case 5:\n                dispatch(logIn(values, true));\n                _context9.next = 14;\n                break;\n\n              case 8:\n                _context9.prev = 8;\n                _context9.t0 = _context9[\"catch\"](0);\n                errorMessage = (0, _lodash.default)(_context9.t0, 'response.body.error', false);\n                dispatch(updateError(errorMessage));\n                dispatch(hideLoader());\n                console.error('(consignments/client/actions.js @ signUp) Error:', _context9.t0);\n\n              case 14:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this, [[0, 8]]);\n      }));\n\n      return function (_x17, _x18) {\n        return _ref9.apply(this, arguments);\n      };\n    }()\n  );\n}\n\nfunction startProcessingImage(fileName) {\n  return {\n    type: START_PROCESSING_IMAGE,\n    payload: {\n      fileName: fileName\n    }\n  };\n}\n\nfunction stopProcessingImage(fileName) {\n  return {\n    type: STOP_PROCESSING_IMAGE,\n    payload: {\n      fileName: fileName\n    }\n  };\n}\n\nfunction submitArtist() {\n  return {\n    type: SUBMIT_ARTIST\n  };\n}\n\nfunction submitDescribeWork(values) {\n  return function (dispatch) {\n    dispatch(clearError());\n    dispatch(showLoader());\n    dispatch(updateInputs(values)); // update the inputs\n\n    dispatch(scrubLocation());\n    dispatch(createSubmission()); // create the submission in convection\n  };\n}\n\nfunction selectPhoto(file) {\n  return function (dispatch) {\n    dispatch(handleImageUpload(file)); // update the inputs\n  };\n}\n\nfunction showLoader() {\n  return {\n    type: SHOW_LOADER\n  };\n}\n\nfunction hideLoader() {\n  return {\n    type: HIDE_LOADER\n  };\n}\n\nfunction submissionCreated(submissionId) {\n  return {\n    type: SUBMISSION_CREATED,\n    payload: {\n      submissionId: submissionId\n    }\n  };\n}\n\nfunction submissionCompleted() {\n  return {\n    type: SUBMISSION_COMPLETED\n  };\n}\n\nfunction submissionError(errorType) {\n  return {\n    type: SUBMISSION_ERROR,\n    payload: {\n      errorType: errorType\n    }\n  };\n}\n\nfunction submitPhoto() {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref10 = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee10(dispatch, getState) {\n        return _regenerator.default.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                dispatch(showLoader());\n\n                try {\n                  dispatch(completeSubmission());\n                } catch (err) {\n                  dispatch(hideLoader());\n                  dispatch(updateError('Unable to submit at this time.'));\n                  console.error('(consignments/client/actions.js @ submitPhoto) Error:', err);\n                }\n\n              case 2:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      return function (_x19, _x20) {\n        return _ref10.apply(this, arguments);\n      };\n    }()\n  );\n}\n\nfunction unfreezeLocationInput() {\n  return {\n    type: UNFREEZE_LOCATION_INPUT\n  };\n}\n\nfunction updateArtistAutocompleteValue(value) {\n  return {\n    type: UPDATE_ARTIST_AUTOCOMPLETE_VALUE,\n    payload: {\n      value: value\n    }\n  };\n}\n\nfunction updateArtistId(artistId) {\n  return {\n    type: UPDATE_ARTIST_ID,\n    payload: {\n      artistId: artistId\n    }\n  };\n}\n\nfunction updateArtistName(artistName) {\n  return {\n    type: UPDATE_ARTIST_NAME,\n    payload: {\n      artistName: artistName\n    }\n  };\n}\n\nfunction updateArtistSuggestions(suggestions) {\n  return {\n    type: UPDATE_ARTIST_SUGGESTIONS,\n    payload: {\n      suggestions: suggestions\n    }\n  };\n}\n\nfunction updateAuthFormState(state) {\n  return {\n    type: UPDATE_AUTH_FORM_STATE,\n    payload: {\n      state: state\n    }\n  };\n}\n\nfunction updateAuthFormStateAndClearError(state) {\n  return function (dispatch) {\n    dispatch(updateAuthFormState(state));\n    dispatch(clearError());\n  };\n}\n\nfunction updateError(error) {\n  return {\n    type: UPDATE_ERROR,\n    payload: {\n      error: error\n    }\n  };\n}\n\nfunction updateCurrentStep(step) {\n  return {\n    type: UPDATE_CURRENT_STEP,\n    payload: {\n      step: step\n    }\n  };\n}\n\nfunction updateInputs(inputs) {\n  if (inputs.edition === false) {\n    inputs.edition_number = '';\n    inputs.edition_size = 0;\n  }\n\n  return {\n    type: UPDATE_INPUTS,\n    payload: {\n      inputs: inputs\n    }\n  };\n}\n\nfunction updateLocationAutocomplete(value) {\n  return function (dispatch) {\n    dispatch(clearLocationData());\n    dispatch(updateLocationAutocompleteValue(value));\n  };\n}\n\nfunction updateLocationAutocompleteValue(value) {\n  return {\n    type: UPDATE_LOCATION_AUTOCOMPLETE_VALUE,\n    payload: {\n      value: value\n    }\n  };\n}\n\nfunction updateLocationCityValue(city) {\n  return {\n    type: UPDATE_LOCATION_CITY_VALUE,\n    payload: {\n      city: city\n    }\n  };\n}\n\nfunction updateLocationInputValues(city, state, country) {\n  return {\n    type: UPDATE_LOCATION_VALUES,\n    payload: {\n      city: city,\n      state: state,\n      country: country\n    }\n  };\n}\n\nfunction updateLocationFromSubmissionAndFreeze(city, state, country) {\n  return function (dispatch, getState) {\n    var _getState6 = getState(),\n        _getState6$submission = _getState6.submissionFlow.submission,\n        location_city = _getState6$submission.location_city,\n        location_state = _getState6$submission.location_state,\n        location_country = _getState6$submission.location_country;\n\n    var location = (0, _helpers.formattedLocation)(location_city, location_state, location_country);\n    dispatch(updateLocationAutocompleteValue(location));\n    dispatch(freezeLocationInput());\n  };\n}\n\nfunction updateLocationSuggestions(suggestions) {\n  return {\n    type: UPDATE_LOCATION_SUGGESTIONS,\n    payload: {\n      suggestions: suggestions\n    }\n  };\n}\n\nfunction updateProgressBar(fileName, percent) {\n  return {\n    type: UPDATE_PROGRESS_BAR,\n    payload: {\n      fileName: fileName,\n      percent: percent\n    }\n  };\n}\n\nfunction updateSkipPhotoSubmission(skip) {\n  return {\n    type: UPDATE_SKIP_PHOTO_SUBMISSION,\n    payload: {\n      skip: skip\n    }\n  };\n}\n\nfunction updateStepsWithUser() {\n  return {\n    type: UPDATE_STEPS_WITH_USER\n  };\n}\n\nfunction updateStepsWithoutUser() {\n  return {\n    type: UPDATE_STEPS_WITHOUT_USER\n  };\n}\n\nfunction updateSubmission(submission) {\n  return {\n    type: UPDATE_SUBMISSION,\n    payload: {\n      submission: submission\n    }\n  };\n}\n\nfunction updateUser(user, accountCreated) {\n  return {\n    type: UPDATE_USER,\n    payload: {\n      user: user,\n      accountCreated: accountCreated\n    }\n  };\n}\n\nfunction updateUserPhone(phone) {\n  return {\n    type: UPDATE_USER_PHONE,\n    payload: {\n      phone: phone\n    }\n  };\n}\n\nfunction uploadImageToConvection(geminiToken, fileName) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref11 = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee11(dispatch, getState) {\n        var _getState7, _getState7$submission, submission, submissionIdFromServer, user, submissionId, token, inputs, assetResponse, assetId;\n\n        return _regenerator.default.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                _context11.prev = 0;\n                _getState7 = getState(), _getState7$submission = _getState7.submissionFlow, submission = _getState7$submission.submission, submissionIdFromServer = _getState7$submission.submissionIdFromServer, user = _getState7$submission.user;\n                submissionId = submission.id || submissionIdFromServer;\n                _context11.next = 5;\n                return fetchToken(user.accessToken);\n\n              case 5:\n                token = _context11.sent;\n                inputs = {\n                  submission_id: submissionId,\n                  gemini_token: geminiToken\n                };\n                _context11.next = 9;\n                return request.post(\"\".concat(sd.CONVECTION_APP_URL, \"/api/assets\")).set('Authorization', \"Bearer \".concat(token)).send(inputs);\n\n              case 9:\n                assetResponse = _context11.sent;\n                assetId = assetResponse.body.id;\n                dispatch(stopProcessingImage(fileName));\n                dispatch(addAssetId(assetId));\n                _context11.next = 19;\n                break;\n\n              case 15:\n                _context11.prev = 15;\n                _context11.t0 = _context11[\"catch\"](0);\n                dispatch(errorOnImage(fileName));\n                console.error('(consignments/client/actions.js @ uploadImageToConvection) Error:', _context11.t0);\n\n              case 19:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this, [[0, 15]]);\n      }));\n\n      return function (_x21, _x22) {\n        return _ref11.apply(this, arguments);\n      };\n    }()\n  );\n}\n\nfunction uploadImageToGemini(key, bucket, fileName) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref12 = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      _regenerator.default.mark(function _callee12(dispatch, getState) {\n        var _getState8, _getState8$submission, submission, submissionIdFromServer, submissionId, inputs, response, token;\n\n        return _regenerator.default.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                _context12.prev = 0;\n                _getState8 = getState(), _getState8$submission = _getState8.submissionFlow, submission = _getState8$submission.submission, submissionIdFromServer = _getState8$submission.submissionIdFromServer;\n                submissionId = submission.id || submissionIdFromServer;\n                inputs = {\n                  entry: {\n                    template_key: sd.CONVECTION_GEMINI_APP,\n                    source_key: key,\n                    source_bucket: bucket,\n                    metadata: {\n                      id: submissionId,\n                      _type: 'Consignment'\n                    }\n                  }\n                };\n                _context12.next = 6;\n                return request.post(\"\".concat(sd.GEMINI_APP, \"/entries.json\")).set('Authorization', \"Basic \".concat(encode(sd.CONVECTION_GEMINI_APP, ''))).send(inputs);\n\n              case 6:\n                response = _context12.sent;\n                token = response.body.token;\n                dispatch(uploadImageToConvection(token, fileName));\n                _context12.next = 15;\n                break;\n\n              case 11:\n                _context12.prev = 11;\n                _context12.t0 = _context12[\"catch\"](0);\n                dispatch(errorOnImage(fileName));\n                console.error('(consignments/client/actions.js @ uploadImageToGemini) Error:', _context12.t0);\n\n              case 15:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this, [[0, 11]]);\n      }));\n\n      return function (_x23, _x24) {\n        return _ref12.apply(this, arguments);\n      };\n    }()\n  );\n} // helpers\n\n\nfunction encode(key, secret) {\n  return btoa(unescape(encodeURIComponent([key, secret].join(':'))));\n}",{"version":3,"sources":["src/desktop/apps/consign/client/actions.js"],"names":["request","sd","fetchToken","ADD_ASSET_ID","ADD_IMAGE_TO_UPLOADED_IMAGES","CLEAR_ARTIST_SUGGESTIONS","CLEAR_ERROR","CLEAR_LOCATION_DATA","CLEAR_LOCATION_SUGGESTIONS","ERROR_ON_IMAGE","FREEZE_LOCATION_INPUT","HIDE_LOADER","HIDE_NOT_CONSIGNING_MESSAGE","IGNORE_REDIRECT_ON_AUTH","REMOVE_ERRORED_IMAGE","REMOVE_UPLOADED_IMAGE","SHOW_LOADER","SHOW_NOT_CONSIGNING_MESSAGE","SHOW_RESET_PASSWORD_SUCCESS_MESSAGE","START_PROCESSING_IMAGE","STOP_PROCESSING_IMAGE","SUBMISSION_CREATED","SUBMISSION_COMPLETED","SUBMISSION_ERROR","SUBMIT_ARTIST","UNFREEZE_LOCATION_INPUT","UPDATE_ARTIST_AUTOCOMPLETE_VALUE","UPDATE_ARTIST_ID","UPDATE_ARTIST_NAME","UPDATE_ARTIST_SUGGESTIONS","UPDATE_AUTH_FORM_STATE","UPDATE_CURRENT_STEP","UPDATE_ERROR","UPDATE_INPUTS","UPDATE_LOCATION_AUTOCOMPLETE_VALUE","UPDATE_LOCATION_CITY_VALUE","UPDATE_LOCATION_SUGGESTIONS","UPDATE_LOCATION_VALUES","UPDATE_PROGRESS_BAR","UPDATE_SKIP_PHOTO_SUBMISSION","UPDATE_STEPS_WITH_USER","UPDATE_STEPS_WITHOUT_USER","UPDATE_SUBMISSION","UPDATE_USER","UPDATE_USER_PHONE","addAssetId","assetId","type","payload","addImageToUploadedImages","fileName","src","chooseArtist","value","dispatch","updateArtistId","_id","updateArtistName","name","chooseArtistAdvance","submitArtist","describeWork","path","chooseLocation","location","getState","parseDetails","place","status","window","google","maps","places","PlacesServiceStatus","OK","console","error","address_components","city","comp","types","state","country","cityDisplay","long_name","countryDisplay","stateDisplay","updateLocationInputValues","freezeLocationInput","placesService","PlacesService","document","createElement","getDetails","placeId","place_id","clearArtistSuggestions","clearError","clearLocationData","clearLocationSuggestions","completeSubmission","submissionFlow","submission","submissionIdFromServer","user","accessToken","token","submissionQueryParam","id","put","CONVECTION_APP_URL","set","send","submissionResponse","updateSubmission","body","submissionCompleted","hideLoader","thankYou","submissionPath","replace","submissionError","updateError","createSubmission","inputs","submissionBody","post","phone","API_URL","userBody","updateUserPhone","submissionCreated","uploadPhotos","errorOnImage","fetchArtistSuggestions","get","query","visible_to_public","term","res","updateArtistSuggestions","hideNotConsigningMessage","fetchLocationSuggestions","displaySuggestions","predictions","updateLocationSuggestions","autocompleteService","AutocompleteService","getPlacePredictions","input","handleImageUpload","file","options","acl","app","CONVECTION_GEMINI_APP","key","GEMINI_S3_ACCESS_KEY","fail","add","startProcessingImage","progress","updateProgressBar","percent","done","geminiKey","bucket","uploadImageToGemini","err","ignoreRedirectOnAuth","logIn","values","accountCreated","showLoader","redirectOnAuth","email","password","_csrf","CSRF_TOKEN","AP","loginPagePath","updateUser","errorMessage","removeErroredImage","removeImage","stopProcessingImage","removeUploadedImage","resetPassword","ARTSY_XAPP_TOKEN","showResetPasswordSuccessMessage","response","scrubLocation","locationAutocompleteValue","location_city","location_country","location_state","updateLocationCityValue","showNotConsigningMessage","signUp","signupPagePath","submitDescribeWork","updateInputs","selectPhoto","submissionId","errorType","submitPhoto","unfreezeLocationInput","updateArtistAutocompleteValue","artistId","artistName","suggestions","updateAuthFormState","updateAuthFormStateAndClearError","updateCurrentStep","step","edition","edition_number","edition_size","updateLocationAutocomplete","updateLocationAutocompleteValue","updateLocationFromSubmissionAndFreeze","updateSkipPhotoSubmission","skip","updateStepsWithUser","updateStepsWithoutUser","uploadImageToConvection","geminiToken","submission_id","gemini_token","assetResponse","entry","template_key","source_key","source_bucket","metadata","_type","GEMINI_APP","encode","secret","btoa","unescape","encodeURIComponent","join"],"mappings":"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","file":"/Users/eve/development/force/src/desktop/apps/consign/client/actions.js","sourceRoot":"/Users/eve/development/force","sourcesContent":["import _request from 'superagent'\nimport gemup from 'gemup'\nimport get from 'lodash.get'\nimport stepsConfig from './steps_config'\nimport { data as _sd } from 'sharify'\nimport { fetchToken as _fetchToken, formattedLocation } from '../helpers'\nimport { find } from 'underscore'\nimport { push } from 'react-router-redux'\n\n// FIXME: Rewire\nlet request = _request\nlet sd = _sd\nlet fetchToken = _fetchToken\n\n// Action types\nexport const ADD_ASSET_ID = 'ADD_ASSET_ID'\nexport const ADD_IMAGE_TO_UPLOADED_IMAGES = 'ADD_IMAGE_TO_UPLOADED_IMAGES'\nexport const CLEAR_ARTIST_SUGGESTIONS = 'CLEAR_ARTIST_SUGGESTIONS'\nexport const CLEAR_ERROR = 'CLEAR_ERROR'\nexport const CLEAR_LOCATION_DATA = 'CLEAR_LOCATION_DATA'\nexport const CLEAR_LOCATION_SUGGESTIONS = 'CLEAR_LOCATION_SUGGESTIONS'\nexport const ERROR_ON_IMAGE = 'ERROR_ON_IMAGE'\nexport const FREEZE_LOCATION_INPUT = 'FREEZE_LOCATION_INPUT'\nexport const HIDE_LOADER = 'HIDE_LOADER'\nexport const HIDE_NOT_CONSIGNING_MESSAGE = 'HIDE_NOT_CONSIGNING_MESSAGE'\nexport const IGNORE_REDIRECT_ON_AUTH = 'IGNORE_REDIRECT_ON_AUTH'\nexport const REMOVE_ERRORED_IMAGE = 'REMOVE_ERRORED_IMAGE'\nexport const REMOVE_UPLOADED_IMAGE = 'REMOVE_UPLOADED_IMAGE'\nexport const SHOW_LOADER = 'SHOW_LOADER'\nexport const SHOW_NOT_CONSIGNING_MESSAGE = 'SHOW_NOT_CONSIGNING_MESSAGE'\nexport const SHOW_RESET_PASSWORD_SUCCESS_MESSAGE =\n  'SHOW_RESET_PASSWORD_SUCCESS_MESSAGE'\nexport const START_PROCESSING_IMAGE = 'START_PROCESSING_IMAGE'\nexport const STOP_PROCESSING_IMAGE = 'STOP_PROCESSING_IMAGE'\nexport const SUBMISSION_CREATED = 'SUBMISSION_CREATED'\nexport const SUBMISSION_COMPLETED = 'SUBMISSION_COMPLETED'\nexport const SUBMISSION_ERROR = 'SUBMISSION_ERROR'\nexport const SUBMIT_ARTIST = 'SUBMIT_ARTIST'\nexport const UNFREEZE_LOCATION_INPUT = 'UNFREEZE_LOCATION_INPUT'\nexport const UPDATE_ARTIST_AUTOCOMPLETE_VALUE =\n  'UPDATE_ARTIST_AUTOCOMPLETE_VALUE'\nexport const UPDATE_ARTIST_ID = 'UPDATE_ARTIST_ID'\nexport const UPDATE_ARTIST_NAME = 'UPDATE_ARTIST_NAME'\nexport const UPDATE_ARTIST_SUGGESTIONS = 'UPDATE_ARTIST_SUGGESTIONS'\nexport const UPDATE_AUTH_FORM_STATE = 'UPDATE_AUTH_FORM_STATE'\nexport const UPDATE_CURRENT_STEP = 'UPDATE_CURRENT_STEP'\nexport const UPDATE_ERROR = 'UPDATE_ERROR'\nexport const UPDATE_INPUTS = 'UPDATE_INPUTS'\nexport const UPDATE_LOCATION_AUTOCOMPLETE_VALUE =\n  'UPDATE_LOCATION_AUTOCOMPLETE_VALUE'\nexport const UPDATE_LOCATION_CITY_VALUE = 'UPDATE_LOCATION_CITY_VALUE'\nexport const UPDATE_LOCATION_SUGGESTIONS = 'UPDATE_LOCATION_SUGGESTIONS'\nexport const UPDATE_LOCATION_VALUES = 'UPDATE_LOCATION_VALUES'\nexport const UPDATE_PROGRESS_BAR = 'UPDATE_PROGRESS_BAR'\nexport const UPDATE_SKIP_PHOTO_SUBMISSION = 'UPDATE_SKIP_PHOTO_SUBMISSION'\nexport const UPDATE_STEPS_WITH_USER = 'UPDATE_STEPS_WITH_USER'\nexport const UPDATE_STEPS_WITHOUT_USER = 'UPDATE_STEPS_WITHOUT_USER'\nexport const UPDATE_SUBMISSION = 'UPDATE_SUBMISSION'\nexport const UPDATE_USER = 'UPDATE_USER'\nexport const UPDATE_USER_PHONE = 'UPDATE_USER_PHONE'\n\n// Action creators\nexport function addAssetId(assetId) {\n  return {\n    type: ADD_ASSET_ID,\n    payload: {\n      assetId,\n    },\n  }\n}\n\nexport function addImageToUploadedImages(fileName, src) {\n  return {\n    type: ADD_IMAGE_TO_UPLOADED_IMAGES,\n    payload: {\n      fileName,\n      src,\n    },\n  }\n}\n\nexport function chooseArtist(value) {\n  return dispatch => {\n    dispatch(updateArtistId(value._id))\n    dispatch(updateArtistName(value.name))\n  }\n}\n\nexport function chooseArtistAdvance() {\n  return dispatch => {\n    dispatch(submitArtist())\n    dispatch(push(stepsConfig.describeWork.path))\n  }\n}\n\nexport function chooseLocation(location) {\n  return async (dispatch, getState) => {\n    const parseDetails = (place, status) => {\n      if (status !== window.google.maps.places.PlacesServiceStatus.OK) {\n        console.error('Unable to reach maps API', status)\n      } else {\n        const { address_components } = place\n        const city = find(\n          address_components,\n          comp => comp.types[0] === 'locality'\n        )\n        const state = find(\n          address_components,\n          comp => comp.types[0] === 'administrative_area_level_1'\n        )\n        const country = find(\n          address_components,\n          comp => comp.types[0] === 'country'\n        )\n\n        const cityDisplay = city && city.long_name\n        const countryDisplay = country && country.long_name\n        const stateDisplay = state && state.long_name\n\n        dispatch(\n          updateLocationInputValues(cityDisplay, stateDisplay, countryDisplay)\n        )\n        dispatch(freezeLocationInput())\n      }\n    }\n\n    try {\n      if (window.google) {\n        const placesService = new window.google.maps.places.PlacesService(\n          document.createElement('div')\n        )\n        await placesService.getDetails(\n          { placeId: location.place_id },\n          parseDetails\n        )\n      }\n    } catch (err) {\n      console.error(\n        '(consignments/client/actions.js @ chooseLocation) Error:',\n        err\n      )\n    }\n  }\n}\n\nexport function clearArtistSuggestions() {\n  return {\n    type: CLEAR_ARTIST_SUGGESTIONS,\n  }\n}\n\nexport function clearError() {\n  return {\n    type: CLEAR_ERROR,\n  }\n}\n\nexport function clearLocationData() {\n  return {\n    type: CLEAR_LOCATION_DATA,\n  }\n}\n\nexport function clearLocationSuggestions() {\n  return {\n    type: CLEAR_LOCATION_SUGGESTIONS,\n  }\n}\n\nexport function completeSubmission() {\n  return async (dispatch, getState) => {\n    try {\n      const {\n        submissionFlow: { submission, submissionIdFromServer, user },\n      } = getState()\n      const token = await fetchToken(user.accessToken)\n\n      const submissionQueryParam = submission.id || submissionIdFromServer\n      const submissionResponse = await request\n        .put(`${sd.CONVECTION_APP_URL}/api/submissions/${submissionQueryParam}`)\n        .set('Authorization', `Bearer ${token}`)\n        .send({ state: 'submitted' })\n\n      dispatch(updateSubmission(submissionResponse.body))\n      dispatch(submissionCompleted())\n      dispatch(hideLoader())\n      dispatch(\n        push(\n          stepsConfig.thankYou.submissionPath.replace(\n            ':id',\n            submissionResponse.body.id\n          )\n        )\n      )\n    } catch (err) {\n      dispatch(hideLoader())\n      dispatch(submissionError('convection_complete_submission'))\n      dispatch(updateError('Unable to submit at this time.'))\n      console.error(\n        '(consignments/client/actions.js @ completeSubmission) Error:',\n        err\n      )\n    }\n  }\n}\n\nexport function createSubmission() {\n  return async (dispatch, getState) => {\n    try {\n      const { submissionFlow: { inputs, submission, user } } = getState()\n      const token = await fetchToken(user.accessToken)\n      let submissionBody\n      if (submission.id) {\n        submissionBody = await request\n          .put(`${sd.CONVECTION_APP_URL}/api/submissions/${submission.id}`)\n          .set('Authorization', `Bearer ${token}`)\n          .send(inputs)\n      } else {\n        submissionBody = await request\n          .post(`${sd.CONVECTION_APP_URL}/api/submissions`)\n          .set('Authorization', `Bearer ${token}`)\n          .send(inputs)\n      }\n      let userBody\n      // update the user's phone number if it has been changed\n      if (user.phone !== inputs.phone) {\n        userBody = await request\n          .put(`${sd.API_URL}/api/v1/me`)\n          .set('X-ACCESS-TOKEN', user.accessToken)\n          .send({ phone: inputs.phone })\n        dispatch(updateUserPhone(userBody.body.phone))\n      }\n\n      dispatch(submissionCreated(submissionBody.body.id))\n      dispatch(updateSubmission(submissionBody.body)) // update state to reflect current submission\n      dispatch(hideLoader())\n      dispatch(\n        push(\n          stepsConfig.describeWork.submissionPath.replace(\n            ':id',\n            submissionBody.body.id\n          )\n        )\n      )\n      dispatch(\n        push(\n          stepsConfig.uploadPhotos.submissionPath.replace(\n            ':id',\n            submissionBody.body.id\n          )\n        )\n      )\n    } catch (err) {\n      dispatch(hideLoader())\n      dispatch(submissionError('convection_create'))\n      dispatch(updateError('Unable to submit at this time.'))\n      console.error(\n        '(consignments/client/actions.js @ createSubmission) Error:',\n        err\n      )\n    }\n  }\n}\n\nexport function errorOnImage(fileName) {\n  return {\n    type: ERROR_ON_IMAGE,\n    payload: {\n      fileName,\n    },\n  }\n}\n\nexport function fetchArtistSuggestions(value) {\n  return async (dispatch, getState) => {\n    try {\n      const { submissionFlow: { user } } = getState()\n      const res = await request\n        .get(`${sd.API_URL}/api/v1/match/artists`)\n        .query({ visible_to_public: 'true', term: value })\n        .set('X-ACCESS-TOKEN', user.accessToken)\n      dispatch(updateArtistSuggestions(res.body))\n      dispatch(hideNotConsigningMessage())\n    } catch (err) {\n      console.error(\n        '(consignments/client/actions.js @ fetchArtistSuggestions) Error:',\n        err\n      )\n    }\n  }\n}\n\nexport function fetchLocationSuggestions(value) {\n  return async (dispatch, getState) => {\n    const displaySuggestions = (predictions, status) => {\n      if (status !== window.google.maps.places.PlacesServiceStatus.OK) {\n        console.error('Unable to reach maps API', status)\n      } else {\n        dispatch(updateLocationSuggestions(predictions))\n      }\n    }\n\n    try {\n      if (window.google) {\n        const autocompleteService = new window.google.maps.places.AutocompleteService()\n        await autocompleteService.getPlacePredictions(\n          { input: value, types: ['(cities)'] },\n          displaySuggestions\n        )\n      }\n    } catch (err) {\n      console.error(\n        '(consignments/client/actions.js @ fetchLocationSuggestions) Error:',\n        err\n      )\n    }\n  }\n}\n\nexport function freezeLocationInput() {\n  return {\n    type: FREEZE_LOCATION_INPUT,\n  }\n}\n\nexport function handleImageUpload(file) {\n  return async (dispatch, getState) => {\n    try {\n      if (file.type === 'image/jpeg' || file.type === 'image/png') {\n        const options = {\n          acl: 'private',\n          app: sd.CONVECTION_GEMINI_APP,\n          key: sd.GEMINI_S3_ACCESS_KEY,\n          fail: _err => {\n            dispatch(errorOnImage(file.name))\n          },\n          add: src => {\n            dispatch(addImageToUploadedImages(file.name, src))\n            dispatch(startProcessingImage(file.name))\n          },\n          progress: percent => {\n            dispatch(updateProgressBar(file.name, percent))\n          },\n          done: (src, geminiKey, bucket) => {\n            const key = `${geminiKey}/${file.name}`\n            dispatch(uploadImageToGemini(key, bucket, file.name))\n          },\n        }\n        gemup(file, options)\n      } else {\n        dispatch(addImageToUploadedImages(file.name))\n        dispatch(errorOnImage(file.name))\n      }\n    } catch (err) {\n      console.error(\n        '(consignments/client/actions.js @ handleImageUpload) Error:',\n        err\n      )\n    }\n  }\n}\n\nexport function hideNotConsigningMessage() {\n  return {\n    type: HIDE_NOT_CONSIGNING_MESSAGE,\n  }\n}\n\nexport function ignoreRedirectOnAuth() {\n  return {\n    type: IGNORE_REDIRECT_ON_AUTH,\n  }\n}\n\nexport function logIn(values, accountCreated = false) {\n  return async (dispatch, getState) => {\n    try {\n      dispatch(showLoader())\n\n      const { submissionFlow: { redirectOnAuth } } = getState()\n\n      const options = {\n        email: values.email,\n        password: values.password,\n        _csrf: sd.CSRF_TOKEN,\n      }\n      const user = await request\n        .post(sd.AP.loginPagePath)\n        .set('Content-Type', 'application/json')\n        .set('Accept', 'application/json')\n        .set('X-Requested-With', 'XMLHttpRequest')\n        .send(options)\n\n      dispatch(updateUser(user.body.user, accountCreated))\n      redirectOnAuth && dispatch(push(stepsConfig.chooseArtist.path))\n      dispatch(clearError())\n      dispatch(hideLoader())\n    } catch (err) {\n      const errorMessage = get(err, 'response.body.error', false)\n      dispatch(updateError(errorMessage))\n      dispatch(hideLoader())\n      console.error('(consignments/client/actions.js @ logIn) Error:', err)\n    }\n  }\n}\n\nexport function removeErroredImage(fileName) {\n  return {\n    type: REMOVE_ERRORED_IMAGE,\n    payload: {\n      fileName,\n    },\n  }\n}\n\nexport function removeImage(fileName) {\n  return dispatch => {\n    dispatch(removeErroredImage(fileName))\n    dispatch(stopProcessingImage(fileName))\n    dispatch(removeUploadedImage(fileName))\n  }\n}\n\nexport function removeUploadedImage(fileName) {\n  return {\n    type: REMOVE_UPLOADED_IMAGE,\n    payload: {\n      fileName,\n    },\n  }\n}\n\nexport function resetPassword(values) {\n  return async (dispatch, getState) => {\n    try {\n      const options = {\n        email: values.email,\n      }\n      await request\n        .post(`${sd.API_URL}/api/v1/users/send_reset_password_instructions`)\n        .set('Content-Type', 'application/json')\n        .set('Accept', 'application/json')\n        .set('X-XAPP-TOKEN', sd.ARTSY_XAPP_TOKEN)\n        .send(options)\n      dispatch(clearError())\n      dispatch(showResetPasswordSuccessMessage())\n    } catch (err) {\n      dispatch(updateError(err.response.body.error))\n    }\n  }\n}\n\nexport function scrubLocation() {\n  return (dispatch, getState) => {\n    const { submissionFlow: { inputs, locationAutocompleteValue } } = getState()\n    // if user has selected from the autocomplete, one of these should be filled\n    // in the off-chance it's not, stick the outlier data in the city field\n    if (\n      !(\n        inputs.location_city ||\n        inputs.location_country ||\n        inputs.location_state\n      ) &&\n      locationAutocompleteValue\n    ) {\n      dispatch(updateLocationCityValue(locationAutocompleteValue))\n    }\n  }\n}\n\nexport function showNotConsigningMessage() {\n  return {\n    type: SHOW_NOT_CONSIGNING_MESSAGE,\n  }\n}\n\nexport function showResetPasswordSuccessMessage() {\n  return {\n    type: SHOW_RESET_PASSWORD_SUCCESS_MESSAGE,\n  }\n}\n\nexport function signUp(values) {\n  return async (dispatch, getState) => {\n    try {\n      dispatch(showLoader())\n\n      const options = {\n        email: values.email,\n        name: values.name,\n        password: values.password,\n        _csrf: sd.CSRF_TOKEN,\n      }\n      await request\n        .post(sd.AP.signupPagePath)\n        .set('Content-Type', 'application/json')\n        .set('Accept', 'application/json')\n        .set('X-Requested-With', 'XMLHttpRequest')\n        .send(options)\n      dispatch(logIn(values, true))\n    } catch (err) {\n      const errorMessage = get(err, 'response.body.error', false)\n      dispatch(updateError(errorMessage))\n      dispatch(hideLoader())\n      console.error('(consignments/client/actions.js @ signUp) Error:', err)\n    }\n  }\n}\n\nexport function startProcessingImage(fileName) {\n  return {\n    type: START_PROCESSING_IMAGE,\n    payload: {\n      fileName,\n    },\n  }\n}\n\nexport function stopProcessingImage(fileName) {\n  return {\n    type: STOP_PROCESSING_IMAGE,\n    payload: {\n      fileName,\n    },\n  }\n}\n\nexport function submitArtist() {\n  return {\n    type: SUBMIT_ARTIST,\n  }\n}\n\nexport function submitDescribeWork(values) {\n  return dispatch => {\n    dispatch(clearError())\n    dispatch(showLoader())\n    dispatch(updateInputs(values)) // update the inputs\n    dispatch(scrubLocation())\n    dispatch(createSubmission()) // create the submission in convection\n  }\n}\n\nexport function selectPhoto(file) {\n  return dispatch => {\n    dispatch(handleImageUpload(file)) // update the inputs\n  }\n}\n\nexport function showLoader() {\n  return {\n    type: SHOW_LOADER,\n  }\n}\n\nexport function hideLoader() {\n  return {\n    type: HIDE_LOADER,\n  }\n}\n\nexport function submissionCreated(submissionId) {\n  return {\n    type: SUBMISSION_CREATED,\n    payload: {\n      submissionId,\n    },\n  }\n}\n\nexport function submissionCompleted() {\n  return {\n    type: SUBMISSION_COMPLETED,\n  }\n}\n\nexport function submissionError(errorType) {\n  return {\n    type: SUBMISSION_ERROR,\n    payload: {\n      errorType,\n    },\n  }\n}\n\nexport function submitPhoto() {\n  return async (dispatch, getState) => {\n    dispatch(showLoader())\n    try {\n      dispatch(completeSubmission())\n    } catch (err) {\n      dispatch(hideLoader())\n      dispatch(updateError('Unable to submit at this time.'))\n      console.error(\n        '(consignments/client/actions.js @ submitPhoto) Error:',\n        err\n      )\n    }\n  }\n}\n\nexport function unfreezeLocationInput() {\n  return {\n    type: UNFREEZE_LOCATION_INPUT,\n  }\n}\n\nexport function updateArtistAutocompleteValue(value) {\n  return {\n    type: UPDATE_ARTIST_AUTOCOMPLETE_VALUE,\n    payload: {\n      value,\n    },\n  }\n}\n\nexport function updateArtistId(artistId) {\n  return {\n    type: UPDATE_ARTIST_ID,\n    payload: {\n      artistId,\n    },\n  }\n}\n\nexport function updateArtistName(artistName) {\n  return {\n    type: UPDATE_ARTIST_NAME,\n    payload: {\n      artistName,\n    },\n  }\n}\n\nexport function updateArtistSuggestions(suggestions) {\n  return {\n    type: UPDATE_ARTIST_SUGGESTIONS,\n    payload: {\n      suggestions,\n    },\n  }\n}\n\nexport function updateAuthFormState(state) {\n  return {\n    type: UPDATE_AUTH_FORM_STATE,\n    payload: {\n      state,\n    },\n  }\n}\n\nexport function updateAuthFormStateAndClearError(state) {\n  return dispatch => {\n    dispatch(updateAuthFormState(state))\n    dispatch(clearError())\n  }\n}\n\nexport function updateError(error) {\n  return {\n    type: UPDATE_ERROR,\n    payload: {\n      error,\n    },\n  }\n}\n\nexport function updateCurrentStep(step) {\n  return {\n    type: UPDATE_CURRENT_STEP,\n    payload: {\n      step,\n    },\n  }\n}\n\nexport function updateInputs(inputs) {\n  if (inputs.edition === false) {\n    inputs.edition_number = ''\n    inputs.edition_size = 0\n  }\n\n  return {\n    type: UPDATE_INPUTS,\n    payload: {\n      inputs,\n    },\n  }\n}\n\nexport function updateLocationAutocomplete(value) {\n  return dispatch => {\n    dispatch(clearLocationData())\n    dispatch(updateLocationAutocompleteValue(value))\n  }\n}\n\nexport function updateLocationAutocompleteValue(value) {\n  return {\n    type: UPDATE_LOCATION_AUTOCOMPLETE_VALUE,\n    payload: {\n      value,\n    },\n  }\n}\n\nexport function updateLocationCityValue(city) {\n  return {\n    type: UPDATE_LOCATION_CITY_VALUE,\n    payload: {\n      city,\n    },\n  }\n}\n\nexport function updateLocationInputValues(city, state, country) {\n  return {\n    type: UPDATE_LOCATION_VALUES,\n    payload: {\n      city,\n      state,\n      country,\n    },\n  }\n}\n\nexport function updateLocationFromSubmissionAndFreeze(city, state, country) {\n  return (dispatch, getState) => {\n    const {\n      submissionFlow: {\n        submission: { location_city, location_state, location_country },\n      },\n    } = getState()\n    const location = formattedLocation(\n      location_city,\n      location_state,\n      location_country\n    )\n\n    dispatch(updateLocationAutocompleteValue(location))\n    dispatch(freezeLocationInput())\n  }\n}\n\nexport function updateLocationSuggestions(suggestions) {\n  return {\n    type: UPDATE_LOCATION_SUGGESTIONS,\n    payload: {\n      suggestions,\n    },\n  }\n}\n\nexport function updateProgressBar(fileName, percent) {\n  return {\n    type: UPDATE_PROGRESS_BAR,\n    payload: {\n      fileName,\n      percent,\n    },\n  }\n}\n\nexport function updateSkipPhotoSubmission(skip) {\n  return {\n    type: UPDATE_SKIP_PHOTO_SUBMISSION,\n    payload: {\n      skip,\n    },\n  }\n}\n\nexport function updateStepsWithUser() {\n  return {\n    type: UPDATE_STEPS_WITH_USER,\n  }\n}\n\nexport function updateStepsWithoutUser() {\n  return {\n    type: UPDATE_STEPS_WITHOUT_USER,\n  }\n}\n\nexport function updateSubmission(submission) {\n  return {\n    type: UPDATE_SUBMISSION,\n    payload: {\n      submission,\n    },\n  }\n}\n\nexport function updateUser(user, accountCreated) {\n  return {\n    type: UPDATE_USER,\n    payload: {\n      user,\n      accountCreated,\n    },\n  }\n}\n\nexport function updateUserPhone(phone) {\n  return {\n    type: UPDATE_USER_PHONE,\n    payload: {\n      phone,\n    },\n  }\n}\n\nexport function uploadImageToConvection(geminiToken, fileName) {\n  return async (dispatch, getState) => {\n    try {\n      const {\n        submissionFlow: { submission, submissionIdFromServer, user },\n      } = getState()\n      const submissionId = submission.id || submissionIdFromServer\n      const token = await fetchToken(user.accessToken)\n      const inputs = {\n        submission_id: submissionId,\n        gemini_token: geminiToken,\n      }\n      const assetResponse = await request\n        .post(`${sd.CONVECTION_APP_URL}/api/assets`)\n        .set('Authorization', `Bearer ${token}`)\n        .send(inputs)\n      const assetId = assetResponse.body.id\n\n      dispatch(stopProcessingImage(fileName))\n      dispatch(addAssetId(assetId))\n    } catch (err) {\n      dispatch(errorOnImage(fileName))\n      console.error(\n        '(consignments/client/actions.js @ uploadImageToConvection) Error:',\n        err\n      )\n    }\n  }\n}\n\nexport function uploadImageToGemini(key, bucket, fileName) {\n  return async (dispatch, getState) => {\n    try {\n      const {\n        submissionFlow: { submission, submissionIdFromServer },\n      } = getState()\n      const submissionId = submission.id || submissionIdFromServer\n      const inputs = {\n        entry: {\n          template_key: sd.CONVECTION_GEMINI_APP,\n          source_key: key,\n          source_bucket: bucket,\n          metadata: {\n            id: submissionId,\n            _type: 'Consignment',\n          },\n        },\n      }\n      const response = await request\n        .post(`${sd.GEMINI_APP}/entries.json`)\n        .set('Authorization', `Basic ${encode(sd.CONVECTION_GEMINI_APP, '')}`)\n        .send(inputs)\n\n      const token = response.body.token\n\n      dispatch(uploadImageToConvection(token, fileName))\n    } catch (err) {\n      dispatch(errorOnImage(fileName))\n      console.error(\n        '(consignments/client/actions.js @ uploadImageToGemini) Error:',\n        err\n      )\n    }\n  }\n}\n\n// helpers\nfunction encode(key, secret) {\n  return btoa(unescape(encodeURIComponent([key, secret].join(':'))))\n}\n"]}]}