{"remainingRequest":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js??ref--2-1!/Users/eve/development/force/src/desktop/apps/article/client/classic.js","dependencies":[{"path":"/Users/eve/development/force/src/desktop/apps/article/client/classic.js","mtime":1521064653000},{"path":"/Users/eve/development/force/.babelrc","mtime":1537178749000},{"path":"/Users/eve/development/force/node_modules/cache-loader/dist/cjs.js","mtime":1510929699000},{"path":"/Users/eve/development/force/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\n// Initializes all client-side Backbone views for \"classic\" layouts\nimport _$ from 'jquery';\nimport { data as _sd } from 'sharify';\nimport { auctionQuery, partnerQuery } from \"../queries/promotedContent\";\nimport metaphysics from \"../../../../lib/metaphysics.coffee\";\nimport Article from \"../../../models/article.coffee\";\nimport Articles from \"../../../collections/articles.coffee\";\nimport _ArticlesGridView from \"../../../components/articles_grid/view.coffee\";\nimport _ArticleView from \"../../../components/article/client/view.coffee\";\nimport Channel from \"../../../models/channel.coffee\";\nimport _GalleryInsightsView from \"../../../components/email/client/gallery_insights.coffee\";\nimport _TeamChannelNavView from \"../../../components/channel_nav/view.coffee\"; // FIXME: Rewire\n\nvar $ = _$;\nvar sd = _sd;\nvar ArticlesGridView = _ArticlesGridView;\nvar TeamChannelNavView = _TeamChannelNavView;\nvar ArticleView = _ArticleView;\nvar GalleryInsightsView = _GalleryInsightsView;\n\nvar promotedTemplate = function promotedTemplate(args) {\n  return require(\"../templates/promoted_content.jade\")(args);\n};\n\nexport var init = function init() {\n  var article = new Article(sd.ARTICLE);\n  var channel = new Channel(sd.ARTICLE_CHANNEL);\n  new ArticleView({\n    el: $('body'),\n    article: article\n  });\n  new GalleryInsightsView({\n    el: $('body')\n  });\n\n  if (channel.isTeam()) {\n    new TeamChannelNavView({\n      el: $('body'),\n      $content: $('.article-content'),\n      offset: 0\n    });\n  }\n\n  setupFooterArticles(channel);\n  setupPromotedContent(article);\n};\n\nvar setupFooterArticles = function setupFooterArticles(channel) {\n  var data = {\n    published: true,\n    sort: '-published_at',\n    limit: 12,\n    channel_id: channel.get('id')\n  };\n  var collection = new Articles();\n  new ArticlesGridView({\n    el: $('#articles-footer').addClass('articles-grid'),\n    hideMore: true,\n    header: \"More from \".concat(channel.get('name') || 'Artsy'),\n    collection: collection\n  });\n  collection.fetch({\n    data: data\n  });\n};\n\nvar setupPromotedContent = function setupPromotedContent(article) {\n  var channel = article.get('channel_id');\n\n  if (channel === sd.PC_ARTSY_CHANNEL && article.get('partner_ids')) {\n    var send = {\n      method: 'post',\n      query: partnerQuery(article.get('partner_ids')[0])\n    };\n    metaphysics(send).then(function (data) {\n      var cropped = data.partner.profile.image.cropped;\n      var src = cropped ? cropped.url : '';\n      $('#articles-show').prepend(promotedTemplate({\n        src: src,\n        name: data.partner.name,\n        href: data.partner.profile.href,\n        type: data.partner.type === 'Gallery' ? 'Gallery' : 'Institution'\n      }));\n    });\n  } else if (channel === sd.PC_AUCTION_CHANNEL && article.get('auction_ids')) {\n    var _send = {\n      method: 'post',\n      query: auctionQuery(article.get('auction_ids')[0])\n    };\n    metaphysics(_send).then(function (data) {\n      var cropped = data.sale.cover_image.cropped;\n      var src = cropped ? cropped.url : '';\n      $('#articles-show').prepend(promotedTemplate({\n        src: src,\n        name: data.sale.name,\n        href: data.sale.href,\n        type: 'Auction'\n      }));\n    });\n  }\n};\n\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register($, \"$\", \"/Users/eve/development/force/src/desktop/apps/article/client/classic.js\");\n  reactHotLoader.register(sd, \"sd\", \"/Users/eve/development/force/src/desktop/apps/article/client/classic.js\");\n  reactHotLoader.register(ArticlesGridView, \"ArticlesGridView\", \"/Users/eve/development/force/src/desktop/apps/article/client/classic.js\");\n  reactHotLoader.register(TeamChannelNavView, \"TeamChannelNavView\", \"/Users/eve/development/force/src/desktop/apps/article/client/classic.js\");\n  reactHotLoader.register(ArticleView, \"ArticleView\", \"/Users/eve/development/force/src/desktop/apps/article/client/classic.js\");\n  reactHotLoader.register(GalleryInsightsView, \"GalleryInsightsView\", \"/Users/eve/development/force/src/desktop/apps/article/client/classic.js\");\n  reactHotLoader.register(promotedTemplate, \"promotedTemplate\", \"/Users/eve/development/force/src/desktop/apps/article/client/classic.js\");\n  reactHotLoader.register(init, \"init\", \"/Users/eve/development/force/src/desktop/apps/article/client/classic.js\");\n  reactHotLoader.register(setupFooterArticles, \"setupFooterArticles\", \"/Users/eve/development/force/src/desktop/apps/article/client/classic.js\");\n  reactHotLoader.register(setupPromotedContent, \"setupPromotedContent\", \"/Users/eve/development/force/src/desktop/apps/article/client/classic.js\");\n  leaveModule(module);\n})();\n\n;",{"version":3,"sources":["/Users/eve/development/force/src/desktop/apps/article/client/classic.js"],"names":["_$","data","_sd","auctionQuery","partnerQuery","metaphysics","Article","Articles","_ArticlesGridView","_ArticleView","Channel","_GalleryInsightsView","_TeamChannelNavView","$","sd","ArticlesGridView","TeamChannelNavView","ArticleView","GalleryInsightsView","promotedTemplate","args","require","init","article","ARTICLE","channel","ARTICLE_CHANNEL","el","isTeam","$content","offset","setupFooterArticles","setupPromotedContent","published","sort","limit","channel_id","get","collection","addClass","hideMore","header","fetch","PC_ARTSY_CHANNEL","send","method","query","then","cropped","partner","profile","image","src","url","prepend","name","href","type","PC_AUCTION_CHANNEL","sale","cover_image"],"mappings":";;;;;;AAAA;AAEA,OAAOA,EAAP,MAAe,QAAf;AACA,SAASC,IAAI,IAAIC,GAAjB,QAA4B,SAA5B;AACA,SAASC,YAAT,EAAuBC,YAAvB;AACA,OAAOC,WAAP;AACA,OAAOC,OAAP;AACA,OAAOC,QAAP;AACA,OAAOC,iBAAP;AACA,OAAOC,YAAP;AACA,OAAOC,OAAP;AACA,OAAOC,oBAAP;AACA,OAAOC,mBAAP,oD,CAEA;;AACA,IAAIC,CAAC,GAAGb,EAAR;AACA,IAAIc,EAAE,GAAGZ,GAAT;AACA,IAAIa,gBAAgB,GAAGP,iBAAvB;AACA,IAAIQ,kBAAkB,GAAGJ,mBAAzB;AACA,IAAIK,WAAW,GAAGR,YAAlB;AACA,IAAIS,mBAAmB,GAAGP,oBAA1B;;AAEA,IAAMQ,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,IAAD,EAAU;AACjC,SAAOC,OAAO,sCAAP,CAAgED,IAAhE,CAAP;AACD,CAFD;;AAIA,OAAO,IAAME,IAAI,GAAG,SAAPA,IAAO,GAAM;AACxB,MAAMC,OAAO,GAAG,IAAIjB,OAAJ,CAAYQ,EAAE,CAACU,OAAf,CAAhB;AACA,MAAMC,OAAO,GAAG,IAAIf,OAAJ,CAAYI,EAAE,CAACY,eAAf,CAAhB;AAEA,MAAIT,WAAJ,CAAgB;AACdU,IAAAA,EAAE,EAAEd,CAAC,CAAC,MAAD,CADS;AAEdU,IAAAA,OAAO,EAAPA;AAFc,GAAhB;AAKA,MAAIL,mBAAJ,CAAwB;AAAES,IAAAA,EAAE,EAAEd,CAAC,CAAC,MAAD;AAAP,GAAxB;;AAEA,MAAIY,OAAO,CAACG,MAAR,EAAJ,EAAsB;AACpB,QAAIZ,kBAAJ,CAAuB;AACrBW,MAAAA,EAAE,EAAEd,CAAC,CAAC,MAAD,CADgB;AAErBgB,MAAAA,QAAQ,EAAEhB,CAAC,CAAC,kBAAD,CAFU;AAGrBiB,MAAAA,MAAM,EAAE;AAHa,KAAvB;AAKD;;AAEDC,EAAAA,mBAAmB,CAACN,OAAD,CAAnB;AACAO,EAAAA,oBAAoB,CAACT,OAAD,CAApB;AACD,CArBM;;AAuBP,IAAMQ,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACN,OAAD,EAAa;AACvC,MAAMxB,IAAI,GAAG;AACXgC,IAAAA,SAAS,EAAE,IADA;AAEXC,IAAAA,IAAI,EAAE,eAFK;AAGXC,IAAAA,KAAK,EAAE,EAHI;AAIXC,IAAAA,UAAU,EAAEX,OAAO,CAACY,GAAR,CAAY,IAAZ;AAJD,GAAb;AAMA,MAAMC,UAAU,GAAG,IAAI/B,QAAJ,EAAnB;AAEA,MAAIQ,gBAAJ,CAAqB;AACnBY,IAAAA,EAAE,EAAEd,CAAC,CAAC,kBAAD,CAAD,CAAsB0B,QAAtB,CAA+B,eAA/B,CADe;AAEnBC,IAAAA,QAAQ,EAAE,IAFS;AAGnBC,IAAAA,MAAM,sBAAehB,OAAO,CAACY,GAAR,CAAY,MAAZ,KAAuB,OAAtC,CAHa;AAInBC,IAAAA,UAAU,EAAVA;AAJmB,GAArB;AAOAA,EAAAA,UAAU,CAACI,KAAX,CAAiB;AACfzC,IAAAA,IAAI,EAAEA;AADS,GAAjB;AAGD,CAnBD;;AAqBA,IAAM+B,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACT,OAAD,EAAa;AACxC,MAAME,OAAO,GAAGF,OAAO,CAACc,GAAR,CAAY,YAAZ,CAAhB;;AACA,MAAIZ,OAAO,KAAKX,EAAE,CAAC6B,gBAAf,IAAmCpB,OAAO,CAACc,GAAR,CAAY,aAAZ,CAAvC,EAAmE;AACjE,QAAMO,IAAI,GAAG;AACXC,MAAAA,MAAM,EAAE,MADG;AAEXC,MAAAA,KAAK,EAAE1C,YAAY,CAACmB,OAAO,CAACc,GAAR,CAAY,aAAZ,EAA2B,CAA3B,CAAD;AAFR,KAAb;AAIAhC,IAAAA,WAAW,CAACuC,IAAD,CAAX,CACCG,IADD,CACM,UAAC9C,IAAD,EAAU;AACd,UAAM+C,OAAO,GAAG/C,IAAI,CAACgD,OAAL,CAAaC,OAAb,CAAqBC,KAArB,CAA2BH,OAA3C;AACA,UAAMI,GAAG,GAAGJ,OAAO,GAAGA,OAAO,CAACK,GAAX,GAAiB,EAApC;AACAxC,MAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoByC,OAApB,CAA4BnC,gBAAgB,CAAC;AAC3CiC,QAAAA,GAAG,EAAHA,GAD2C;AAE3CG,QAAAA,IAAI,EAAEtD,IAAI,CAACgD,OAAL,CAAaM,IAFwB;AAG3CC,QAAAA,IAAI,EAAEvD,IAAI,CAACgD,OAAL,CAAaC,OAAb,CAAqBM,IAHgB;AAI3CC,QAAAA,IAAI,EAAExD,IAAI,CAACgD,OAAL,CAAaQ,IAAb,KAAsB,SAAtB,GAAkC,SAAlC,GAA8C;AAJT,OAAD,CAA5C;AAMD,KAVD;AAWD,GAhBD,MAgBO,IAAIhC,OAAO,KAAKX,EAAE,CAAC4C,kBAAf,IAAqCnC,OAAO,CAACc,GAAR,CAAY,aAAZ,CAAzC,EAAqE;AAC1E,QAAMO,KAAI,GAAG;AACXC,MAAAA,MAAM,EAAE,MADG;AAEXC,MAAAA,KAAK,EAAE3C,YAAY,CAACoB,OAAO,CAACc,GAAR,CAAY,aAAZ,EAA2B,CAA3B,CAAD;AAFR,KAAb;AAIAhC,IAAAA,WAAW,CAACuC,KAAD,CAAX,CACCG,IADD,CACM,UAAC9C,IAAD,EAAU;AACd,UAAM+C,OAAO,GAAG/C,IAAI,CAAC0D,IAAL,CAAUC,WAAV,CAAsBZ,OAAtC;AACA,UAAMI,GAAG,GAAGJ,OAAO,GAAGA,OAAO,CAACK,GAAX,GAAiB,EAApC;AACAxC,MAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoByC,OAApB,CAA4BnC,gBAAgB,CAAC;AAC3CiC,QAAAA,GAAG,EAAHA,GAD2C;AAE3CG,QAAAA,IAAI,EAAEtD,IAAI,CAAC0D,IAAL,CAAUJ,IAF2B;AAG3CC,QAAAA,IAAI,EAAEvD,IAAI,CAAC0D,IAAL,CAAUH,IAH2B;AAI3CC,QAAAA,IAAI,EAAE;AAJqC,OAAD,CAA5C;AAMD,KAVD;AAWD;AACF,CAnCD;;;;;;;;;;;;;0BAvDI5C,C;0BACAC,E;0BACAC,gB;0BACAC,kB;0BACAC,W;0BACAC,mB;0BAEEC,gB;0BAIOG,I;0BAuBPS,mB;0BAqBAC,oB","sourcesContent":["// Initializes all client-side Backbone views for \"classic\" layouts\n\nimport _$ from 'jquery'\nimport { data as _sd } from 'sharify'\nimport { auctionQuery, partnerQuery } from 'desktop/apps/article/queries/promotedContent'\nimport metaphysics from 'lib/metaphysics.coffee'\nimport Article from 'desktop/models/article.coffee'\nimport Articles from 'desktop/collections/articles.coffee'\nimport _ArticlesGridView from 'desktop/components/articles_grid/view.coffee'\nimport _ArticleView from 'desktop/components/article/client/view.coffee'\nimport Channel from 'desktop/models/channel.coffee'\nimport _GalleryInsightsView from 'desktop/components/email/client/gallery_insights.coffee'\nimport _TeamChannelNavView from 'desktop/components/channel_nav/view.coffee'\n\n// FIXME: Rewire\nlet $ = _$\nlet sd = _sd\nlet ArticlesGridView = _ArticlesGridView\nlet TeamChannelNavView = _TeamChannelNavView\nlet ArticleView = _ArticleView\nlet GalleryInsightsView = _GalleryInsightsView\n\nconst promotedTemplate = (args) => {\n  return require('desktop/apps/article/templates/promoted_content.jade')(args)\n}\n\nexport const init = () => {\n  const article = new Article(sd.ARTICLE)\n  const channel = new Channel(sd.ARTICLE_CHANNEL)\n\n  new ArticleView({\n    el: $('body'),\n    article\n  })\n\n  new GalleryInsightsView({ el: $('body') })\n\n  if (channel.isTeam()) {\n    new TeamChannelNavView({\n      el: $('body'),\n      $content: $('.article-content'),\n      offset: 0\n    })\n  }\n\n  setupFooterArticles(channel)\n  setupPromotedContent(article)\n}\n\nconst setupFooterArticles = (channel) => {\n  const data = {\n    published: true,\n    sort: '-published_at',\n    limit: 12,\n    channel_id: channel.get('id')\n  }\n  const collection = new Articles()\n\n  new ArticlesGridView({\n    el: $('#articles-footer').addClass('articles-grid'),\n    hideMore: true,\n    header: `More from ${channel.get('name') || 'Artsy'}`,\n    collection\n  })\n\n  collection.fetch({\n    data: data\n  })\n}\n\nconst setupPromotedContent = (article) => {\n  const channel = article.get('channel_id')\n  if (channel === sd.PC_ARTSY_CHANNEL && article.get('partner_ids')) {\n    const send = {\n      method: 'post',\n      query: partnerQuery(article.get('partner_ids')[0])\n    }\n    metaphysics(send)\n    .then((data) => {\n      const cropped = data.partner.profile.image.cropped\n      const src = cropped ? cropped.url : ''\n      $('#articles-show').prepend(promotedTemplate({\n        src,\n        name: data.partner.name,\n        href: data.partner.profile.href,\n        type: data.partner.type === 'Gallery' ? 'Gallery' : 'Institution'\n      }))\n    })\n  } else if (channel === sd.PC_AUCTION_CHANNEL && article.get('auction_ids')) {\n    const send = {\n      method: 'post',\n      query: auctionQuery(article.get('auction_ids')[0])\n    }\n    metaphysics(send)\n    .then((data) => {\n      const cropped = data.sale.cover_image.cropped\n      const src = cropped ? cropped.url : ''\n      $('#articles-show').prepend(promotedTemplate({\n        src,\n        name: data.sale.name,\n        href: data.sale.href,\n        type: 'Auction'\n      }))\n    })\n  }\n}\n"]}]}